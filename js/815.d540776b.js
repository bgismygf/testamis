"use strict";(self["webpackChunkamis"]=self["webpackChunkamis"]||[]).push([[815],{7815:function(a,e,t){t.r(e),t.d(e,{default:function(){return S}});t(7658);var n=t(6252),l=t(9963),o=t(3577),s=t(2262),i=t(8877);const c={class:"container"},d=(0,n._)("h3",{class:"mb-5"},"療程部位管理",-1),u=(0,n._)("h4",{class:"mb-2"},"維護療程部位",-1),r={class:"d-flex justify-content-between mb-2"},m={class:"row g-3"},p=(0,n._)("div",{class:"col-auto"},[(0,n._)("label",{for:"inputSearch",class:"col-form-label"},"療程部位")],-1),y={class:"col-auto"},b={class:"col-auto"},v={class:"table"},_=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"療程部位"),(0,n._)("th",{class:"text-center",scope:"col"},"編輯")])],-1),f={class:"align-middle"},h={class:"text-center"},w={class:"btn-group",role:"group","aria-label":"Basic example"},C=["onClick"],g={class:"modal-dialog"},k={class:"modal-content"},A={class:"modal-header"},B={class:"modal-title",id:"exampleModalLabel"},T=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body px-1"},E={class:"row mb-3"},H=(0,n._)("label",{for:"name",class:"col-sm-3 col-form-label"},"療程部位 :",-1),P={class:"col-sm-9"},z={class:"modal-footer px-1"},$=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);var j={__name:"bodyPartSetting",setup(a){const e=(0,n.f3)("alertMessage"),{updateMessage:t}=e,j=(0,n.f3)("fetchFunction"),{fetchApi:G,getTokenFromCookie:S}=j,D=(0,s.iH)(null);let q;const M=(0,s.iH)({employeeData:[],deleteitem:"",departmentId:"",roleData:[],isAddEmployee:!0}),N=async()=>{let a;if(a=M.value.isAddEmployee?await U():await J(),a.statusCode>=400)return t(a.message),null;t(a.message),L(),q.hide()},O=(0,s.iH)({}),F=(0,s.iH)([]),I=async(a,e)=>{M.value.isAddEmployee=a;const t=[];if(K.value.forEach((a=>{t.push({id:a.id,point:null,name:a.name})})),F.value=t,M.value.isAddEmployee)V();else{const a=await Y(e.id),{id:t,name:n,sequence:l,active:o}=a;O.value={id:t,name:n,sequence:l,active:o}}q.show()},J=async()=>{const a={...O.value},e="/api/BodyPart",t=S(),n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},method:"PATCH",body:JSON.stringify(a)};return await G(e,n)},U=async()=>{const a={name:O.value.name,active:!0},e="/api/BodyPart",t=S(),n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},method:"POST",body:JSON.stringify(a)};return await G(e,n)};function V(){O.value={id:null,name:null,sequence:0,active:!0}}async function Y(a){const e=`/api/BodyPart/GetById?id=${a}`,t=S(),n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},method:"GET"},l=await G(e,n);return l.data}const K=(0,s.iH)([]);async function L(){const a="/api/BodyPart/GetAll",e=S(),t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},method:"GET"},n=await G(a,t);K.value=n.data}const R=(0,s.iH)(null);async function Q(){const a=`/api/BodyPart/GetByName?name=${R.value}`,e=S(),t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},method:"GET"},n=await G(a,t);K.value=n.data}async function W(){await L()}return W(),(0,n.bv)((()=>{q=new i.u_(D.value)})),(a,e)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",c,[d,u,(0,n._)("div",r,[(0,n._)("div",m,[p,(0,n._)("div",y,[(0,n.wy)((0,n._)("input",{type:"text",id:"inputSearch",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>R.value=a)},null,512),[[l.nr,R.value]])]),(0,n._)("div",b,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=a=>Q())},"搜尋"),(0,n._)("button",{type:"button",class:"btn btn-primary ms-2",onClick:e[2]||(e[2]=a=>{L(),R.value=null})},"重置")])]),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=a=>I(!0))},"新增療程部位")]),(0,n._)("table",v,[_,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(K.value,(a=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",f,(0,o.zw)(a.name),1),(0,n._)("td",h,[(0,n._)("div",w,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e=>I(!1,a)},"編輯",8,C)])])])))),128))])])]),(0,n._)("div",{class:"modal fade",ref_key:"modalRef",ref:D},[(0,n._)("div",g,[(0,n._)("div",k,[(0,n._)("div",A,[(0,n._)("h5",B,(0,o.zw)(M.value.isAddEmployee?"新增":"編輯")+"療程部位",1),T]),(0,n._)("div",x,[(0,n._)("form",null,[(0,n._)("div",E,[H,(0,n._)("div",P,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[4]||(e[4]=a=>O.value.name=a)},null,512),[[l.nr,O.value.name]])])])])]),(0,n._)("div",z,[$,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=a=>N())},"確定")])])])],512)],64))}};const G=j;var S=G}}]);
//# sourceMappingURL=815.d540776b.js.map