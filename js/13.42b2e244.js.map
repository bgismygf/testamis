{"version":3,"file":"js/13.42b2e244.js","mappings":"67BA8HE,MAAMA,GAAeC,EAAAA,EAAAA,IAAO,iBACpB,cAAEC,GAAkBF,EAQpBG,GAAgBF,EAAAA,EAAAA,IAAO,kBAEvB,SACJG,EAAQ,mBACRC,GACEF,EAEEG,GAAOC,EAAAA,EAAAA,IAAS,CACpBC,UAAW,CAAC,EACZC,WAAY,GACZC,mBAAoB,GACpBC,yBAA0B,GAC1BC,qBAAqB,IAGjBC,EAAuBC,UAC3BR,EAAKG,WAAaM,EAElB,MAAMC,EAAO,gFAA+ED,EAAKE,KAE3FC,EAAQb,IAERc,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,cAAmB,UAASF,KAE9BG,OAAQ,OAGJC,QAAiBlB,EAASY,EAAKG,GAErCb,EAAKK,yBAA2BW,EAAShB,IAAI,EAG/CQ,eAAeS,IACb,MAAMP,EAAO,sDAEPE,EAAQb,IAERc,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,cAAmB,UAASF,KAE9BG,OAAQ,OAGJC,QAAiBlB,EAASY,EAAKG,GAErCb,EAAKI,mBAAqBY,EAAShB,IACrC,CAEAQ,eAAeU,UACPD,GACR,CAEAC,IAOA,MAAMC,EAAeX,UAEnB,MAAM,GAAEG,EAAE,oBAAES,EAAmB,UAAEC,EAAS,OAAEC,GAAWb,EAEjDT,EAAO,CACXW,KACAS,sBACAC,YACAC,UAGIZ,EAAO,kCAEPE,EAAQb,IAERc,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,cAAmB,UAASF,KAE9BG,OAAQ,QACRQ,KAAMC,KAAKC,UAAUzB,IAGjBgB,QAAiBlB,EAASY,EAAKG,GAErCjB,EAAcoB,EAASU,QAAQ,E,s7BC3NrC,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://amis/./src/views/setOutpatientTime.vue","webpack://amis/./src/views/setOutpatientTime.vue?93b5"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h3 class=\"mb-5\">設定門診時間</h3>\n    <div class=\"d-flex mb-2\">\n      <!-- <button type=\"button\" class=\"btn btn-primary\" @click=\"openModel(true)\">新增</button> -->\n      <!-- <button type=\"button\" class=\"btn btn-secondary mx-2\"\n              @click=\"openModel(false)\"\n              :disabled=\"!data.selectItem\">修改</button> -->\n      <!-- <button type=\"button\" class=\"btn btn-danger\"\n              :disabled=\"!data.selectItem\">刪除</button> -->\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">部門名稱</th>\n          <th scope=\"col\">時段</th>\n          <th scope=\"col\">開始時間</th>\n          <th scope=\"col\">結束時間</th>\n          <th scope=\"col\">間距(分鐘)</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in data.OutpatientTimeData\" :key=\"item.id\"\n            @click=\"outpatientTimeDetail(item)\"\n            :class=\"{ 'selectItemStyle' : data.selectItem.id === item.id }\">\n          <th>{{ item.departmentName }}</th>\n          <td>{{ item.clinicPeriodName }}</td>\n          <td>{{ item.startTime }}</td>\n          <td>{{ item.endTime }}</td>\n          <td>{{ item.timeInterval }}</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <h3 class=\"mb-5\">門診時間詳細</h3>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">時間</th>\n          <th scope=\"col\">狀態</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in data.outpatientTimeDetailData\" :key=\"item.id\">\n          <td>{{ item.timePoint }}</td>\n          <td>\n            <div class=\"form-check form-switch\">\n              <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" v-model=\"item.active\"\n                    @change=\"statusChange(item)\">\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- 新增 / 編輯 Modal -->\n  <!-- <div class=\"modal fade\" ref=\"modalRef\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ data.isAddOutpatientTime ? '新增' : '修改' }}門診時間</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body px-1\">\n          <div class=\"row mb-3\">\n            <label for=\"departmentId\" class=\"col-sm-2 col-form-label\">部門</label>\n            <div class=\"col-sm-10\">\n              <select class=\"form-select\" id=\"departmentId\"\n                      >\n                <option value=\"AestheticMedicine\">醫美部</option>\n                <option value=\"Beauty\">美容部</option>\n              </select>\n            </div>\n          </div>\n\n          <div class=\"row mb-3\">\n            <label for=\"departmentId\" class=\"col-sm-2 col-form-label\">時段</label>\n            <div class=\"col-sm-10\">\n              <select class=\"form-select\" id=\"departmentId\"\n                      >\n                <option value=\"AestheticMedicine\">早診</option>\n                <option value=\"Beauty\">午診</option>\n              </select>\n            </div>\n          </div>\n          \n          <div class=\"row mb-3\">\n            <label for=\"cellPhone\" class=\"col-sm-2 col-form-label\">開始時間</label>\n            <div class=\"col-sm-10\">\n              <input type=\"time\" class=\"form-control\" id=\"cellPhone\"\n                    >\n            </div>\n          </div>\n            \n          <div class=\"row mb-3\">\n            <label for=\"cellPhone\" class=\"col-sm-2 col-form-label\">結束時間</label>\n            <div class=\"col-sm-10\">\n              <input type=\"time\" class=\"form-control\" id=\"cellPhone\"\n                    >\n            </div>\n          </div>\n\n          <div class=\"row mb-3\">\n            <label for=\"cellPhone\" class=\"col-sm-3 col-form-label\">間距(分鐘)</label>\n            <div class=\"col-sm-9\">\n              <input type=\"number\" class=\"form-control\" id=\"cellPhone\"\n                    >\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer px-1\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary\">確定</button>\n        </div>\n      </div>\n    </div>\n  </div> -->\n</template>\n\n<script setup>\n  // import { reactive, ref, onMounted } from 'vue';\n  // import { Modal } from 'bootstrap';\n\n  import { reactive, inject } from 'vue';\n\n  const alertMessage = inject('alertMessage');\n    const { updateMessage } = alertMessage;\n\n    // const modalRef = ref(null);\n    // const deleteModalRef = ref(null);\n\n    // let modal;\n    // let deleteModa;\n\n    const fetchFunction = inject('fetchFunction');\n\n    const {\n      fetchApi,\n      getTokenFromCookie\n    } = fetchFunction;\n\n    const data = reactive({\n      modalData: {},\n      selectItem: '',\n      OutpatientTimeData: [],\n      outpatientTimeDetailData: [],\n      isAddOutpatientTime: true,\n    });\n\n    const outpatientTimeDetail = async (item) => {\n      data.selectItem = item;\n\n      const url = `/api/OutpatientTimePointSetting/GetByOutpatientSettingId?outpatientSettingId=${item.id}`;\n\n      const token = getTokenFromCookie();\n\n      const options = {\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\" : `Bearer ${token}`\n        },\n        method: 'GET'\n      }\n\n      const response = await fetchApi(url, options);\n\n      data.outpatientTimeDetailData = response.data;\n    }\n\n    async function getOutpatientTimeData() {\n      const url = `/api/OutpatientSetting/GetInitOutpatientSettingData`;\n\n      const token = getTokenFromCookie();\n\n      const options = {\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\" : `Bearer ${token}`\n        },\n        method: 'GET'\n      }\n\n      const response = await fetchApi(url, options);\n\n      data.OutpatientTimeData = response.data;\n    }\n\n    async function init() {\n      await getOutpatientTimeData();\n    }\n\n    init();\n\n    // onMounted(() => {\n    //   modal = new Modal(modalRef.value);\n    // });\n\n    /** 狀態更新 */\n    const statusChange = async(item) => {\n\n      const { id, outpatientSettingId, timePoint, active } = item;\n\n      const data = {\n        id,\n        outpatientSettingId,\n        timePoint,\n        active\n      }\n\n      const url = `/api/OutpatientTimePointSetting`;\n\n      const token = getTokenFromCookie();\n\n      const options = {\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\" : `Bearer ${token}`\n        },\n        method: 'PATCH',\n        body: JSON.stringify(data),\n      }\n\n      const response = await fetchApi(url, options);\n\n      updateMessage(response.message);\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n.selectItemStyle {\n  background: #0A5866;\n  color: #fff;\n}\n</style>","import script from \"./setOutpatientTime.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./setOutpatientTime.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./setOutpatientTime.vue?vue&type=style&index=0&id=ca7e3d54&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\shang\\\\OneDrive\\\\桌面\\\\amis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca7e3d54\"]])\n\nexport default __exports__"],"names":["alertMessage","inject","updateMessage","fetchFunction","fetchApi","getTokenFromCookie","data","reactive","modalData","selectItem","OutpatientTimeData","outpatientTimeDetailData","isAddOutpatientTime","outpatientTimeDetail","async","item","url","id","token","options","headers","method","response","getOutpatientTimeData","init","statusChange","outpatientSettingId","timePoint","active","body","JSON","stringify","message","__exports__"],"sourceRoot":""}