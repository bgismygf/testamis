{"version":3,"file":"js/763.961ec1ef.js","mappings":"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","sources":["webpack://amis/./src/views/track/trackIndex.vue","webpack://amis/./src/views/track/trackIndex.vue?8be6"],"sourcesContent":["<template>\n  <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-2\"></div>\n        <div class=\"col-10\">\n          <div class=\"d-flex justify-content-end mb-3\">\n\n            <div class=\"border border-gray3 bg-white p-1 rounded-pill position-relative\">\n              <h6 class=\"d-inline-block mb-0 py-1 px-5 slider\"\n                    @click=\"departmentToggle('AestheticMedicine')\"\n                    :class=\"{ 'activeds': department === 'Beauty' }\">\n                醫 美 部\n              </h6>\n\n              <h6 class=\"d-inline-block mb-0 py-1 px-5 position-relative text-main-dark1\"\n                  style=\"z-index: 66\"\n                  :class=\"{ 'text-white' : department === 'AestheticMedicine'}\"\n                  @click=\"departmentToggle('AestheticMedicine')\">\n                醫 美 部\n              </h6>\n\n              <h6 class=\"d-inline-block mb-0 py-1 px-5 position-relative text-main-dark1\"\n                  style=\"z-index: 66\"\n                  :class=\"{ 'text-white' : department === 'Beauty'}\"\n                  @click=\"departmentToggle('Beauty')\">\n                美 容 部\n              </h6>\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-2\">\n          <!-- 醫師陣容 -->\n          <div class=\"pt-4 px-3 bg-white rounded-20 border border-gray2\" v-show=\"department === 'AestheticMedicine'\">\n            <div class=\"d-flex align-items-center mb-4\">\n              <h6 class=\"text-main-dark2 me-auto mb-0 ms-1\">醫師陣容</h6>\n            </div>\n\n            <div class=\"border-top border-gray2 pt-4\">\n              <div class=\"row gx-1\">\n                <div class=\"col-4 mb-4\"\n                    v-for=\"(item, index) in doctorData\" :key=\"item\">\n                  <a href=\"#\" class=\"head\" :style=\"`border: 4px solid ${item.color};`\"\n                     :class=\"{ 'active' : item.select }\"\n                     @click.prevent=\"showOrHideDoctorData(item)\">\n                    <span class=\"head-name h6\">{{ item.nickname }}</span>\n                    <div class=\"head-img-border\">\n                      <img width=\"44\" height=\"44\"\n                        class=\"rounded-circle\"\n                        :src=\"`https://randomuser.me/api/portraits/women/${index + 1}.jpg`\" alt=\"\">\n                    </div>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- 客戶搜尋 -->\n          <div class=\"bg-white rounded-20 border border-gray2 mt-3\">\n            <a class=\"d-flex w-100 align-items-center text-decoration-none py-4 px-5\"\n               href=\"#\"\n               @click.prevent=\"accordionToggle(0, accordion.toggleCard)\">\n              <h6 class=\"mb-0 text-main-dark2 me-auto\">客戶搜尋</h6>\n              <img class=\"toggle-card-icon\" src=\"@/assets/stylesheets/icon/arrow_down.png\" alt=\"arrow_down\" width=\"15.78\" height=\"7.3\">\n            </a>\n\n            <div class=\"toggle-card toggle-style\">\n              <div class=\"pb-2 px-3\">\n                <div class=\"border-top border-gray2\"></div>\n\n              <div class=\"position-relative mt-4 mb-2\">\n                <label for=\"customerName\" style=\"left: 14px;\" class=\"position-absolute top-50 translate-middle-y form-label text-main-dark2\">姓 名</label>\n                <input type=\"text\" class=\"form-control rounded-pill text-main-dark2\"\n                       style=\"text-indent: 50px;\"\n                       id=\"customerName\"\n                       aria-describedby=\"customerName\"\n                       autocomplete=\"off\"\n                       v-model=\"data.customer.name\">\n              </div>\n\n\n              <div class=\"position-relative mb-2\">\n                <label for=\"customerBirth\" style=\"left: 14px;\" class=\"position-absolute top-50 translate-middle-y form-label text-main-dark2\">生 日</label>\n                <input type=\"text\" class=\"form-control rounded-pill text-main-dark2\"\n                       style=\"text-indent: 50px;\"\n                       id=\"customerBirth\"\n                       aria-describedby=\"customerBirth\"\n                       autocomplete=\"off\"\n                       placeholder=\"YYYMMDD\"\n                       v-model=\"data.customer.birth\"\n                       maxlength=\"8\">\n              </div>\n\n              <div class=\"position-relative\">\n                <label for=\"customerTel\" style=\"left: 14px;\" class=\"position-absolute top-50 translate-middle-y form-label text-main-dark2\">電 話</label>\n                <input type=\"tel\" class=\"form-control rounded-pill text-main-dark2\"\n                       style=\"text-indent: 50px;\"\n                       id=\"customerTel\"\n                       aria-describedby=\"customerTel\"\n                       autocomplete=\"off\"\n                       placeholder=\"09xx-xxx-xxx\"\n                       v-model=\"data.customer.tel\"\n                       maxlength=\"10\">\n              </div>\n\n              <div class=\"row gx-3 mt-3\">\n                  <div class=\"col-12 mb-2\">\n                    <button type=\"button\" class=\"btn btn-outline-main-dark w-100 rounded-pill\"\n                            @click=\"searchDetailedInformation({\n                              name: data.customer.name,\n                              birthday: data.customer.birth,\n                              cellPhone: data.customer.tel,\n                              courseTypeId: data.customer.courseTypeId,\n                            })\">查 詢</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n           <!-- 過濾查詢 -->\n          <div class=\"bg-white rounded-20 border border-gray2 mt-3\">\n            <div class=\"d-flex\">\n              <a class=\"d-flex w-100 align-items-center text-decoration-none py-4 px-5\" href=\"#\"\n                @click.prevent=\"accordionToggle(1, accordion.toggleCard)\">\n                <h6 class=\"mb-0 text-main-dark2 me-auto\">過濾查詢</h6>\n                <img class=\"toggle-card-icon\" src=\"@/assets/stylesheets/icon/arrow_down.png\"\n                    alt=\"arrow_down\" width=\"15.78\" height=\"7.3\">\n              </a>\n              \n            </div>\n              <div class=\"toggle-card toggle-style\">\n                <div class=\"pb-4 px-3\">\n                  <div class=\"border-top border-gray2\"></div>\n                  <div class=\"row gx-3 mt-4\">\n                    <div class=\"col-6 mb-2\">\n                      <button type=\"button\" class=\"btn btn-outline-main-dark w-100 rounded-pill\"\n                              :class=\"{ 'active' : filterQueryStatus.morning }\"\n                              @click=\"setPeriod('morning')\">早 診</button>\n                    </div>\n                    <div class=\"col-6 mb-2\">\n                      <button type=\"button\" class=\"btn btn-outline-main-dark w-100 rounded-pill\"\n                              :class=\"{ 'active' : filterQueryStatus.afternoon }\"\n                              @click=\"setPeriod('afternoon')\">午 診</button>\n                    </div>\n                    <div class=\"col-6 mb-2\">\n                      <button type=\"button\" class=\"btn btn-outline-main-dark w-100 rounded-pill\"\n                              :class=\"{ 'active' : filterQueryStatus.evening }\"\n                              @click=\"setPeriod('evening')\">晚 診</button>\n                    </div>\n                    <div class=\"col-6 mb-2\">\n                      <button type=\"button\" class=\"btn btn-outline-second2 w-100 rounded-pill\"\n                              @click=\"filterQueryReset()\">重 置</button>\n                    </div>\n                  </div>\n\n                  <select class=\"form-select rounded-pill\"\n                        @change=\"continuousOrReservedToggle()\"\n                        v-model=\"filterQueryStatus.courseTypeId\">\n                    <option selected hidden :value=\"null\">療程篩選</option>\n                    <option v-for=\"courseTypeItem in courseTypeData\"\n                            :value=\"courseTypeItem.id\"\n                            :key=\"courseTypeItem.id\">\n                            {{ courseTypeItem.name }}\n                    </option>\n                  </select>\n                </div>  \n              </div>\n          </div>\n\n          <!-- 尚未收費-->\n          <div class=\"bg-white rounded-20 border border-gray2 mt-3\">\n            <a class=\"d-flex w-100 align-items-center text-decoration-none py-4 px-5\" href=\"#\"\n               @click.prevent=\"accordionToggle(2, accordion.toggleCard)\">\n              <h6 class=\"mb-0 text-main-dark2\">尚未收費</h6>\n              <span class=\"badge rounded-pill bg-main-dark2 me-auto ms-1\">\n                {{ outstandingData ? Object.keys(outstandingData).length : 0 }}\n              </span>\n              <img class=\"toggle-card-icon\" src=\"@/assets/stylesheets/icon/arrow_down.png\" alt=\"arrow_down\" width=\"15.78\" height=\"7.3\">\n            </a>\n\n            <div class=\"toggle-card toggle-style\">\n              <div class=\"pb-4 px-3\">\n                <div class=\"border-top border-gray2\"></div>\n\n                <div class=\"scroll-content-none mt-4\" style=\"max-height: 268px;\">\n\n                  <div class=\"mb-2\" v-for=\"(item, key) in outstandingData\" :key=\"key\">\n                    <div class=\"bg-gray2 rounded-top-15\">\n                      <p class=\"fw-500 mb-0 text-center py-1\">\n                       {{ item.customerName }}\n                      </p>\n                    </div>\n                    <div class=\"border border-gray2 border-top-0 py-2 px-3\"\n                        :class=\"{'rounded-bottom-15' : item.outstandingDetails.length - 1 === index}\"\n                        v-for=\"(detail, index) in item.outstandingDetails\" :key=\"detail\">\n                      <div class=\"d-flex\">\n                        <span class=\"fw-500 me-2\">療程:</span>\n                        <span>{{ detail.courseName }}</span>\n                      </div>\n                      <div class=\"d-flex\">\n                        <span class=\"fw-500 me-2\">費用:</span>\n                        <span>{{ detail.fee }}</span>\n                      </div>\n                      <div class=\"d-flex\" v-if=\"detail.oweTicket\">\n                        <span class=\"fw-500 text-mark\">需收卷</span>\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 右邊 -->\n        <div class=\"col-lg-10\">\n          <div class=\"border border-main-dark1 rounded-20 p-4\">\n            <!-- 返回跟診表 & 條狀日曆-->\n            <div class=\"d-flex mb-4\">\n              <!-- <div style=\"width: 24%;\" v-show=\"trackContent === 'dateOfAppointment'\"></div> -->\n              <button type=\"button\" class=\"w-100 me-3 bg-white rounded-pill border border-gray\"\n                      style=\"font-size: 16px;\"\n                      @click=\"switchToDiagnosisOrDetails()\">{{ trackContent === 'dateOfAppointment' ? '顯示已離診客戶' : '返回跟診表'}}</button>\n              <div class=\"bg-white px-8 py-1 rounded-pill border border-gray\">\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"text-main-dark1 me-6\">\n                    <span class=\"me-1\" style=\"font-size: 20px; font-weight: 700;\">{{ month + 1 }}</span>\n                    <span style=\"font-weight: 700;\">{{ monthNumtoEn(month) }}</span>\n                  </div>\n                  <a href=\"#\" class=\"text-decoration-none d-inline-block me-2\" @click.prevent=\"calendarListMove(true)\">\n                    <img src=\"@/assets/stylesheets/icon/arrow_left.png\" width=\"7.62\" height=\"16\" alt=\"arrow_left\">\n                  </a>\n                  <ul class=\"d-flex list-unstyled mb-0 scroll\">\n                    <li class=\"mx-4 calendarList\" v-for=\"item in data.stripCalendar\" :key=\"item\">\n                      <a href=\"#\" class=\"text-decoration-none text-center d-inline-block\" @click.prevent=\"selectDate(item)\"\n                        :class=\"{ 'text-gray3' : year !== item.year || month + 1 !== item.month || date !== item.date }\">\n                        <p class=\"mb-0 fw-500\" style=\"font-size: 16px;\">{{ item.date }}</p>\n                        <p class=\"mb-0 fw-500\" style=\"font-size: 12px;\">{{ item.day }}</p>\n                      </a>\n                    </li>\n                  </ul>\n\n                  <a href=\"#\" class=\"text-decoration-none d-inline-block ms-2\" @click.prevent=\"calendarListMove(false)\">\n                    <img src=\"@/assets/stylesheets/icon/arrow_right.png\" width=\"7.62\" height=\"16\" alt=\"arrow_right\">\n                  </a>\n                </div>\n              </div>\n            </div>\n\n            <!-- <component :is=\"trackContent\"></component> -->\n            <div class=\"scroll-content-none\" style=\"height: 680px;\">\n              <div class=\"mb-3 toggle-active\">\n                <!-- 客戶資料 -->\n                <div class=\"bg-white border border-2 border-gray2 rounded-15 pt-3 mb-3\"\n                    v-for=\"(item, index) in detailedTrackInformationData\"\n                    :key=\"item.customer.customerId\">\n                  <div class=\"d-flex align-items-center pb-3 px-4\">\n                    <!-- 客人頭 -->\n                    <div class=\"position-relative\">\n                      <img class=\"rounded-circle\" width=\"48\" height=\"48\" src=\"https://randomuser.me/api/portraits/men/75.jpg\" alt=\"\">\n                      <span class=\"position-absolute p-1 border border-light rounded-circle\"\n                            :class=\"lightsJudge(item)\"\n                            style=\"top: 0px; right:0px;\"></span>\n                    </div>\n                    <!-- 美容師小名 -->\n                    <div class=\"ms-7\">\n                      <div class=\"rounded-circle position-relative nickName-icon\"\n                          :style=\"{ background: item.customer.customerTraitColor }\">\n                        <span class=\"text-white position-absolute top-50 start-50 translate-middle\">\n                          {{ item.customer.beauticianNickname }}\n                        </span>\n                      </div>\n                    </div>\n                    <!-- 客人名稱 -->\n                    <h6 class=\"mb-0 ms-2 fw-500 text-main-dark2\">{{ item.customer.customerName }}</h6>\n                    <!-- 生日 -->\n                    <p class=\"mb-0 fw-500 ms-3 me-auto text-main-dark2\">{{ item.customer.customerBirthday }}</p>\n\n                    <div class=\"d-flex ms-auto\">\n                      <button type=\"button\" class=\"btn btn-outline-second2 rounded-pill\"\n                              @click=\"goToMedicalRecordIndex(item)\">\n                        <span v-if=\"department !== 'Beauty'\" class=\"badge rounded-pill bg-main-dark2 me-1 d-inline-block\">\n                          {{ historicalMedicalRecordLength(item.followUpMedicalRecord) }}\n                        </span>\n\n                        <span>今日病歷</span>\n                      </button>\n\n                      <button type=\"button\" class=\"btn btn-outline-second2 rounded-pill ms-2\"\n                              @click=\"openHistoricalMedicalRecordsRefModal(item)\">\n                        歷史病歷\n                      </button>\n\n                      <button type=\"button\" class=\"btn btn-outline-second2 rounded-pill ms-2\"\n                              @click=\"openConsentRefModal(item)\">\n                        同意書\n                      </button>\n\n                      <button v-if=\"department !== 'Beauty'\" type=\"button\" class=\"btn btn-outline-second2 rounded-pill ms-2\"\n                              @click=\"openQuantityTableModal(item)\">\n                        儲值量\n                      </button>\n\n                      <button type=\"button\" class=\"btn btn-outline-second2 rounded-pill ms-2\"\n                            @click=\"openConsoleConfirmationModal(item)\">\n                        <img class=\"align-middle me-1\" v-if=\"allConsoleConfirmJudge(item.followUpMedicalRecord)\" src=\"@/assets/stylesheets/icon/Check-02.png\" width=\"15\" height=\"15\" alt=\"Check-02\">\n\n                        <span class=\"align-middle\">控台確認</span>\n                      </button>\n                    </div>\n\n                    <a href=\"#\" class=\"py-2 px-6 ms-2\"\n                      @click.prevent=\"accordionToggle(index, accordion.toggleCustomerData)\">\n                      <img class=\"toggle-customerData-icon toggle-icon-style\"\n                          src=\"@/assets/stylesheets/icon/arrow_down.png\"\n                          alt=\"arrow_down\" width=\"15\" height=\"7\">\n                    </a>\n                  </div>\n\n                  <!-- 資料 -->\n                  <div class=\"toggle-customerData toggle-style\">\n                    <div class=\"border-top border-2 border-gray2 text-center\">\n                      <div class=\"d-flex text-main-dark2\">\n                        <a href=\"#\" class=\"text-decoration-none py-2 border-1 border-end border-gray2 text-center\" style=\"width: 8.4%;\"\n                          @click.prevent=\"openEditDoctorModal(item)\">\n                          <span class=\"mb-0 fw-500 align-middle me-1\" v-if=\"department === 'AestheticMedicine'\">指定醫師</span>\n                          <span class=\"mb-0 fw-500 align-middle me-1\" v-if=\"department === 'Beauty'\">美容師</span>\n                          <img class=\"align-middle\" src=\"@/assets/stylesheets/icon/edit-02.png\" alt=\"icon\" width=\"12.62\" height=\"12.67\">\n                        </a>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 16%;\">治療內容</p>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 10.3%;\">券 號</p>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 14.7%;\">收費明細</p>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 12.4%;\">子療程</p>\n                        <a href=\"#\" class=\"text-decoration-none py-2 border-1 border-end border-gray2 text-center\" style=\"width: 9.5%;\"\n                            @click.prevent=\"openCustomerNeedsModal(item)\">\n                          <span class=\"mb-0 fw-500 align-middle me-1\">客戶需求</span>\n                          <img class=\"align-middle\" src=\"@/assets/stylesheets/icon/edit-02.png\" alt=\"icon\" width=\"12.62\" height=\"12.67\">\n                        </a>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 9.8%;\">療程資訊</p>\n                        <p class=\"mb-0 fw-500 py-2 border-1 border-end border-gray2\" style=\"width: 9.5%;\">其他備註</p>\n                        <p class=\"mb-0 fw-500 py-2\" style=\"width: 9.4%;\">其他功能</p>\n                      </div>\n                    </div>\n                    <!-- 第一筆 -->\n                    <template v-for=\"recordItem in item.followUpMedicalRecord\" :key=\"recordItem.operatorId\">\n                      <div class=\"d-flex\" v-for=\"(detailItem, detailIndex) in recordItem.detail\" :key=\"detailItem.cureContent.medicalRecordId\">\n                        <!-- 指定醫師 -->\n                        <div class=\"border-1 border-end border-gray2 pt-10 text-center\" style=\"width: 8.4%;\"\n                            :class=\"{'border-top' : detailIndex === 0}\">\n                          <p class=\"mb-5\" v-if=\"detailIndex === 0\">{{ recordItem.operatorName }}</p>\n                          <img v-if=\"detailItem.doctorSigned\" :src=\"doctorStampData[recordItem.operatorId]\" alt=\"\" width=\"60\" height=\"32\">\n                        </div>\n                        <!-- 治療內容 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 16%;\">\n                          <div class=\"mb-3 text-gray3\">\n                            <div class=\"d-flex\">\n                              <p class=\"mb-0 me-1\">預約 {{ convertTimeFormatDeleteSecond(detailItem.cureContent.appointmentTime) }}</p>\n                              <p class=\"mb-0\">結束 {{ deleteTTimeFormat(detailItem.cureContent.endTimeOfTreatment).time }}</p>\n                            </div>\n                            <div class=\"d-flex\">\n                              <p class=\"mb-0 me-1\">報到 {{ deleteTTimeFormat(detailItem.cureContent.arrivedTime).time }}</p>\n                              <p class=\"mb-0\">離診 {{ deleteTTimeFormat(detailItem.cureContent.leftTime).time }}</p>\n                            </div>\n                          </div>\n\n                          <div>\n                            <div class=\"d-flex\">\n                              <p class=\"mb-0 me-2\">時段:</p>\n                              <p class=\"mb-0\">{{ detailItem.cureContent.clinicPeriodName }}</p>\n                              <div class=\"d-flex ms-1\" v-if=\"detailItem.bodyPart.some(item => item.extra === true)\">\n                                <p class=\"mb-0 me-1\">/</p>\n                                <p class=\"mb-0 text-mark\">加診</p>\n                              </div>\n                            </div>\n\n                            <div class=\"d-flex\">\n                              <p class=\"mb-0 me-2\">療程:</p>\n                              <p class=\"mb-0\">{{ detailItem.cureContent.courseTypeName }} {{ detailItem.cureContent.courseName }}</p>\n                            </div>\n\n                            <div class=\"d-flex\">\n                              <p class=\"me-2 mb-0\" style=\"word-break: keep-all;\">部位:</p>\n                              <div class=\"d-flex flex-wrap\">\n                                <p class=\"mb-0\" :class=\"{ 'text-mark' : bodyPartItem.extra}\"\n                                  v-for=\"(bodyPartItem, index) in detailItem.bodyPart\"\n                                  :key=\"bodyPartItem\">\n                                  {{ bodyPartItem.name }}\n                                  <span v-if=\"index !== detailItem.bodyPart.length - 1\">、</span>\n                                </p>\n                              </div>\n                            </div>\n\n                            <div class=\"d-flex\">\n                              <p class=\"mb-0 me-2\" style=\"word-break: keep-all;\">備註:</p>\n                              <p class=\"mb-0\">{{ detailItem.cureContent.comment }}</p>\n                            </div>\n                          </div>\n\n                        </div>\n                        <!-- 券號 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 10.3%;\">\n                          <div class=\"mb-2\"\n                              v-for=\"voucherOrderItem in detailItem.voucherOrderDetails\"\n                              :key=\"voucherOrderItem.bodyPartId\">\n                            <p class=\"mb-0 fw-500\">{{ voucherOrderItem.bodyPartName }} :</p>\n                            \n                            <template v-for=\"id in voucherOrderItem.voucherId\"\n                                :key=\"id\">\n                              <p class=\"mb-0\" v-if=\"id !== 'oweVoucher'\">{{ id }}</p>\n                              <p v-else></p>\n                            </template>\n                          </div>\n                        </div>\n                        <!-- 收費明細 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 14.7%;\">\n                          <template v-for=\"(orderDetailItem, index) in detailItem.orderDetails\" :key=\"index\">\n\n                            <div class=\"d-flex justify-content-between\" v-if=\"orderDetailItem.chargeType === 'anesthesia'\">\n                              <p class=\"mb-0\">\n                              {{ index + 1 }}. {{ orderDetailItem.chargeName }}\n                              </p>\n                              <p class=\"mb-0 text-right\">\n                                {{ orderDetailItem.price }}\n                              </p>\n                            </div>\n\n                            <div v-if=\"orderDetailItem.chargeType === 'cash'\">\n                            <p class=\"mb-0\">{{ index + 1 }}. {{ orderDetailItem.chargeName }}</p>\n\n                              <template v-for=\"(bodyPartItem, index) in orderDetailItem.bodyParts\" :key=\"bodyPartItem\">\n                                <div class=\"ms-4 d-flex justify-content-between\" v-if=\"department !== 'Beauty' && bodyPartItem\">\n                                  <p class=\"mb-0 text-gray3\">\n                                    {{ bodyPartItem.name }}\n                                  </p>\n                                  <p class=\"mb-0 text-right\">\n                                    {{ orderDetailItem.price[index] }}\n                                  </p>\n                                </div>\n                              </template>\n                          </div>\n                          </template>\n                        </div>\n\n                        <!-- 子療程 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 12.4%;\">\n                          <div class=\"d-flex mb-2\" v-for=\"item in detailItem.medicalRecordSubcourseData\" :key=\"item\">\n                            <label>{{ item.subcourseName }}:</label>\n\n                            <select class=\"border-0 border-bottom border-gray2 w-100\"\n                                    v-model=\"item.beautician\"\n                                    @change=\"changeSubcourseOperator(item)\">\n                              <option selected :value=\"null\"></option>\n                              <option v-for=\"beautician in detailItem.beauticians\"\n                                      :key=\"beautician.operatorId\"\n                                      :value=\"beautician.operatorId\">{{ beautician.operatorName }}</option>\n                            </select>\n                          </div>\n                        </div>\n\n                        <!-- 客戶需求 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 9.5%;\">\n                          <div class=\"d-flex align-items-center\" v-for=\"item in detailItem.medicalRecordCustomerDemands\" :key=\"item\">\n                            <img src=\"@\\assets\\stylesheets\\icon\\dot-02.png\" class=\"me-2\" width=\"5\" height=\"5\" alt=\"dot-02\">\n                            <p class=\"mb-0\">{{ item }}</p>\n                          </div>\n                        </div>\n\n                        <!-- 療程資訊 -->\n                        <div class=\"py-3 ps-3 pe-6 border-1 border-end border-top border-gray2 text-main-dark2\" style=\"width: 9.8%;\"\n                            v-if=\"detailItem.cureContent.courseTypeId !== 'MicroPlasticSurgery'\">\n                          <p class=\"mb-0\" v-if=\"detailItem.suggestionOfToday\">今日建議 :</p>\n                          <p class=\"mb-0\" style=\"word-break: break-all;\">{{ detailItem.suggestionOfToday }}</p>\n                        </div>\n\n                        <!-- 療程資訊 - 微整 -->\n                        <div class=\"py-3 ps-3 pe-6 border-1 border-end border-top border-gray2 text-main-dark2 text-end\"\n                            style=\"width: 9.8%;\" v-else>\n                          <p class=\"mb-0\" style=\"font-size: 12px\">上次剩餘</p>\n                          <h6 class=\"mb-0\" v-if=\"detailItem.customerStoredValueData\">{{ detailItem.customerStoredValueData.quantityOfLastTime }}</h6>\n                          <p class=\"mb-0\" style=\"font-size: 12px\">今日加值</p>\n                          <h6 class=\"mb-0\" v-if=\"detailItem.customerStoredValueData\">{{ detailItem.customerStoredValueData.addValueOfToday }}</h6>\n                          <p class=\"mb-0\" style=\"font-size: 12px\">療程使用</p>\n                          <h6 class=\"mb-0\" v-if=\"detailItem.customerStoredValueData\">{{ detailItem.customerStoredValueData.usageAmount }}</h6>\n                          <p class=\"mb-0\" style=\"font-size: 12px\">本次剩餘</p>\n                          <h6 class=\"mb-0\" v-if=\"detailItem.customerStoredValueData\">{{ detailItem.customerStoredValueData.remainingQuantities }}</h6>\n                        </div>\n\n                        <!-- 其他備註 -->\n                        <div class=\"p-3 border-1 border-end border-top border-gray2 text-main-dark2 text-center\" style=\"width: 9.5%;\">\n                          <a href=\"#\" class=\"d-inline-block text-decoration-none\"\n                            @click.prevent=\"openAIQModal()\">\n                            需 AIQ\n                          </a>\n                          <p class=\"mb-0 fw-500\" v-if=\"detailItem.needToSignPhotoConsent\">需拍照</p>\n                          <p class=\"mb-0 fw-500\" v-if=\"detailItem.needToSignConsent\">需簽同意書</p>\n                        </div>\n\n                        <!-- 其他功能 -->\n                        <div class=\"p-3 text-center border-1 border-top border-gray2 text-main-dark1 fw-500\"\n                            style=\"width: 9.4%;\">\n                          <a href=\"#\" class=\"mb-3 d-block text-decoration-none\"\n                            @click.prevent=\"openPhotoRecordModal()\">拍照記錄</a>\n\n                          <a href=\"#\" class=\"mb-3 d-block text-decoration-none\"\n                            @click.prevent=\"openExtraModal(item)\">加診</a>\n\n                          \n                          <a href=\"#\" class=\"mb-3 d-block text-decoration-none\"\n                            @click.prevent=\"toAppointment(item)\">約診</a>\n\n                          <a href=\"#\" class=\"mb-3 d-block text-decoration-none\"\n                            @click.prevent=\"openEndOfTreatmentModal(detailItem)\">\n                            離診\n                          </a>\n\n                          <a href=\"#\" class=\"mb-3 d-block text-decoration-none\"\n                            @click.prevent=\"openHistoricalConsentRefModal(item)\">\n                            歷史同意書\n                          </a>\n                        </div>\n                      </div>\n                    </template>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 變更醫師 -->\n    <div class=\"modal fade\" ref=\"editDoctorModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <!-- <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">變 更 醫 師</h5> -->\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">變 更 {{ department === 'AestheticMedicine' ? '醫 師' : '美 容 師' }}</h5>\n          <div class=\"bg-white py-5 px-10\">\n            <div class=\"d-flex\">\n              <p class=\"mb-0 me-2\" style=\"word-break: keep-all; padding-top: 6px;\">選擇療程:</p>\n              \n              <div>\n                <button type=\"button\" class=\"btn btn-category rounded-pill me-2 mb-2\"\n                        :class=\"{'active' : index === selectedEditDoctorDataIndex}\"\n                        v-for=\"(item, index) in changeOperatorData\" :key=\"item\"\n                        @click=\"selectEditDoctorData(index)\">\n                  <span class=\"align-middle\">{{ item.courseTypeName }} : {{ item.courseName }}</span>\n                </button>\n              </div>\n\n            </div>\n            <div>\n              <label class=\"me-2 align-middle d-inline-block\">{{ department === 'AestheticMedicine' ? '治療醫師' : '美容師' }}:</label>\n                <select class=\"form-select rounded-pill align-middle d-inline-block w-50\"\n                        aria-label=\"治療醫師\"\n                        v-model=\"editDoctor\">\n                  <option :value=\"null\" v-if=\"department === 'Beauty'\">不指定</option>\n                  <option v-for=\"item in docterOptions\" :key=\"item\" :value=\"item.id\">{{ item.name }}</option>\n                </select>\n            </div>\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill\" data-bs-dismiss=\"modal\">關 閉</button>\n            <button type=\"button\" class=\"btn btn-alert-main rounded-pill ms-2 me-5\"\n                    @click=\"editDoctorConfirmChanges()\">確定變更</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 儲值量 -->\n    <div class=\"modal fade\" ref=\"quantityTableModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">儲 值 量</h5>\n          <div class=\"bg-white py-5 px-10\">\n            \n            <div class=\"d-flex justify-content-center py-5\" v-if=\"customerStoredValue.length === 0\">\n              <img class=\"me-2\" src=\"@/assets/stylesheets/icon/attention-gray.png\" alt=\"attention-gray\" width=\"16\" height=\"16\">\n              <h6 class=\"mb-0 text-gray3\">尚無購買紀錄</h6>\n            </div>\n\n            <div v-else>\n              <div class=\"d-flex text-center\">\n                <h6 class=\"mb-0 pb-3 w-50\">項 目</h6>\n                <h6 class=\"mb-0 pb-3 w-50\">剩餘量</h6>\n              </div>\n\n              <div class=\"border border-gray2 bg-gray1 rounded-10 text-main-dark2 mb-3\">\n                <div class=\"d-flex\" v-for=\"(item, index) in customerStoredValue\" :key=\"item\">\n                  <p class=\"mb-0 py-3 px-10 border-end border-gray2 w-50\"\n                    :class=\"{ 'border-bottom' : customerStoredValue.length !== index + 1 }\">\n                    {{ item.courseProductName }}\n                  </p>\n                  <div class=\"row align-items-center gx-0 w-50 border-gray2\"\n                      :class=\"{ 'border-bottom' : customerStoredValue.length !== index + 1 }\">\n                      <div class=\"col-6\">\n                        <p class=\"mb-0 text-end\">{{ item.quantity }}</p>\n                      </div>\n                      <div class=\"col-6\">\n                        <p class=\"mb-0 pe-10 text-end\">{{ item.unit }}</p>\n                      </div>\n                    </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-5\" data-bs-dismiss=\"modal\">關 閉</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 加診 modal -->\n    <div class=\"modal fade\" ref=\"extraModalRef\">\n      <div class=\"modal-dialog modal-760\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">加 診</h5>\n\n          <div class=\"bg-white py-7 px-10\">\n            <div class=\"row align-items-center mb-3\">\n              <div class=\"col-5\">\n                <div class=\"d-flex py-2 text-main-dark2\">\n                  \n                  <span class=\"amis-btn-lg amis-btn-lg-name p-0\">\n                    <span class=\"mb-0 fw-500 me-3 align-middle text-main-dark2\">客戶姓名</span>\n                    <div class=\"amis-btn-lg-name-bg bg-main-dark2 me-1\">\n                      <span class=\"amis-btn-lg-name-item text-white\">\n                        {{ extraModalData.beauticianNickname }}\n                      </span>\n                    </div>\n                    <span class=\"align-middle\">\n                      {{ extraModalData.name }} {{ extraModalData.birthday }}\n                    </span>\n                  </span>\n                </div>\n              </div>\n\n                <div class=\"col-7\">\n                  <div class=\"row gx-3 align-items-center\">\n                    <div class=\"col-auto\">\n                      <label class=\"col-form-label text-main-dark2\">療程項目</label>\n                    </div>\n                    <div class=\"col-4\">\n                      <select class=\"rounded-pill me-2 form-select text-main-dark2\"\n                            v-model=\"extraModalData.courseType\"\n                            @change=\"changeCourseType(extraModalData.courseType)\">\n                      <option selected v-if=\"extraModalData.courseType === null\" :value=\"null\"></option>\n                      <option v-for=\"item in commonDataList.courseTypes\"\n                              :key=\"item.id\"\n                              :value=\"item.id\">\n                              {{ item.name }}\n                      </option>\n                    </select>\n                    </div>\n\n                    <div class=\"col-4\">\n                      <select class=\"rounded-pill form-select text-main-dark2\" v-if=\"extraModalData.courseType !== null\"\n                            v-model=\"extraModalData.courseId\"\n                            @change=\"changeCourseId(extraModalData.courseId)\">\n                      <option selected v-if=\"extraModalData.courseId === null\" :value=\"null\"></option>\n                      <option v-for=\"item in courseOptionsByType\"\n                              :key=\"item.courseId\"\n                              :value=\"item.courseId\">\n                              {{ item.courseName }}\n                      </option>\n                    </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"row align-items-center mb-3\">\n                <!-- 指定醫師 -->\n                <div class=\"col-5\">\n                  <div class=\"d-flex\">\n                    <label class=\"input-group-text text-main-dark2 mb-0 me-3 border-0 p-0 bg-transparent\">指定醫師</label>\n                    <select class=\"rounded-pill form-select text-main-dark2\" style=\"width: 45%;\"\n                            v-model=\"extraModalData.operatorId\"\n                            @change=\"getAnestheticInfo()\">\n                      <option selected v-if=\"extraModalData.operatorId === null\" :value=\"null\"></option>\n                      <option v-for=\"item in commonDataList.operators\"\n                              :key=\"item.operatorId\"\n                              :value=\"item.operatorId\">\n                              {{ item.operatorName }}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n\n                <!-- 麻醉 -->\n                <div class=\"col-7\" v-if=\"anestheticInfo === null\">\n                  <div class=\"row gx-3 align-items-center\">\n                    <div class=\"col-auto\">\n                      <label class=\"col-form-label text-main-dark2\">\n                        <span class=\"me-8\">麻</span><span>醉</span>\n                      </label>\n                    </div>\n                    <div class=\"col-4\">\n                      <select class=\"rounded-pill form-select text-main-dark2\" v-model=\"extraModalData.anesthesiaType\">\n                        <option selected v-if=\"extraModalData.anesthesiaType === null\" :value=\"null\"></option>\n                        <option v-for=\"item in commonDataList.anesthesiaTypes\"\n                                :key=\"item.id\"\n                                :value=\"item.id\">\n                                {{ item.name }}\n                        </option>\n                    </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"input-group mb-3\" v-if=\"extraModalData.courseType !== 'IV'\">\n                <p class=\"input-group-text text-main-dark2 mb-0 me-3 border-0 p-0 bg-transparent\">治療部位</p>\n                <div class=\"p-0 rounded-15 position-relative form-select\"\n                    @click.stop=\"openAppointmentBodyPartsWindow()\">\n                  <button type=\"button\" class=\"d-flex flex-wrap border-0 pt-2 rounded-15 bg-transparent\"\n                          style=\"width: 90%; min-height: 51px;\">\n                    <button type=\"button\" v-for=\"item in bodyParts\" :key=\"item.id\"\n                            class=\"amis-badge amis-badge-second3 me-1\"\n                            @click.stop=\"deleteAppointmentBodyPartsItem(item)\">\n                            <span class=\"align-middle me-2\">{{ item.name }}</span>\n                            <img class=\"align-middle\" src=\"@/assets/stylesheets/icon/X-01.png\" alt=\"icon\" width=\"10\" height=\"10\">\n                    </button>\n                  </button>\n                  <!-- 治療部位下拉 -->\n                  <div class=\"position-absolute bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3\"\n                        style=\"z-index: 10; top: 110%;;\"\n                        v-show=\"bodyPartsWindow\"\n                        data-to=\"true\"\n                        @click.stop=\"null\">\n                    <div class=\"scroll-content-none\" style=\"max-height: 170px\">\n                      <div class=\"form-check mb-2\" v-for=\"item in bodyPartsOptions\" :key=\"item.id\"\n                          @change=\"selectedBodyParts(item, $event)\">\n                        <input class=\"form-check-input\" type=\"checkbox\"\n                        :value=\"item\"\n                        :id=\"`bodyPart${item.id}`\"\n                        v-model=\"bodyParts\">\n                        <label class=\"form-check-label text-main-dark2 d-block\" :for=\"`bodyPart${item.id}`\">\n                          {{ item.name }}\n                        </label>\n                      </div>\n\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"col-12\" v-if=\"otherBodyPartJudge\">\n                  <div class=\"input-group mb-3\">\n                    <label class=\"input-group-text align-items-start text-main-dark2 mb-0 border-0 p-0 bg-transparent\" style=\"width: 80px\"></label>\n                    <div class=\"position-relative\" style=\"\n                                flex: 1 1 auto;\n                                width: 1%;\n                                min-width: 0;\">\n                      <a href=\"#\" class=\"position-absolute\" style=\"top: 4px;\"\n                        v-if=\"otherPartHistoryData.length !== 0\"\n                        @click.prevent.stop=\"openHistoryCourseWindow()\">\n                        <img src=\"@/assets/stylesheets/icon/TIME-02.png\" alt=\"\" width=\"20\" height=\"20\">\n                      </a>\n                      <!-- 其他部位 -->\n                      <div class=\"position-absolute\" v-show=\"historyCourseWindow\"\n                            style=\"min-width: 223px; z-index: 10; left: 28px;\">\n                        <div class=\"bg-gray1 border border-gray3 rounded-15\">\n                          <table class=\"otherBodyPartTable text-main-dark1\">\n                            <thead>\n                              <tr>\n                                <th>其他部分</th>\n                                <th>大小</th>\n                                <th>金額</th>\n                              </tr>\n                            </thead>\n                            <tbody>\n                              <tr v-for=\"item in otherPartHistoryData\" :key=\"item\"\n                                  @click=\"selectUpdateBasicDataAndFeeData(item)\">\n                                <td>{{ item.part }}</td>\n                                <td>{{ item.scope }} cm</td>\n                                <td>{{ item.price }}</td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                      </div>\n                      \n                        <div class=\"d-inline-block ms-10\">\n                          <div class=\"row align-items-center mb-3 gx-0\" v-for=\"(item, index) in otherBodyPartLength\" :key=\"`key${item}`\">\n                            <div class=\"col-1\">\n                              <span class=\"input-group-text text-main-dark2 mb-0 border-0 p-0 bg-transparent\">其他</span>\n                            </div>\n\n                            <div class=\"col-11\">\n                              <div class=\"row\">\n                                <div class=\"col-5\">\n                                  <input type=\"text\" class=\"form-control rounded-pill text-main-dark2\"\n                                      placeholder=\"部位\"\n                                      v-model=\"otherBodyParts[index].part\"\n                                      @blur=\"otherBodyPartInputBlur(index)\">\n                                </div>\n                                <div class=\"col-5\">\n                                  <input type=\"text\" class=\"form-control rounded-pill text-main-dark2 me-4\"\n                                      placeholder=\"大小\"\n                                      v-model=\"otherBodyParts[index].scope\"\n                                      @blur=\"otherBodyScopeInputBlur(index)\">\n                                </div>\n                                <div class=\"col-2\">\n                                  <div class=\"d-flex align-items-center h-100\">\n                                    <a href=\"#\" v-if=\"otherBodyPartLength !== 1\" :class=\"{'me-2' : otherBodyPartLength !== 1}\"\n                                        @click.prevent=\"deleteOtherBodyPartLength(index)\">\n                                        <img src=\"@/assets/stylesheets/icon/--05.png\" alt=\"\" width=\"20\" height=\"20\">\n                                      </a>\n                                      <div style=\"width: 28px; height: 20px;\"  v-if=\"otherBodyPartLength === 1\"></div>\n                                      <a href=\"#\" v-if=\"item === otherBodyPartLength\"\n                                        @click.prevent=\"addOtherBodyPartLength()\">\n                                        <img src=\"@/assets/stylesheets/icon/+-04.png\" alt=\"\" width=\"20\" height=\"20\">\n                                      </a>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n              <div class=\"input-group\">\n                <label class=\"input-group-text align-items-start text-main-dark2 mb-0 me-3 border-0 p-0 bg-transparent\"\n                        for=\"inputGroupSelect01\"><span class=\"me-8\">備</span><span>註</span></label>\n                <textarea class=\"form-control rounded-15\" rows=\"3\" v-model=\"extraModalData.comment\"></textarea>\n              </div>\n            </div>\n\n            <div style=\"min-height: 458px; max-height: 458px;\"\n                class=\"scroll-content-none bg-white py-5 px-10\"\n                :class=\"{ 'border-top border-2 border-gray2' : allBodyParts.length !== 0 && extraModalData.courseType !== 'MicroPlasticSurgery'}\">\n\n              <div v-if=\"allBodyParts.length !== 0\">\n                <!-- 同療程、同醫師時，美容耗材、麻藥費用不用顯示 -->\n                <div v-if=\"anestheticInfo === null && extraModalData.anesthesiaType !== 'None' && extraModalData.courseType !== 'MicroPlasticSurgery'\">\n\n                  <div class=\"row g-3 align-items-center mb-3\">\n                    <div class=\"col-auto\">\n                      <label for=\"inputPassword6\" class=\"col-form-label\">麻藥費用</label>\n                    </div>\n                    <div class=\"col-3\">\n                      <select class=\"rounded-pill form-select text-main-dark2\"\n                              @change=\"calculateFee(extraModalData.anestheticFee)\"\n                              v-model=\"extraModalData.anestheticFee\">\n                        <option v-if=\"extraModalData.anestheticFee === null\" :value=\"null\"></option>\n                        <option v-for=\"item in commonDataList.anestheticFees\"\n                                :key=\"item.id\"\n                                :value=\"item.id\">\n                                {{ item.name }}\n                        </option>\n                      </select>\n                    </div>\n\n                    <div class=\"col-3\" v-if=\"extraModalData.anestheticFee !== 'Free'\">\n                      <select class=\"rounded-pill form-select text-white\" disabled v-model=\"extraModalData.received\">\n                        <option v-if=\"extraModalData.received === null\" selected disabled :value=\"null\"></option>\n                        <option :value=\"true\">費用已收</option>\n                        <option :value=\"false\">費用未收</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- 同療程、同醫師時顯示 -->\n                <div v-if=\"anestheticInfo !== null\" class=\"d-flex text-main-dark2 mb-3\">\n                  <h6 class=\"fw-500 mb-0 me-3\">是否上麻</h6>\n                  <h6 class=\"mb-0\">{{ anestheticInfo.anesthesiaSituationName }} / {{ anestheticInfo.anestheticFee }} 元 / {{ anestheticInfo.received ? '費用已收' : '費用未收'}}</h6>\n                </div>\n\n                <div v-if=\"extraModalData.courseType !== 'MicroPlasticSurgery'\">\n                  <h6 class=\"text-main-dark2 fw-500 mb-3\">支付方式</h6>\n\n                  <template v-for=\"(item, index) in allBodyParts\" :key=\"item\">\n                    <div class=\"ps-7\">\n                      <p class=\"fw-500 mb-2\" v-if=\"item.id !== 'Other'\">{{ item.name }} :</p>\n                      <p class=\"fw-500 mb-2\" v-else>{{ item.name }} / {{ item.part }} :</p>\n                      <div class=\"p-0 rounded-15 mb-2 form-select\"\n                          @click.stop=\"openPaymentMethodOption(index)\">\n                        <!-- form-control -->\n                        <button type=\"button\" class=\"d-flex flex-wrap border-0 pt-2 pb-0 rounded-15 bg-transparent\"\n                                style=\"width: 90%; min-height: 51px;\">\n                          <button type=\"button\" v-for=\"item in paymentMethodData[index].paymentMethod\" :key=\"`${item.id}${index}`\"\n                                  @click.stop=\"deleteSelectedPaymentMethod(item, index)\"\n                                  class=\"amis-badge amis-badge-second3 me-1 mb-2\">\n                                  <span class=\"align-middle me-2\">{{ item.name }}</span>\n                                  <img class=\"align-middle\" src=\"@/assets/stylesheets/icon/X-01.png\" alt=\"icon\" width=\"10\" height=\"10\">\n                          </button>\n                        </button>\n                      </div>\n\n                      <!-- 支付方式下拉 -->\n                      <template v-if=\"allBodyParts[index].id !== 'Other'\">\n                        <div class=\"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2\"\n                          v-show=\"paymentMethodSwitch[index].switch\"\n                          data-to=\"true\"\n                          @click.stop=\"null\">\n                          <div class=\"scroll-content-none\" style=\"max-height: 170px\">\n                            <div class=\"form-check mb-2\" v-for=\"item in paymentMethods\" :key=\"`${item.id}${index}`\">\n                              <input class=\"form-check-input\" type=\"checkbox\"\n                                :value=\"item\"\n                                :id=\"`paymentMethod${item.id}${index}`\"\n                                v-model=\"paymentMethodData[index].paymentMethod\"\n                                @change=\"selectedPaymentMethod(item, index, $event)\">\n                              <label class=\"form-check-label text-main-dark2 d-block\"\n                                    :for=\"`paymentMethod${item.id}${index}`\">\n                                {{ item.name }}\n                              </label>\n                            </div>\n\n                          </div>\n                        </div>\n                      </template>\n                      \n                      <!-- 支付方式下拉 - 其他部位 -->\n                      <template v-if=\"allBodyParts[index].id === 'Other'\">\n                        <div class=\"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2\"\n                          v-show=\"paymentMethodSwitch[index].switch\"\n                          data-to=\"true\"\n                          @click.stop=\"null\">\n                          <div class=\"scroll-content-none\" style=\"max-height: 170px\">\n                            <div class=\"form-check mb-2\" v-for=\"item in paymentMethodsForOtherBodyparts\" :key=\"`${item.id}${index}`\">\n                              <input class=\"form-check-input\" type=\"checkbox\"\n                                :value=\"item\"\n                                :id=\"`paymentMethod${item.id}${index}`\"\n                                v-model=\"paymentMethodData[index].paymentMethod\"\n                                @change=\"selectedPaymentMethod(item, index, $event)\">\n                              <label class=\"form-check-label text-main-dark2 d-block\"\n                                    :for=\"`paymentMethod${item.id}${index}`\">\n                                {{ item.name }}\n                              </label>\n                            </div>\n\n                          </div>\n                        </div>\n                      </template>\n                      \n                      <div class=\"ps-2 d-flex w-100\" v-for=\"item in paymentMethodData[index].paymentMethod\" :key=\"`${item.id}${index}`\">\n                        <div class=\"row w-100 gx-0\">\n                          <div class=\"col-2\">\n                            <div style=\"padding-top: 7px;\">\n                              <img src=\"@\\assets\\stylesheets\\icon\\dot-02.png\" class=\"me-2\" width=\"5\" height=\"5\" alt=\"dot-02\">\n                              <p class=\"fw-500 mb-0 d-inline pt-3\" style=\"white-space:nowrap;\">{{ item.name }}</p>\n                            </div>\n                          </div>\n\n                          <div class=\"col-10\">\n                            <!-- 療程專用券 -->\n                            <div v-if=\"item.id === 'Voucher'\">\n                              <div class=\"d-flex flex-wrap\">\n                                <template v-for=\"item in voucherOrderDetailData[index]\" :key=\"item.voucherId\">\n                                  <div class=\"mb-2 me-2\">\n                                    <button type=\"button\" class=\"btn border border-1 border-gray2 text-main-dark2 rounded-pill d-flex align-items-center\"\n                                            @click=\"deleteVoucherData(item, index)\">\n                                      <span class=\"me-7\">{{ item.voucherId }}</span>\n                                      <img src=\"@\\assets\\stylesheets\\icon\\--05.png\" width=\"15\" height=\"15\" alt=\"--05\">\n                                    </button>\n                                  </div>\n                                </template>\n\n                                <input type=\"text\" class=\"form-control rounded-pill d-inline-block align-middle me-2 mb-2 d-none\"\n                                        style=\"width: 30%;\"\n                                        placeholder=\"卷號\"\n                                        v-model=\"voucherInput[index]\"\n                                        @keydown.enter=\"voucherDataEnter(index)\">\n\n                                <div class=\"mb-2\">\n                                  <label class=\"align-middle rounded-end rounded-pill bg-gray1 border-end-0 text-main-dark2\"\n                                        style=\"padding: 6px 8px 6px 11px; border: 1px solid #ced4da;\">欠卷</label>\n                                  <input type=\"number\" class=\"align-middle form-control rounded-start rounded-pill d-inline-block align-middle w-50\"\n                                        placeholder=\"數量\"\n                                        v-model=\"oweVoucherInput[index].oweAmount\"\n                                        :min=\"voucherOrderDetailData[index].length !== 0 ? 0 : 1\">\n                                </div>\n                              </div>\n                            </div>\n\n                            <!-- 活動優惠券 -->\n                            <div v-if=\"item.id === 'Activity'\">\n                              <div class=\"row align-items-center mb-2\" v-for=\"(item, i) in activityData[index]\" :key=\"i\">\n                                <div class=\"col-6\">\n                                  <div class=\"input-group\">\n                                    <select class=\"rounded-pill form-select text-main-dark2\" v-model=\"item.prizeId\">\n                                      <option v-for=\"item in commonDataList.prizeData\"\n                                              :value=\"item.prizeId\"\n                                              :key=\"item.prizeId\">{{ `${item.activityName}_${item.prizeLevel}_${item.prizeName}` }}\n                                      </option>\n                                    </select>\n                                  </div>\n                                </div>\n                                <div class=\"col-4\">\n                                  <div class=\"d-flex align-items-center\">\n                                    <input type=\"text\" class=\"form-control rounded-pill\" placeholder=\"卷號\"\n                                          v-model=\"item.couponNumber\">\n                                  </div>\n                                </div>\n                                <div class=\"col-2\">\n                                  <a href=\"#\" class=\"me-2\"\n                                    @click.prevent=\"deleteActivityItem(index, i)\"\n                                    v-if=\"activityData[index].length !== 1\">\n                                    <img src=\"@/assets/stylesheets/icon/--05.png\" alt=\"\" width=\"20\" height=\"20\">\n                                  </a>\n\n                                  <a href=\"#\" @click.prevent=\"addActivityItem(index)\"\n                                      v-if=\"activityData[index].length === 1 || activityData[index].length === (i + 1)\">\n                                    <img src=\"@/assets/stylesheets/icon/+-04.png\" alt=\"\" width=\"20\" height=\"20\">\n                                  </a>\n                                </div>\n                              </div>\n                            </div>\n\n                            <!-- 現金支付 -->\n                            <template v-if=\"item.id === 'Cash' && allBodyParts[index].id !== 'Other'\">\n                              <template v-for=\"(item, i) in cashData[index]\" :key=\"i\">\n                                <div class=\"row align-items-center mb-2\">\n                                  <div class=\"col-4\">\n                                    <div class=\"input-group\">\n                                      <select class=\"rounded-pill form-select text-main-dark2\"\n                                              v-model=\"item.priceType\"\n                                              @change=\"changePriceType(item, index)\">\n                                        <option v-for=\"item in commonDataList.priceTypes\"\n                                                :value=\"item.id\"\n                                                :key=\"item.id\">{{ item.name }}\n                                        </option>\n                                      </select>\n                                    </div>\n                                  </div>\n                                  <div class=\"col-4\" v-if=\"item.priceType !== 'Deposit'\">\n                                    <div class=\"d-flex align-items-center\">\n                                      <input type=\"number\" class=\"form-control rounded-pill\"\n                                            v-model=\"item.price\" @blur=\"cashInputBlur(item, index)\"\n                                            min=\"0\">\n                                    </div>\n                                  </div>\n                                  <div class=\"col-4\">\n                                    <div class=\"input-group\">\n                                      <select class=\"rounded-pill form-select text-white\" disabled v-model=\"item.received\">\n                                        <option :value=\"false\">費用未收</option>\n                                        <option :value=\"true\">費用已收</option>\n                                      </select>\n                                    </div>\n                                  </div>\n                                </div>\n                                <!-- 押金費用時，開啟 -->\n                                <template v-if=\"item.priceType === 'Deposit'\">\n                                  <div class=\"row align-items-center mb-2\" v-for=\"(depositDataItem, i) in item.depositData\" :key=\"i\">\n                                    <div class=\"col-4\">\n                                      <div class=\"input-group\">\n                                        <select class=\"rounded-pill form-select text-main-dark2\" v-model=\"depositDataItem.voucherType\">\n                                          <template v-for=\"voucherTypeItem in commonDataList.voucherTypes\"\n                                                  :key=\"voucherTypeItem.id\">\n                                            <option :value=\"voucherTypeItem.id\"\n                                                    v-if=\"voucherTypesJudge(item.depositData, voucherTypeItem.id, depositDataItem.voucherType)\">\n                                                    {{ voucherTypeItem.name }}\n                                            </option>\n                                          </template>\n                                        </select>\n                                      </div>\n                                    </div>\n                                    <div class=\"col-4\">\n                                      <div class=\"d-flex align-items-center\">\n                                        <input type=\"number\" class=\"form-control rounded-pill\"\n                                              @blur=\"cashInputBlur(item, index)\"\n                                              v-model=\"depositDataItem.amountOfMoney\"\n                                              min=\"0\">\n                                      </div>\n                                    </div>\n                                    \n                                    <div class=\"col-2\">\n                                      <a href=\"#\" class=\"me-2\"\n                                        @click.prevent=\"deleteDepositInput(index, i)\"\n                                        v-if=\"item.depositData.length !== 1\">\n                                        <img src=\"@/assets/stylesheets/icon/--05.png\" alt=\"\" width=\"20\" height=\"20\">\n                                      </a>\n\n                                      <a href=\"#\" @click.prevent=\"addDepositInput(index, item.depositData)\"\n                                        v-if=\"item.depositData.length === 1 || item.depositData.length === (i + 1) && commonDataList.voucherTypes.length > item.depositData.length\">\n                                        <img src=\"@/assets/stylesheets/icon/+-04.png\" alt=\"\" width=\"20\" height=\"20\">\n                                      </a>\n                                    </div>\n                                  </div>\n                                </template>         \n                              </template>\n                            </template>\n\n                            <!-- 現金支付 - 其他部位 -->\n                            <template v-if=\"item.id === 'Cash' && allBodyParts[index].id === 'Other'\">\n                              <div class=\"row align-items-center mb-2\" v-for=\"(item, i) in cashData[index]\" :key=\"i\">\n                                \n                                <div class=\"col-4\">\n                                  <div class=\"input-group\">\n                                    <select class=\"rounded-pill form-select text-main-dark2\" v-model=\"item.priceType\">\n                                      <option v-for=\"item in commonDataListForOhterBodypart.priceTypes\"\n                                              :value=\"item.id\"\n                                              :key=\"item.id\">{{ item.name }}\n                                      </option>\n                                    </select>\n                                  </div>\n                                </div>\n                                <div class=\"col-4\">\n                                  <div class=\"d-flex align-items-center\">\n                                    <input type=\"number\" class=\"form-control rounded-pill\"\n                                          v-model=\"item.price\" @blur=\"cashInputBlur(item, index)\"\n                                          min=\"0\">\n                                  </div>\n                                </div>\n                                <div class=\"col-4\">\n                                  <div class=\"input-group\">\n                                    <select class=\"rounded-pill form-select text-white\" disabled v-model=\"item.received\">\n                                      <option :value=\"false\">費用未收</option>\n                                      <option :value=\"true\">費用已收</option>\n                                    </select>\n                                  </div>\n                                </div>\n                              </div>\n                            </template>\n\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                </div>\n              </div>\n            </div>\n\n          <div class=\"d-flex bg-white border-2 rounded-bottom-20 border-top border-gray2 py-5 px-10\">\n            <div class=\"d-flex me-auto\">\n              <label class=\"input-group-text text-main-dark2 mb-0 me-7 border-0 p-0 bg-transparent\">總金額</label>\n              \n              <input type=\"number\" class=\"form-control rounded-pill\" min=\"0\" v-model=\"total\">\n            </div>\n\n            <div>\n              <button type=\"button\" class=\"btn btn-alert-second rounded-pill\" data-bs-dismiss=\"modal\">關 閉</button>\n              <button type=\"button\" class=\"btn btn-alert-main rounded-pill ms-2\" @click=\"confirmExtra()\">確 定</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <!-- 離診 -->\n    <div class=\"modal fade\" ref=\"endOfTreatmentModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">離 診</h5>\n          <div class=\"bg-white py-7 px-10\">\n            <div class=\"d-flex\">\n              <h6 class=\"fw-500 text-main-dark2 mb-0 me-3\" style=\"padding-top: 6px; white-space: nowrap;\">選擇療程</h6>\n              <div>\n                <button type=\"button\" class=\"btn btn-category rounded-pill me-2 mb-2 btn-checkIcon\"\n                        v-for=\"(item, index) in leaveRecordTagData\" :key=\"item\"\n                        :class=\"{'active' : leaveRecordTagDataNum === index }\"\n                        @click=\"selectLeaveRecordTagData(index)\">\n                  <img class=\"align-middle me-2 img1\" v-if=\"item.left\" src=\"@/assets/stylesheets/icon/Check-01.png\" width=\"15\" height=\"15\" alt=\"Check-01\">\n                  <img class=\"align-middle me-2 img2\" v-if=\"item.left\" src=\"@/assets/stylesheets/icon/Check-02.png\" width=\"15\" height=\"15\" alt=\"Check-02\">\n                  <span>{{ item.courseTypeName }} : {{ item.courseName }}</span>\n                </button>\n              </div>\n            </div>\n\n            <div class=\"mb-3\">\n              <h6 class=\"fw-500 text-main-dark2 mb-2 me-3\" style=\"padding-top: 6px; white-space: nowrap;\">離診確認 :</h6>\n\n              <template v-if=\"initLeaveRecordData.consentNames\">\n                <div class=\"rounded-10 border border-gray2 bg-gray1 mb-3\"\n                  v-if=\"initLeaveRecordData.consentNames.length !== 0\">\n                <div class=\"py-3 px-5 text-gray3\">\n                  <span>今日已簽署</span>\n                  <span v-for=\"(item, index) in initLeaveRecordData.consentNames\" :key=\"item\">\n                    【{{item}}】\n                    <span v-if=\"initLeaveRecordData.consentNames.length !== index + 1\">、</span>\n                  </span>\n                </div>\n                </div>\n              </template>\n\n              <div class=\"rounded-10 border border-gray2 bg-gray1\">\n                <div class=\"d-flex align-items-center py-3 px-5\">\n                  <h6 class=\"fw-500 text-main-dark2 mb-0 me-3 d-inline-block align-middle\" style=\"white-space: nowrap;\">修護霜 R</h6>\n\n                  <div class=\"form-check mb-0 me-4\">\n                    <input class=\"form-check-input align-middle\" type=\"radio\" name=\"getR\" id=\"toGetR\"\n                            v-model=\"endOfTreatmentData.getR\"\n                            @change=\"changeGetR()\"\n                            :value=\"true\"\n                            :disabled=\"initLeaveRecordData.leaveRecord\">\n                    <label class=\"form-check-label align-middle text-main-dark2\" for=\"toGetR\">\n                      <span>是</span>\n                      <span v-if=\"initLeaveRecordData.leaveRecord && endOfTreatmentData.getR\"> : 小罐 {{ endOfTreatmentData.smallRepairCreamAmount }} / 大罐 {{ endOfTreatmentData.largeRepairCreamAmount }}</span>\n                    </label>\n                  </div>\n\n                  <div class=\"form-check mb-0\">\n                    <input class=\"form-check-input align-middle\" type=\"radio\" name=\"getR\" id=\"noR\"\n                            v-model=\"endOfTreatmentData.getR\"\n                            @change=\"changeGetR()\"\n                            :value=\"false\"\n                            :disabled=\"initLeaveRecordData.leaveRecord\">\n                    <label class=\"form-check-label align-middle text-main-dark2\" for=\"noR\">\n                      不拿R\n                    </label>\n                  </div>\n\n                </div>\n\n                <div class=\"d-flex py-3 px-5 border-top border-gray2\" v-if=\"endOfTreatmentData.getR && !initLeaveRecordData.leaveRecord\">\n                  <div class=\"d-flex me-2\" style=\"width: 40%;\">\n                    <label class=\"align-middle rounded-end rounded-pill bg-gray1 border-end-0 text-main-dark2\"\n                          style=\"padding: 6px 8px 6px 11px; border: 1px solid #ced4da; white-space: nowrap;\">小罐</label>\n                    <input type=\"number\" class=\"align-middle form-control rounded-start rounded-pill d-inline-block align-middle\"\n                          placeholder=\"數量\"\n                          min=\"1\"\n                          v-model=\"endOfTreatmentData.smallRepairCreamAmount\">\n                  </div>\n\n                  <div class=\"d-flex\" style=\"width: 40%;\">\n                    <label class=\"align-middle rounded-end rounded-pill bg-gray1 border-end-0 text-main-dark2\"\n                          style=\"padding: 6px 8px 6px 11px; border: 1px solid #ced4da; white-space: nowrap;\">大罐</label>\n                    <input type=\"number\" class=\"align-middle form-control rounded-start rounded-pill d-inline-block align-middle\"\n                          placeholder=\"數量\"\n                          min=\"1\"\n                          v-model=\"endOfTreatmentData.largeRepairCreamAmount\">\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"rounded-10 border border-gray2 bg-gray1 px-5 py-3 text-main-dark2 mb-3\">\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"nextTreatment\"\n                      :disabled=\"initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.reserveNextTime\">\n                <label class=\"form-check-label\" for=\"nextTreatment\">\n                  預約下次療程時間\n                </label>\n              </div>\n\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"samples\"\n                      :disabled=\"initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.needGiveaway\"\n                      @change=\"needGiveawayJudge($event)\">\n                <label class=\"form-check-label\" for=\"samples\">\n                  <span>需拿試用品</span>\n                  <template v-if=\"initLeaveRecordData.leaveRecord\">\n                    <span class=\"mx-1\">:</span>\n                    <span v-for=\"(item, index) in endOfTreatmentData.giveaways\"\n                        :key=\"item.id\">\n                      <span>{{ item.name }}</span>\n                      <span v-if=\"endOfTreatmentData.giveaways.length !== index + 1\">、</span>\n                  </span>\n                  </template>\n\n                </label>\n              </div>\n\n                  <div class=\"position-relative ms-5 bg-white border border-gray2 pt-2 rounded-15 mb-2 cursor-pointer\"\n                    style=\"min-height: 49px; padding-right: 32px;\"\n                    @click.stop=\"openGiveawayWindow()\"\n                    v-show=\"needGiveawayJudgeValue\">\n                  <img class=\"toggle-card-icon toggle-icon-style position-absolute top-50 translate-middle-y\"\n                      style=\"right: 16px;\"\n                      src=\"@/assets/stylesheets/icon/arrow_down.png\"\n                      alt=\"arrow_down\" width=\"15.78\" height=\"7.3\">\n\n                    <button type=\"button\" class=\"amis-badge amis-badge-second3 ms-1 mb-2\"\n                            @click.stop=\"deleteSelectedGiveaway(index)\"\n                      v-for=\"(item, index) in endOfTreatmentData.giveaways\" :key=\"item.id\">\n                      <span class=\"align-middle me-2\">{{ item.name }}</span>\n                      <img class=\"align-middle\" src=\"@/assets/stylesheets/icon/X-01.png\"\n                            alt=\"icon\" width=\"10\" height=\"10\">\n                    </button>\n\n                    <!-- 需拿試用品下拉 -->\n                    <div class=\"position-absolute bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3\"\n                          style=\"z-index: 10; top: 110%;;\"\n                          v-show=\"giveawayWindow\"\n                          data-to=\"true\"\n                          @click.stop=\"null\">\n                      <div class=\"scroll-content-none\" style=\"max-height: 170px\">\n                        <div class=\"form-check mb-2\"\n                            v-for=\"item in initLeaveRecordData.giveaways\"\n                            :key=\"item.id\">\n                          <input class=\"form-check-input\" type=\"checkbox\"\n                          :value=\"item\"\n                          :id=\"`giveaway${item.id}`\"\n                          v-model=\"endOfTreatmentData.giveaways\">\n                          <label class=\"form-check-label text-main-dark2 d-block\" :for=\"`giveaway${item.id}`\">\n                            {{ item.name }}\n                          </label>\n                        </div>\n\n                      </div>\n                    </div>\n                  </div>\n                  \n\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"newCustomer\"\n                      :disabled=\"initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.newCustomerAddLine\">\n                <label class=\"form-check-label\" for=\"newCustomer\">\n                  新客 + LINE\n                </label>\n              </div>\n\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"remindCounterCharges\"\n                      :disabled=\"initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.remindReceptionistFee\">\n                <label class=\"form-check-label\" for=\"remindCounterCharges\">\n                  提醒櫃台收費\n                </label>\n              </div>\n\n              <div class=\"form-check\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"guide\"\n                      :disabled=\"initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.sonophoresis\">\n                <label class=\"form-check-label\" for=\"guide\">\n                  導 : S甘草gel + 偏光15\n                </label>\n              </div>\n            </div>\n\n            <div class=\"d-flex align-items-center\">\n              <h6 class=\"fw-500 text-main-dark2 me-3 d-inline-block mb-0\"\n                  style=\"white-space: nowrap;\">結束醫美師</h6>\n              <select class=\"rounded-pill form-select text-main-dark2 w-50\"\n                      v-if=\"!initLeaveRecordData.leaveRecord\"\n                      v-model=\"endOfTreatmentData.beautician\">\n                <option v-for=\"beautician in initLeaveRecordData.beauticians\"\n                        :key=\"beautician.id\" :value=\"beautician.id\">\n                        {{ beautician.name }}\n                </option>\n              </select>\n\n              <h6 class=\"mb-0\" v-else>{{ endOfTreatmentData.beautician }}</h6>\n            </div>\n\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\" data-bs-dismiss=\"modal\">關 閉</button>\n            <button type=\"button\" class=\"btn btn-alert-main rounded-pill me-5\"\n                    @click=\"checkAnySubcourseNoBeautician()\">確 定</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 離診確認前，確認子療程空白 -->\n    <div class=\"modal fade\" ref=\"beforeEndOfTreatmentModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">離 診 確 認</h5>\n          <div class=\"bg-white py-7\">\n            <p class=\"mb-0 text-main-dark2 text-center\">此筆病歷的子療程尚有空白欄位，請確認是否確認離診 ?</p>\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\" data-bs-dismiss=\"modal\">取 消</button>\n            <button type=\"button\" class=\"btn btn-alert-main rounded-pill me-5\"\n                    @click=\"executionEndOfTreatment()\">確定離診</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 拍照記錄 -->\n    <div class=\"modal fade\" ref=\"photoRecordModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">拍 照 記 錄</h5>\n          <div class=\"bg-white py-5 px-10\">\n\n            <div class=\"d-flex text-center\">\n              <h6 class=\"mb-0 pb-3\" style=\"width: 10%;\"></h6>\n              <h6 class=\"mb-0 pb-3\" style=\"width: 30%;\">日 期</h6>\n              <h6 class=\"mb-0 pb-3\" style=\"width: 25%;\">療 程</h6>\n              <h6 class=\"mb-0 pb-3\" style=\"width: 35%;\">是否有拍照</h6>\n            </div>\n\n            <div class=\"border border-gray2 bg-gray1 rounded-10 text-main-dark2 mb-3\">\n              <div class=\"d-flex\">\n                <p class=\"text-center mb-0 py-3 border-end border-gray2\" style=\"width: 10%;\">1</p>\n                <p class=\"text-center mb-0 py-3 border-end border-bottom border-gray2\" style=\"width: 30%;\">2023/ 02/ 16</p>\n                <p class=\"mb-0 py-3 px-5 border-end border-bottom border-gray2\" style=\"width: 25%;\">Botox</p>\n                <div class=\"mb-0 py-3 border-bottom border-gray2 text-center\" style=\"width: 35%;\">\n                  <img src=\"@/assets/stylesheets/icon/Check-02.png\" width=\"16\" height=\"16\" alt=\"Check-02\">\n                </div>\n              </div>\n\n              <div class=\"d-flex\">\n                <p class=\"text-center mb-0 py-3 border-end border-gray2\" style=\"width: 10%;\">2</p>\n                <p class=\"text-center mb-0 py-3 border-end border-bottom border-gray2\" style=\"width: 30%;\">2023/ 02/ 16</p>\n                <p class=\"mb-0 py-3 px-5 border-end border-bottom border-gray2\" style=\"width: 25%;\">Botox</p>\n                <div class=\"mb-0 py-3 border-bottom border-gray2 text-center\" style=\"width: 35%;\">\n                  <img src=\"@/assets/stylesheets/icon/Check-02.png\" width=\"16\" height=\"16\" alt=\"Check-02\">\n                </div>\n              </div>\n\n              <div class=\"d-flex\">\n                <p class=\"text-center mb-0 py-3 border-end border-gray2\" style=\"width: 10%;\">3</p>\n                <p class=\"text-center mb-0 py-3 border-end border-gray2\" style=\"width: 30%;\">2023/ 02/ 16</p>\n                <p class=\"mb-0 py-3 px-5 border-end border-gray2\" style=\"width: 25%;\">Botox</p>\n                <div class=\"mb-0 py-3 border-gray2\" style=\"width: 35%;\"></div>\n              </div>\n            </div>\n\n            <div class=\"d-flex justify-content-between\">\n              <span class=\"text-gray3\" style=\"font-size: 12px;\">1-10 of 80</span>\n\n              <div>\n                <a href=\"#\">\n                  <img src=\"@/assets/stylesheets/icon/arrow_left.png\" width=\"4.12\" height=\"10\" alt=\"arrow_left\">\n                </a>\n\n                <a href=\"#\" class=\"text-decoration-none border-bottom border-main-dark2 ms-4 align-middle text-main-dark2\">\n                  1\n                </a>\n\n                <a href=\"#\" class=\"text-decoration-none ms-4 align-middle text-gray3\">\n                  2\n                </a>\n\n                <a href=\"#\" class=\"text-decoration-none ms-4 align-middle text-gray3\">\n                  3\n                </a>\n\n                <a href=\"#\" class=\"text-decoration-none ms-4 align-middle text-gray3\">\n                  ...\n                </a>\n\n                <a href=\"#\" class=\"text-decoration-none ms-4 align-middle text-gray3\">\n                  8\n                </a>\n\n                <a href=\"#\" class=\"ms-4\">\n                  <img src=\"@/assets/stylesheets/icon/arrow_right.png\" width=\"4.12\" height=\"10\" alt=\"arrow_right\">\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-5\" data-bs-dismiss=\"modal\">關 閉</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- AIQ -->\n    <div class=\"modal fade\" ref=\"AIQModalRef\">\n      <div class=\"modal-dialog modal-760\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">醫美服務問券</h5>\n          <div class=\"bg-white py-5 px-10 scroll-content-none\" style=\"max-height: 680px;\">\n            <!-- 客戶資訊 -->\n            <div class=\"border border-gray2 bg-gray1 p-3 rounded-10 mb-5\" style=\"width: 80%\">\n              <div class=\"row\">\n                <div class=\"col-5\">\n                  <div class=\"d-flex align-items-center\">\n                    <p class=\"mb-0 fw-500 me-1\">客戶資訊 :</p>\n                    <div class=\"rounded-circle bg-main-dark2 position-relative me-1\" style=\"width: 22px; height: 22px;\">\n                      <p class=\"mb-0 text-white fw-bold position-absolute top-50 start-50 translate-middle\" style=\"font-size: 12px\">安</p>\n                    </div>\n                    <p class=\"mb-0\">孫芸芸</p>\n                  </div>\n\n                  <div class=\"d-flex\">\n                    <p class=\"mb-0 fw-500 me-1\">性別 :</p>\n                    <p class=\"mb-0\">女</p>\n                  </div>\n\n                  <div class=\"d-flex\">\n                    <p class=\"mb-0 fw-500 me-1\">電話 :</p>\n                    <p class=\"mb-0\">071234567</p>\n                  </div>\n                </div>\n\n                <div class=\"col-5\">\n                  <div class=\"d-flex\">\n                    <p class=\"mb-0 fw-500 me-1\">諮詢日期</p>\n                    <p class=\"mb-0\">2022/ 12/ 09</p>\n                  </div>\n\n                  <div class=\"d-flex\">\n                    <p class=\"mb-0 fw-500 me-1\">歷史病歷</p>\n                    <p class=\"mb-0\">C6/ Botox</p>\n                  </div>\n                  \n                </div>\n              </div>\n            </div>\n\n            <!-- 問題開始 -->\n            <!-- 淨膚雷射療程滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">淨膚雷射療程滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"skinCleansing\" id=\"skinCleansing1\">\n                  <label class=\"form-check-label\" for=\"skinCleansing1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"skinCleansing\" id=\"skinCleansing2\">\n                  <label class=\"form-check-label\" for=\"skinCleansing2\">\n                    不滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"skinCleansing\" id=\"skinCleansing3\">\n                  <label class=\"form-check-label\" for=\"skinCleansing3\">\n                    效果不佳\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"skinCleansing\" id=\"skinCleansing4\">\n                  <label class=\"form-check-label\" for=\"skinCleansing4\">\n                    未治療過\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"skinCleansing\" id=\"skinCleansing5\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"skinCleansing5\">\n                      其他 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"other\" aria-describedby=\"other\">\n                </div>\n              </div>\n            </div>\n\n            <!-- 除毛雷射療程滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">除毛雷射療程滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"hairRemovalLaser\" id=\"hairRemoval1\">\n                  <label class=\"form-check-label\" for=\"hairRemoval1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"hairRemovalLaser\" id=\"hairRemoval2\">\n                  <label class=\"form-check-label\" for=\"hairRemoval2\">\n                    不滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"hairRemovalLaser\" id=\"hairRemoval3\">\n                  <label class=\"form-check-label\" for=\"hairRemoval3\">\n                    效果不佳\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"hairRemovalLaser\" id=\"hairRemoval4\">\n                  <label class=\"form-check-label\" for=\"hairRemoval4\">\n                    未治療過\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"hairRemovalLaser\" id=\"hairRemoval5\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"hairRemoval5\">\n                      其他 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"other\" aria-describedby=\"other\">\n                </div>\n              </div>\n            </div>\n\n            <!-- 微整治療療程滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">微整治療療程滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"microTreatment\" id=\"microTreatment1\">\n                  <label class=\"form-check-label\" for=\"microTreatment1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"microTreatment\" id=\"microTreatment2\">\n                  <label class=\"form-check-label\" for=\"microTreatment2\">\n                    不滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"microTreatment\" id=\"microTreatment3\">\n                  <label class=\"form-check-label\" for=\"microTreatment3\">\n                    效果不佳\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"microTreatment\" id=\"microTreatment4\">\n                  <label class=\"form-check-label\" for=\"microTreatment4\">\n                    未治療過\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"microTreatment\" id=\"microTreatment5\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"microTreatment5\">\n                      其他 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"other\" aria-describedby=\"other\">\n                </div>\n              </div>\n            </div>\n\n            <!-- 你的專屬醫美師是哪位 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">你的專屬醫美師是哪位 :</h5>\n              <div class=\"d-flex flex-wrap\" style=\"width: 80%;\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"WhoIsYourAesthetician\" id=\"id\">\n                  <label class=\"form-check-label\" for=\"id\">\n                    雅茹\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"WhoIsYourAesthetician\" id=\"iDontKnow\">\n                  <label class=\"form-check-label\" for=\"iDontKnow\">\n                    不清楚\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 照鏡子時有發現紋路或鬆弛或其他問題嗎 (複選) : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">照鏡子時有發現紋路或鬆弛或其他問題嗎 (複選) :</h5>\n              <div class=\"d-flex flex-wrap\" style=\"width: 80%;\">\n                <div class=\"form-check form-check-inline text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"HaveYouFoundAnyProblems1\" value=\"抬頭紋\">\n                  <label class=\"form-check-label\" for=\"HaveYouFoundAnyProblems1\">抬頭紋</label>\n                </div>\n\n                <div class=\"form-check form-check-inline text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"HaveYouFoundAnyProblems2\" value=\"魚尾紋\">\n                  <label class=\"form-check-label\" for=\"HaveYouFoundAnyProblems2\">魚尾紋</label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 如果除皺治療費用與單次雷射的費用差不多，您會願意改善嗎 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">如果除皺治療費用與單次雷射的費用差不多，您會願意改善嗎 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"AreYouWillingToImprove\" id=\"AreYouWillingToImprove1\">\n                  <label class=\"form-check-label\" for=\"AreYouWillingToImprove1\">\n                    願意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"AreYouWillingToImprove\" id=\"AreYouWillingToImprove2\">\n                  <label class=\"form-check-label\" for=\"AreYouWillingToImprove2\">\n                    不願意\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"AreYouWillingToImprove\" id=\"AreYouWillingToImprove3\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"AreYouWillingToImprove3\">\n                      原因 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"other\" aria-describedby=\"other\">\n                </div>\n              </div>\n            </div>\n\n            <!-- 臉部會有4大負面情緒表情，自己或朋友覺得您看起來如何(複選) : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">臉部會有4大負面情緒表情，自己或朋友覺得您看起來如何(複選) :</h5>\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"howYouLookToYourselfOrYourFriends1\" value=\"累\">\n                <label class=\"form-check-label\" for=\"howYouLookToYourselfOrYourFriends1\">累 : 上眼皮或眼角下垂，眼下或眼窩凹陷陰影，淚溝或眼袋明顯</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"howYouLookToYourselfOrYourFriends2\" value=\"鬆弛\">\n                <label class=\"form-check-label\" for=\"howYouLookToYourselfOrYourFriends2\">鬆弛 : 臉頰蘋果肌下垂，嘴邊肉或木偶紋明顯，下顎線模糊或雙下巴</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"howYouLookToYourselfOrYourFriends3\" value=\"兇\">\n                <label class=\"form-check-label\" for=\"howYouLookToYourselfOrYourFriends3\">兇 : 法令紋明顯，蘋果肌/ 外側臉頰/ 太陽穴凹陷，唇薄唇紋明顯，國子臉</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"howYouLookToYourselfOrYourFriends4\" value=\"心情不好\">\n                <label class=\"form-check-label\" for=\"howYouLookToYourselfOrYourFriends4\">心情不好(哀傷) : 眉毛/ 上眼皮下垂，嘴角下垂，下巴短或內縮</label>\n              </div>\n            </div>\n\n            <!-- 您了解尚禾診所其他助您年輕的治療嗎 (複選) : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">您了解尚禾診所其他助您年輕的治療嗎 (複選) :</h5>\n              <div class=\"d-flex\">\n                <div class=\"me-4\">\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments1\" value=\"肉毒\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments1\">肉毒: 控制肌肉改善紋路抗衰老</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments2\" value=\"極線音波\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments2\">極線音波: 緊緻膠原增彈性</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments3\" value=\"減脂針\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments3\">減脂針: 局部雕塑</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments4\" value=\"膠原新生\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments4\">膠原新生: 刺激膠原增生、改善細紋</label>\n                  </div>\n                </div>\n\n                <div>\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments5\" value=\"玻尿酸\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments5\">玻尿酸: 填補凹陷變年輕</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments6\" value=\"洢蓮絲\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments6\">洢蓮絲: 飽滿增膠原強化額頭立體感</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments7\" value=\"倍克脂\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments7\">倍克脂: 雙下巴、消除脂肪</label>\n                  </div>\n\n                  <div class=\"form-check text-B8B8B8\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"knowAboutOtherTreatments8\" value=\"眼袋溶脂\">\n                    <label class=\"form-check-label\" for=\"knowAboutOtherTreatments8\">眼袋溶脂: 消除多餘脂肪</label>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- 您對尚禾診所最重視因素有哪些 (複選) : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">您對尚禾診所最重視因素有哪些 (複選) :</h5>\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors1\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors1\">醫師專業解說與精湛技術改善在意問題</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors2\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors2\">最先進儀器設備、新療程</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors3\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors3\">微整產品保證原廠</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors4\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors4\">空間整齊乾淨、環境舒適</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors5\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors5\">服務品質優良態度親切有禮</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors6\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors6\">專屬醫美師定期提醒關心安排療程</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors7\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors7\">醫美師服務的每個環節符合診所SOP</label>\n              </div>\n\n              <div class=\"form-check text-B8B8B8\">\n                <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors8\" value=\"\">\n                <label class=\"form-check-label\" for=\"emphasisOnFactors8\">不強迫推銷</label>\n              </div>\n\n              <div class=\"d-flex align-items-center\">\n                <div class=\"form-check form-check-inline me-0\">\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"emphasisOnFactors9\" value=\"\">\n                  <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"emphasisOnFactors9\">\n                    其他 :\n                  </label>\n                </div>\n                <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"emphasisOnFactors9other\" aria-describedby=\"emphasisOnFactors9other\">\n              </div>\n            </div>\n\n            <!-- 櫃台服務及報到流程滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">櫃台服務及報到流程滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"processSatisfaction\" id=\"processSatisfaction1\">\n                  <label class=\"form-check-label\" for=\"processSatisfaction1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"processSatisfaction\" id=\"processSatisfaction2\">\n                  <label class=\"form-check-label\" for=\"processSatisfaction2\">\n                    不滿意\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 醫美師、接待、洗臉、跟診滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">醫美師、接待、洗臉、跟診滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"aestheticianServiceSatisfaction\" id=\"aestheticianServiceSatisfaction1\">\n                  <label class=\"form-check-label\" for=\"aestheticianServiceSatisfaction1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"aestheticianServiceSatisfaction\" id=\"aestheticianServiceSatisfaction2\">\n                  <label class=\"form-check-label\" for=\"aestheticianServiceSatisfaction2\">\n                    不滿意\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 醫師、治療及說明滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">醫師、治療及說明滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"descriptionSatisfaction\" id=\"descriptionSatisfaction1\">\n                  <label class=\"form-check-label\" for=\"descriptionSatisfaction1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"descriptionSatisfaction\" id=\"descriptionSatisfaction2\">\n                  <label class=\"form-check-label\" for=\"descriptionSatisfaction2\">\n                    不滿意\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 療程結束、術後服務及約診滿意度 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">療程結束、術後服務及約診滿意度 :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"postoperativeServiceSatisfaction\" id=\"postoperativeServiceSatisfaction1\">\n                  <label class=\"form-check-label\" for=\"postoperativeServiceSatisfaction1\">\n                    滿意\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"postoperativeServiceSatisfaction\" id=\"postoperativeServiceSatisfaction2\">\n                  <label class=\"form-check-label\" for=\"postoperativeServiceSatisfaction2\">\n                    不滿意\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <!-- 以上問題不滿意原因 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">以上問題不滿意原因 :</h5>\n              <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline w-50\" aria-describedby=\"Why are you unsatisfied with the above questions?\">\n            </div>\n\n            <!-- 是否有加診所或專屬醫美師的LINE : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">是否有加診所或專屬醫美師的LINE :</h5>\n              <div class=\"d-flex\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"AddLINE\" id=\"AddLINE1\">\n                  <label class=\"form-check-label\" for=\"AddLINE1\">\n                    有\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"AddLINE\" id=\"AddLINE2\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"AddLINE2\">\n                      沒有，原因 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"other\" aria-describedby=\"other\">\n                </div>\n              </div>\n            </div>\n\n            <!-- 請問您的職業 : -->\n            <div class=\"mb-5\">\n              <h5 class=\"text-main-dark1\">請問您的職業 :</h5>\n              <div class=\"d-flex flex-wrap\" style=\"width: 80%;\">\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work1\">\n                  <label class=\"form-check-label\" for=\"work1\">\n                    公務人員(軍工教等)\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work2\">\n                  <label class=\"form-check-label\" for=\"work2\">\n                    製造業\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work3\">\n                  <label class=\"form-check-label\" for=\"work3\">\n                    服務業(餐飲、百貨、飯店旅遊等)\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work4\">\n                  <label class=\"form-check-label\" for=\"work4\">\n                    金融(銀行、保險等)\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work5\">\n                  <label class=\"form-check-label\" for=\"work5\">\n                    自營\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work6\">\n                  <label class=\"form-check-label\" for=\"work6\">\n                    退休\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work7\">\n                  <label class=\"form-check-label\" for=\"work7\">\n                    醫療業\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work8\">\n                  <label class=\"form-check-label\" for=\"work8\">\n                    學生\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work9\">\n                  <label class=\"form-check-label\" for=\"work9\">\n                    網路業\n                  </label>\n                </div>\n\n                <div class=\"form-check form-check-inline me-4 text-B8B8B8\">\n                  <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work10\">\n                  <label class=\"form-check-label\" for=\"work10\">\n                    家庭主婦\n                  </label>\n                </div>\n\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"form-check form-check-inline me-0\">\n                    <input class=\"form-check-input\" type=\"radio\" name=\"work\" id=\"work11\">\n                    <label style=\"white-space: nowrap;\" class=\"form-check-label text-B8B8B8\" for=\"work11\">\n                      其他 :\n                    </label>\n                  </div>\n                  <input type=\"text\" class=\"border-0 border-bottom border-B8B8B8 no-focus-outline\" id=\"otherWork\" aria-describedby=\"otherWork\">\n                </div>\n\n                \n              </div>\n            </div>\n\n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\" data-bs-dismiss=\"modal\">關 閉</button>\n            <button type=\"button\" class=\"btn btn-alert-main rounded-pill me-5\">確 定</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 控台確認 -->\n    <div class=\"modal fade\" ref=\"consoleConfirmationModalRef\">\n      <div class=\"modal-dialog modal-760\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">控 台 確 認</h5>\n\n          <div class=\"bg-white py-5 px-15\">\n            <div class=\"mb-2\">\n              <button type=\"button\"\n                      class=\"btn btn-category rounded-pill me-2 mb-2 btn-checkIcon\"\n                      v-for=\"(item, index) in consoleConfirmTagData\"\n                      :class=\"{ 'active' : consoleConfirmTagDataIndex === index }\"\n                      :key=\"item.medicalRecordId\"\n                      @click=\"selectConsoleConfirmTag(index)\">\n                <img class=\"align-middle me-2 img1\" v-if=\"item.consoleConfirmed\" src=\"@/assets/stylesheets/icon/Check-01.png\" width=\"15\" height=\"15\" alt=\"Check-01\">\n                <img class=\"align-middle me-2 img2\" v-if=\"item.consoleConfirmed\" src=\"@/assets/stylesheets/icon/Check-02.png\" width=\"15\" height=\"15\" alt=\"Check-02\">\n                <span>{{ item.courseTypeName }} : {{ item.courseName }}</span>\n              </button>\n            </div>\n            \n            <div class=\"mb-3\" style=\"width: 80%;\">\n              <div class=\"border border-gray2 bg-gray1 rounded-10 text-main-dark2 mb-3\">\n                <div class=\"d-flex text-center\">\n                  <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 20%;\">券 號</p>\n                  <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 30%;\">收費明細</p>\n                  <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 20%;\">子療程</p>\n                  <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 30%;\">拍照資料</p>\n                </div>\n\n                <div class=\"d-flex\">\n                  <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">\n                    <div v-for=\"item in historicalMedicalRecordData.voucherOrder\"\n                        :key=\"item.bodyPartId\">\n                      <p class=\"fw-500 mb-0\">{{ item.bodyPartName }} :</p>\n                      <p class=\"mb-0\"\n                        v-for=\"voucherIdItem in item.voucherId\"\n                        :key=\"voucherIdItem\">\n                        {{ voucherIdItem }}\n                      </p>\n                    </div>\n                  </div>\n                  <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 30%;\">\n                    <!-- 收費明細 -->\n                    <template v-for=\"(feeDetailItem, index) in historicalMedicalRecordData.feeDetails\"\n                              :key=\"feeDetailItem\">\n                      <div class=\"d-flex justify-content-between\"\n                          v-if=\"feeDetailItem.chargeType === 'anesthesia'\">\n                        <p class=\"mb-0\">{{index + 1}}. {{ feeDetailItem.chargeName }}</p>\n                        <p class=\"mb-0\">{{ feeDetailItem.price }}</p>\n                      </div>\n\n                      <div v-if=\"feeDetailItem.chargeType === 'cash'\">\n                        <p class=\"mb-0\">{{index + 1}}. {{ feeDetailItem.chargeName }}</p>\n                        <div class=\"d-flex justify-content-between ms-4\"\n                            v-for=\"item in feeDetailItem.data\"\n                            :key=\"item\">\n                          <p class=\"mb-0 text-gray3\">{{ item.bodyPartName }}</p>\n                          <p class=\"mb-0\">{{ item.price }}</p>\n                        </div>\n                      </div>\n                    </template>\n                  </div>\n                  <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">\n                    <div class=\"d-flex\"\n                        v-for=\"item in historicalMedicalRecordData.subcourseData\"\n                        :key=\"item\">\n                      <p class=\"mb-0 me-2\">{{ item.subcourseName }}:</p>\n                      <p class=\"mb-0\">{{ item.beauticianName }}</p>\n                    </div>\n                  </div>\n                  <div class=\"mb-0 py-3 px-4 border-top border-gray2\" style=\"width: 30%;\">\n                    <div class=\"d-flex\">\n                      <p class=\"mb-0 me-1\">時間 :</p>\n                      <p class=\"mb-0\">10:26:28</p>\n                    </div>\n                    <div class=\"d-flex\">\n                      <p class=\"mb-0 me-1\">狀態 :</p>\n                      <p class=\"mb-0\">已歸檔</p>\n                    </div>\n                    <div class=\"d-flex\">\n                      <p class=\"mb-0 me-1\">攝影師 :</p>\n                      <p class=\"mb-0\">魏如如</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"text-main-dark2\">\n              <div class=\"d-flex mb-3\">\n                <p class=\"mb-0 me-1\">治療醫師 :</p>\n                <p class=\"mb-0\">{{ historicalMedicalRecordData.operatorName }}</p>\n              </div>\n              <div class=\"d-flex mb-3\">\n                <p class=\"mb-0 me-1\">病歷備註 :</p>\n                <p class=\"mb-0\">{{ historicalMedicalRecordData.comment || '無' }}</p>\n              </div>\n              <div class=\"d-flex mb-3\"\n                v-if=\"historicalMedicalRecordData.courseType !== 'OPD'\">\n                <p class=\"mb-0 me-1\">客戶需求 :</p>\n                <p class=\"mb-0\"\n                  v-for=\"(item, index) in historicalMedicalRecordData.customerDemandNames\"\n                  :key=\"item + index\">\n                  <span>{{ item }}</span>\n                  <span v-if=\"historicalMedicalRecordData.customerDemandNames.length !== index + 1\">、</span>\n                </p>\n                <p class=\"mb-0\" v-if=\"historicalMedicalRecordData.customerDemandNames\">\n                  {{ historicalMedicalRecordData.customerDemandNames.length === 0 ? '無' : null }}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"border-top border-2 border-gray2 scroll-content-none bg-white py-5 px-15\" style=\"max-height: 332px;\">\n            <div class=\"form-check form-check-inline mb-3\">\n              <input class=\"form-check-input\" disabled type=\"checkbox\" id=\"noTreatment\"\n                    v-model=\"historicalMedicalRecordData.notTreat\">\n              <label class=\"form-check-label\" for=\"noTreatment\">未治療</label>\n            </div>\n\n            <div class=\"d-flex mb-3\">\n              <p class=\"mb-0 me-1\">主 訴 :</p>\n              <p class=\"mb-0\">{{ historicalMedicalRecordData.subjectiveDescription }}</p>\n            </div>\n\n            <div class=\"d-flex mb-3\"\n                v-if=\"historicalMedicalRecordData.courseType === 'IV'\">\n              <p class=\"mb-0 me-1\">診 斷 :</p>\n              <p class=\"mb-0\">{{ historicalMedicalRecordData.diagnosis }}</p>\n            </div>\n\n            <div class=\"d-flex mb-3\"\n                v-if=\"historicalMedicalRecordData.courseType === 'IV'\">\n              <p class=\"mb-0 me-1\">療 耗 :</p>\n              <p class=\"mb-0\">{{ historicalMedicalRecordData.treatmentConsume }}</p>\n            </div>\n\n            <div class=\"border-1 text-gray3\" style=\"width: 80%;\">\n              <!-- 麻藥紀錄 -->\n              <div v-if=\"historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'\">\n                <p class=\"fw-500 mb-2\">麻藥紀錄 :</p>\n                <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                  <div class=\"d-flex text-center\">\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 20%;\">麻藥名稱</p>\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 30%;\">劑 量</p>\n                    <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 20%;\">施打時間</p>\n                    <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 30%;\">施打護理師</p>\n                  </div>\n\n                  <div class=\"d-flex text-center text-main-dark2\"\n                      v-for=\"item in historicalMedicalRecordData.anestheticUsageRecordData\"\n                      :key=\"item\">\n                    <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">{{ item.anestheticName }}</div>\n                    <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 30%;\">{{ item.dose }}cc</div>\n                    <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">{{ deleteTTimeFormat(item.createdTime).time }}</div>\n                    <div class=\"mb-0 py-3 px-4 border-top border-gray2\" style=\"width: 30%;\">{{ item.beauticianName }}</div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- 雷射能量 -->\n              <div v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                <p class=\"fw-500 mb-2\">雷射能量 :</p>\n                <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                  <div class=\"d-flex text-center\">\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 16%;\">設備名稱</p>\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 32%;\">診 斷</p>\n                    <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 52%;\">能 量</p>\n                  </div>\n\n                  <div class=\"d-flex\" v-for=\"laserRecordItem in laserRecord\" :key=\"laserRecordItem\">\n                    <div class=\"mb-0 border-end border-top border-gray2 text-center py-3\" style=\"width: 16%;\">\n                      <p class=\"mb-0 text-main-dark2\">{{ laserRecordItem.laserEquipmentName }}</p>\n                    </div>\n                    <div class=\"d-flex flex-wrap mb-0 p-3 border-end border-top border-gray2\" style=\"width: 32%;\">\n                      <span class=\"mb-0 text-main-dark2\"\n                        v-for=\"(item, index) in laserRecordItem.parts\"\n                        :key=\"item + index\">\n                        <span>{{ item }}</span>\n                        <span v-if=\"laserRecordItem.parts.length !== index + 1 ||\n                                    laserRecordItem.diagnosticSymptoms.length !== 0\">、</span>\n                      </span>\n\n                      <span class=\"mb-0 text-main-dark2\"\n                        v-for=\"(item, index) in laserRecordItem.diagnosticSymptoms\"\n                        :key=\"item + index\">\n                        <span>{{ item }}</span>\n                        <span v-if=\"laserRecordItem.diagnosticSymptoms.length !== index + 1\">、</span>\n                      </span>\n                    </div>\n                    <div class=\"d-flex mb-0 p-3 border-top border-gray2\" style=\"width: 52%;\">\n                      <div class=\"d-flex flex-wrap align-items-center\">\n                        <template v-for=\"(item, index) in laserRecordItem.laserRecordDetailData\" :key=\"item\">\n                          <span>\n                            <span class=\"text-mark\">{{ item.value }}</span>\n                            <span class=\"text-main-dark2\">{{ item.laserEquipmentFeatureUnit }}</span>\n                          </span>\n\n                          <span class=\"mx-1\" v-if=\"laserRecordItem.laserRecordDetailData.length !== index + 1\">/</span>\n\n                          <div class=\"d-flex align-items-center\" v-if=\"item.laserEquipmentFeatureId === 'Refrigerant1'\">\n                            <div>\n                              <p class=\"mb-0 text-mark\">{{ laserRecordItem.Refrigerant1 }}</p>\n                              <p class=\"mb-0 text-mark\">{{ laserRecordItem.Refrigerant2 }}</p>\n                            </div>\n                            <span class=\"mx-1\" v-if=\"laserRecordItem.laserRecordDetailData.length !== index + 1\"> / </span>\n                          </div>\n\n                        </template>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                <p class=\"fw-500 mb-2\">醫師詳答 :</p>\n                <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                  <div class=\"d-flex text-center\">\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 25%;\">雷射能量</p>\n                    <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 25%;\">能量等級</p>\n                    <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 25%;\">下次治療建議</p>\n                    <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 25%;\">下次建議時間</p>\n                  </div>\n\n                  <div class=\"d-flex text-center\">\n                    <div style=\"width: 25%;\"\n                    :class=\"{'border-end' : doctorDetailAnswerDataIndex !== historicalMedicalRecordData.doctorDetailAnswerData.length - 1}\"\n                        v-for=\"(doctorDetailAnswerDataItem, doctorDetailAnswerDataIndex) in historicalMedicalRecordData.doctorDetailAnswerData\"\n                        :key=\"doctorDetailAnswerDataItem\">\n                      <div class=\"py-3 px-4 border-top border-gray2\"\n                          \n                          v-if=\"Array.isArray(doctorDetailAnswerDataItem) && doctorDetailAnswerDataItem.length !== 0\">\n                        <span class=\"mb-0 text-main-dark2\"\n                          v-for=\"(item, index) in doctorDetailAnswerDataItem\"\n                          :key=\"item.itemContent\">{{ item.itemContent }}\n                          <span v-if=\"index !== doctorDetailAnswerDataItem.length - 1\">、</span>  \n                        </span>\n                      </div>\n\n                      <p class=\"mb-0 text-main-dark2\"\n                        :class=\"{ 'py-3 px-4 border-top': doctorDetailAnswerDataItem.itemContent }\"\n                        v-else>{{ doctorDetailAnswerDataItem.itemContent }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"text-main-dark2\">\n                <div class=\"d-flex mb-3\" v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                  <p class=\"mb-0 me-1\">諮詢估量 :</p>\n                  <p class=\"mb-0\">{{ historicalMedicalRecordData.estimate || '無' }}</p>\n                </div>\n                <div class=\"d-flex mb-3\" v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                  <p class=\"mb-0 me-1\">醫師醫囑 :</p>\n                  <p class=\"mb-0\">{{ historicalMedicalRecordData.advisory || '無' }}</p>\n                </div>\n              </div>\n\n              <p class=\"fw-500 mb-2\">醫師確認 :</p>\n              <div class=\"border border-gray2 rounded-10 mb-3\">\n                <div class=\"d-flex\"\n                    v-if=\"historicalMedicalRecordData.courseType === 'Laser' ||\n                          historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'\">\n                  <p class=\"mb-0 py-2 border-end border-gray2 fw-500 text-gray3 text-center\"\n                    style=\"width: 25%;\">修護霜 R</p>\n                  <div class=\"py-2 px-4 border-gray2 fw-500 text-main-dark2\" style=\"width: 75%;\">\n                    <template v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords\">\n                      <p v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length === 0\"\n                        class=\"mb-0\">\n                        不拿R\n                      </p>\n                    \n                      <div class=\"d-flex\" v-else>\n                        <p class=\"mb-0\"\n                          v-for=\"(item, index) in historicalMedicalRecordData.repairCreamPrescribeMedicineRecords\"\n                          :key=\"item\">{{ item.medicineName }} *{{ item.amount }}\n                          <span v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length > 1 && historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length !== index + 1\">、</span>  \n                        </p>\n                      </div>\n                    </template>\n                  </div>\n                </div>\n\n                <div class=\"d-flex\">\n                  <div class=\"mb-0 py-3 px-4 border-end border-gray2\" style=\"width: 25%;\"\n                      :class=\"{ 'border-top' : historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'}\">\n                    <p class=\"mb-0 text-main-dark2 text-center text-gray3\">是否開藥</p>\n                  </div>\n                  <div class=\"mb-0 py-3 px-4 border-gray2\" style=\"width: 75%;\"\n                      :class=\"{ 'border-top' : historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'}\">\n                    <div class=\"text-gray3 mb-2\">\n                      <p class=\"mb-0\"\n                        v-for=\"item in historicalMedicalRecordData.prescribeMedicineRecords\"\n                        :key=\"item\">\n                        {{ item.medicineTypeName }} - {{ item.medicineName }}, 天數 : {{ item.amount }}<span v-if=\"item.takeMedicineFrequencyName\">, {{ item.takeMedicineFrequencyName }}</span>\n                      </p>\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"row gx-3 text-main-dark2 mb-3\"\n                  v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                <div class=\"col-auto\">\n                  <div class=\"form-check\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"defaultCheck\"\n                          v-model=\"historicalMedicalRecordData.cancelled\"\n                          disabled>\n                    <label class=\"form-check-label\" for=\"defaultCheck\">\n                      醫師免單\n                    </label>\n                  </div>\n                </div>\n                <div class=\"col-7\">\n                  <p class=\"mb-0\">{{ historicalMedicalRecordData.reason }}</p>\n                </div>\n              </div>\n\n              <div class=\"row gx-3 text-main-dark2\"\n                  v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                <div class=\"col-auto\">\n                  <div class=\"form-check\">\n                    <input class=\"form-check-input\" type=\"checkbox\" id=\"defaultCheck1\"\n                          v-model=\"historicalMedicalRecordData.doctorSigned\"\n                          disabled>\n                    <label class=\"form-check-label\" for=\"defaultCheck1\">\n                      醫師確認\n                    </label>\n                  </div>\n                </div>\n                <div class=\"col-auto\" v-if=\"historicalMedicalRecordData.doctorSigned\">\n                  <img :src=\"`${employeeStampData}`\" alt=\"\" width=\"80\" height=\"40\">\n                </div>\n              </div>\n\n            </div>\n\n          </div>\n\n          <div class=\"d-flex justify-content-between align-items-center bg-white border-2 rounded-bottom-20 border-top border-gray2 py-4 px-15\">\n            <div class=\"form-check form-check-inline\">\n              <input class=\"form-check-input\" type=\"checkbox\" id=\"consoleConfirmed\"\n                    v-model=\"consoleConfirmJudge\">\n              <label class=\"form-check-label\" for=\"consoleConfirmed\">控台已確認</label>\n            </div>\n\n            <div>\n              <button type=\"button\" class=\"btn btn-alert-second rounded-pill\" data-bs-dismiss=\"modal\">關 閉</button>\n              <button type=\"button\" class=\"btn btn-alert-main rounded-pill ms-2\"\n                      @click=\"consoleConfirm()\">確 定</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <!-- 客戶需求 -->\n    <div class=\"modal fade\" ref=\"customerNeedsModalRef\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">客 戶 需 求</h5>\n          <div class=\"bg-white pt-5 pb-3 px-10\">\n            <div class=\"d-flex align-items-center mb-3\">\n              <h6 class=\"fw-500 text-main-dark2 me-3 d-inline-block mb-0\"\n                  style=\"white-space: nowrap;\">療程類型</h6>\n              <select class=\"rounded-pill form-select text-main-dark2 w-50\"\n                      v-model=\"customerNeedsCourseType\"\n                      @change=\"customerNeedsCourseTypeChange(customerNeedsCourseType)\">\n                <option v-for=\"courseType in customerNeedsData.courseTypes\"\n                        :key=\"courseType\"\n                        :value=\"courseType.id\">\n                  {{ courseType.name }}\n                </option>\n              </select>\n            </div>\n\n            <h6 class=\"fw-500 text-main-dark2 mb-3\">客戶需求 :</h6>\n\n            <div>\n              <button type=\"button\" class=\"amis-badge amis-badge-second3 me-1 mb-2\"\n                      style=\"cursor: default;\"\n                      v-for=\"item in customerNeedsCheckboxData\" :key=\"item.id\">\n                      {{ item.name }}\n              </button>\n            </div>\n\n            <div>\n              <button type=\"button\" class=\"amis-badge amis-badge-second3 me-1 mb-2\"\n                      @click=\"deleteCustomDemand(index)\"\n                      v-for=\"(item, index) in customDemands\" :key=\"item\">\n                      <span class=\"align-middle me-2\">{{ item.name }}</span>\n                      <img src=\"@/assets/stylesheets/icon/X-01.png\" alt=\"icon\" width=\"10\" height=\"10\">\n              </button>\n            </div>\n          </div>\n\n          <div class=\"bg-white pt-5 pb-3 px-10 border-2 border-top border-gray2\">\n            <p class=\"mb-0 text-gray3 text-end\" style=\"font-size: 12px;\">勾選下方欄位新增需求</p>\n\n            <template v-for=\"item in customerNeedsData.customerDemandGroups\" :key=\"item\">\n              <div class=\"d-flex align-items-center mb-3\" v-if=\"item.id === 'Customized'\">\n                <h6 class=\"fw-500 text-main-dark2 me-3 d-inline-block mb-0\"\n                    style=\"white-space: nowrap;\">{{ item.name }}</h6>\n                <input type=\"text\"\n                      v-model=\"customDemand\"\n                      class=\"form-control rounded-pill text-main-dark2 w-50 me-2\">\n                <a href=\"#\" @click.prevent=\"addCustomDemand()\">\n                  <img src=\"@/assets/stylesheets/icon/+-04.png\" alt=\"\" width=\"16\" height=\"16\">\n                </a>\n              </div>\n            </template>\n\n            \n            <div class=\"bg-gray1 rounded-10 border border-1 border-gray2\">\n              <template v-for=\"(item, index) in customerNeedsData.customerDemandGroups\" :key=\"item\">\n                <div class=\"py-2 px-5\"\n                    v-if=\"item.id !== 'Customized'\"\n                    :class=\"{ 'border-top border-gray2' : index > 1}\"><!-- 療程規劃，點滴就隱藏 -->\n                  <p class=\"mb-0 text-gray3 mb-1\">{{ item.name }}</p>\n                  <div class=\"row text-main-dark2\">\n                    <div class=\"col-4\" v-for=\"customerDemandOption in customerNeedsData.customerDemandOptions[item.id]\" :key=\"customerDemandOption.id\">\n                      <div class=\"form-check form-check-inline\">\n                        <input class=\"form-check-input\" type=\"checkbox\" :id=\"customerDemandOption.id\" :value=\"customerDemandOption\" v-model=\"customerNeedsCheckboxData\">\n                        <label class=\"form-check-label\" :for=\"customerDemandOption.id\" style=\"white-space: nowrap;\">{{ customerDemandOption.name }}</label>\n                      </div>\n                    </div>          \n                  </div>\n                </div>\n              </template>\n            </div>\n            \n          </div>\n\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\" data-bs-dismiss=\"modal\">關 閉</button>\n            <button type=\"button\" class=\"btn btn-alert-main rounded-pill me-5\" @click=\"confirmCustomDemand()\">確 定</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 同意書 -->\n    <div class=\"modal fade\" ref=\"consenModalRef\">\n      <div class=\"modal-dialog modal-760\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">同 意 書</h5>\n          <div class=\"bg-white pt-5 pb-3 px-10\">\n\n            <select class=\"form-select mb-3 w-50\"\n                    @change=\"changeHistoricalDate()\"\n                    v-model=\"historicalDate\"\n                    v-if=\"historicalDateOption.length !== 0\">\n              <option :value=\"date\" v-for=\"date in historicalDateOption\" :key=\"date\">{{ date }}</option>\n            </select>\n\n            <ul class=\"nav nav-tabs mb-2\">\n              <li class=\"nav-item\"\n                  v-for=\"(leistItem, index) in historicalDataList\"\n                  :key=\"leistItem.consentId\">\n                <a class=\"nav-link\" aria-current=\"page\" href=\"#\"\n                    :class=\"{'active' : historicalDataIndex === index}\"\n                    @click.prevent=\"selectHistoricalData(index)\">\n                  <span class=\"align-middle me-2\">{{ leistItem.title }}</span>\n                  <span class=\"d-inline-block rounded-circle align-middle\"\n                        style=\"width: 5px; height: 5px;\"\n                        v-if=\"historicalDateOption.length === 0\"\n                        :class=\"consenJudge(leistItem)\"></span>\n                </a>\n              </li>\n            </ul>\n\n            <div v-html=\"historicalDataByCustomerAndDate.content\"></div>\n\n            <img width=\"596\" height=\"166\"\n                @click=\"openSignatureFunctionModal()\"\n                :src=\"customerSignature\" alt=\"customerSignature\"\n                v-if=\"customerSignature\">\n\n            <div class=\"py-8 border border-gray3 rounded\" style=\"width: 596px;height: 166px;\"\n                @click=\"openSignatureFunctionModal()\"\n                v-else></div>\n\n                \n            <div class=\"d-flex justify-content-end py-2\" v-if=\"historicalDateOption.length === 0\">\n              <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\"\n                      v-if=\"historicalDataByCustomerAndDate.consentRecordId\"\n                      @click=\"cancelConsent()\">取 消</button>\n              <button type=\"button\" class=\"btn rounded-pill\"\n                      :class=\"historicalDataByCustomerAndDate.consentRecordId ? 'btn-alert-main' : 'btn-alert-second'\"\n                      @click=\"agree()\">同 意</button>\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-2\">\n            <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\" data-bs-dismiss=\"modal\">關 閉</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 同意書 - 簽名 -->\n    <div class=\"modal fade\" ref=\"signatureFunctionModalRef\">\n      <div class=\"modal-dialog modal-760\">\n        <div class=\"modal-content p-0 bg-transparent\">\n          <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">同意書簽名</h5>\n          \n          <div class=\"bg-white py-5 px-10\">\n            \n            <div class=\"border botder-gray2 rounded-10 px-10 pb-12\">\n              <!-- 簽名欄 -->\n              <!-- <div class=\"border-bottom border-gray3 mb-2\" style=\"height: 166px\"></div> -->\n              <canvas id=\"canvas\" height=\"166\" width=\"596\"\n                      class=\"border-bottom border-gray3 mb-2\">\n              </canvas>\n\n              <div class=\"d-flex justify-content-end\">\n                <a href=\"#\" style=\"font-size: 16px;\"\n                  @click.prevent=\"clearCanvas()\"\n                  class=\"text-decoration-none text-main-dark2\">\n                  清 除\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"d-flex align-items-center justify-content-end bg-white border-2 border-top rounded-bottom-20 border-gray2 py-4\">\n            <div>\n              <button type=\"button\" class=\"btn btn-alert-second rounded-pill me-2\"\n                @click=\"closeSignatureFunctionModal()\">\n                關 閉\n              </button>\n              <button type=\"button\"\n                      class=\"btn btn-alert-main rounded-pill me-5\"\n                      @click=\"saveSignature()\">\n                建立簽名\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 歷史病歷 -->\n  <div class=\"modal fade\" ref=\"historicalMedicalRecordsRef\">\n    <div class=\"modal-dialog modal-904\">\n      <div class=\"modal-content p-0 bg-transparent\">\n        <h5 class=\"mb-0 py-3 text-center fw-500 bg-main-dark1 text-white rounded-top-20\">歷 史 病 歷</h5>\n        <div class=\"d-flex\">\n          <!-- 左邊 -->\n          <div class=\"border-start border-bottom border-main-dark1 bg-gray1 p-5\"\n              style=\"width: 33.1%; border-radius: 0px 0px 0px 10px;\">\n            <h6 class=\"mb-2 text-main-dark2\">病歷類型</h6>\n\n            <div class=\"bg-white rounded-15 border border-gray2 pt-2 pe-6 position-relative mb-3 cursor-pointer\"\n                style=\"min-height: 43px\"\n                @click.stop=\"openCourseTypeWindow()\">\n              <button type=\"button\" class=\"amis-badge amis-badge-second3 ms-2 mb-2\"\n                      v-for=\"item in courseTypeSelected\"\n                      :key=\"item.id\">\n                {{ item.name }}\n              </button>\n\n              <img class=\"position-absolute top-50 translate-middle-y\" style=\"right: 12px;\"\n                  src=\"@/assets/stylesheets/icon/arrow_down.png\" alt=\"arrow_down\" width=\"10\" height=\"4.62\">\n\n            <!-- 病歷類型下拉 -->\n              <div class=\"position-absolute bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3\"\n                    style=\"z-index: 10; top: 110%;\"\n                    v-show=\"courseTypeWindow\"\n                    data-to=\"true\"\n                    @click.stop=\"null\">\n                <div class=\"scroll-content-none\" style=\"max-height: 170px\">\n                  <div class=\"form-check mb-2\">\n                    <input class=\"form-check-input\" type=\"checkbox\"\n                          :value=\"{id: 'all', name: '全部'}\"\n                          id=\"all\"\n                          @change=\"selectCourseType()\"\n                          v-model=\"courseTypeSelected\">\n                    <label class=\"form-check-label text-main-dark2 d-block\" for=\"all\">\n                      全部\n                    </label>\n                  </div>\n\n                  <div class=\"form-check mb-2\"\n                      v-for=\"item in courseTypeData\" :key=\"item.id\">\n                    <input class=\"form-check-input\" type=\"checkbox\"\n                          :value=\"item\"\n                          :id=\"`courseType${item.id}`\"\n                          @change=\"selectCourseType()\"\n                          v-model=\"courseTypeSelected\">\n                    <label class=\"form-check-label text-main-dark2 d-block\" :for=\"`courseType${item.id}`\">\n                      {{ item.name }}\n                    </label>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n\n            <div class=\"bg-white rounded-15 border border-gray2 pt-3 pb-2 px-2 mb-3\">\n              <h6 class=\"text-center text-main-dark2 mb-5\">病歷紀錄</h6>\n\n              <div class=\"text-gray3\">\n                <template v-for=\"(item, index) in historicalMedicalRecordOption\"\n                        :key=\"item\">\n                  <div class=\"row gx-0 border-top border-gray3 p-1\"\n                      :class=\"historicalMedicalRecordOptionFocusNum === index ? 'bg-main-dark1 text-white' : 'border-top border-gray3'\"\n                      v-if=\"(index + 1) <= (paginationFocusNum * 10) && (index + 1) >= (paginationFocusNum - 1) * 10 + 1\"\n                      @click=\"selectHistoricalMedicalRecord(index)\">\n                    <div class=\"col-5\">\n                      <p class=\"mb-0\">{{ item.appointmentDate }}</p>\n                    </div>\n                    <div class=\"col-4\">\n                      <p class=\"mb-0\">{{ item.courseNames }}</p>\n                    </div>\n                    <div class=\"col-3\">\n                      <p class=\"mb-0\">{{ item.operatorName }}</p>\n                    </div>\n                </div>\n                </template>\n\n              </div>\n            </div>\n\n            <div class=\"d-flex justify-content-between px-2\"\n                v-if=\"pagination.length !== 0\">\n              <span class=\"text-gray3\" style=\"font-size: 12px;\">\n                1-10 of {{ historicalMedicalRecordOption.length }}\n              </span>\n\n              <div>\n                <a href=\"#\" @click.prevent=\"previousPage()\">\n                  <img src=\"@/assets/stylesheets/icon/arrow_left.png\" width=\"4.12\" height=\"10\" alt=\"arrow_left\">\n                </a>\n\n                <template v-for=\"num in pagination\" :key=\"num\">\n                  <a href=\"#\" class=\"ms-4 align-middle\"\n                      @click.prevent=\"paginationFocusNum = num\"\n                      v-if=\"num <= maximumRange && num >= minimumRange\"\n                      :class=\"paginationFocusNum === num ? 'text-main-dark2' :'text-gray3 text-decoration-none'\">\n                    {{ num }}\n                  </a>\n                </template>\n\n                <span class=\"text-decoration-none ms-4 align-middle text-gray3\"\n                      v-if=\"pagination.length > 3\">\n                      ...\n                </span>\n\n                <a href=\"#\" class=\"text-decoration-none ms-4 align-middle text-gray3\"\n                  @click.prevent=\"goLastPage()\"\n                  v-if=\"pagination.length > 3\">\n                  {{ pagination.length }}\n                </a>\n\n                <a href=\"#\" class=\"ms-4\" @click.prevent=\"nextPage()\">\n                  <img src=\"@/assets/stylesheets/icon/arrow_right.png\" width=\"4.12\" height=\"10\" alt=\"arrow_right\">\n                </a>\n              </div>\n            </div>\n            \n          </div>\n\n          <!-- 右邊 -->\n          <div class=\"bg-white border-end border-bottom border-main-dark1\"\n              style=\"width: 66.9%; border-radius: 0px 0px 10px;\">\n            <div class=\"scroll-content-none\" style=\"max-height: 679px; min-height: 679px;\">\n              <div class=\"bg-white py-5 px-10\">\n                <div class=\"d-flex justify-content-end mb-2\">\n                  <button type=\"button\" class=\"btn btn-category rounded-pill ms-2 mb-2 btn-checkIcon\"\n                          v-for=\"(item, index) in historicalMedicalRecordTagData\"\n                          :key=\"item.medicalRecordId\"\n                          @click=\"selectHistoricalMedicalRecordTag(index)\"\n                          :class=\"{ 'active' : historicalMedicalRecordTagIndex === index }\">\n                          {{ item.courseTypeName }} : {{ item.courseName }}\n                  </button>\n                </div>\n\n                <div class=\"mb-3\">\n                  <div class=\"border border-gray2 bg-gray1 rounded-10 text-main-dark2 mb-3\">\n                    <div class=\"d-flex text-center\">\n                      <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 20%;\">券 號</p>\n                      <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 30%;\">收費明細</p>\n                      <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 20%;\">子療程</p>\n                      <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 30%;\">拍照資料</p>\n                    </div>\n\n                    <div class=\"d-flex\">\n                      <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">\n                        <div v-for=\"item in historicalMedicalRecordData.voucherOrder\"\n                            :key=\"item.bodyPartId\">\n                          <p class=\"fw-500 mb-0\">{{ item.bodyPartName }} :</p>\n                          <p class=\"mb-0\"\n                            v-for=\"voucherIdItem in item.voucherId\"\n                            :key=\"voucherIdItem\">\n                            {{ voucherIdItem }}\n                          </p>\n                        </div>\n                      </div>\n                      <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 30%;\">\n                        <!-- 收費明細 -->\n                        <template v-for=\"(feeDetailItem, index) in historicalMedicalRecordData.feeDetails\"\n                                  :key=\"feeDetailItem\">\n                          <div class=\"d-flex justify-content-between\"\n                              v-if=\"feeDetailItem.chargeType === 'anesthesia'\">\n                            <p class=\"mb-0\">{{index + 1}}. {{ feeDetailItem.chargeName }}</p>\n                            <p class=\"mb-0\">{{ feeDetailItem.price }}</p>\n                          </div>\n\n                          <div v-if=\"feeDetailItem.chargeType === 'cash'\">\n                            <p class=\"mb-0\">{{index + 1}}. {{ feeDetailItem.chargeName }}</p>\n                            <div class=\"d-flex justify-content-between ms-4\"\n                                v-for=\"item in feeDetailItem.data\"\n                                :key=\"item\">\n                              <p class=\"mb-0 text-gray3\">{{ item.bodyPartName }}</p>\n                              <p class=\"mb-0\">{{ item.price }}</p>\n                            </div>\n                          </div>\n                        </template>\n                      </div>\n                      <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">\n                        <div class=\"d-flex\"\n                            v-for=\"item in historicalMedicalRecordData.subcourseData\"\n                            :key=\"item\">\n                          <p class=\"mb-0 me-2\">{{ item.subcourseName }}:</p>\n                          <p class=\"mb-0\">{{ item.beauticianName }}</p>\n                        </div>\n                      </div>\n                      <div class=\"mb-0 py-3 px-4 border-top border-gray2\" style=\"width: 30%;\">\n                        <div class=\"d-flex\">\n                          <p class=\"mb-0 me-1\">時間 :</p>\n                          <p class=\"mb-0\">10:26:28</p>\n                        </div>\n                        <div class=\"d-flex\">\n                          <p class=\"mb-0 me-1\">狀態 :</p>\n                          <p class=\"mb-0\">已歸檔</p>\n                        </div>\n                        <div class=\"d-flex\">\n                          <p class=\"mb-0 me-1\">攝影師 :</p>\n                          <p class=\"mb-0\">魏如如</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"text-main-dark2\">\n                  <div class=\"d-flex mb-3\">\n                    <p class=\"mb-0 me-1\">病歷備註 :</p>\n                    <p class=\"mb-0\">{{ historicalMedicalRecordData.comment || '無' }}</p>\n                  </div>\n\n                  <div class=\"d-flex mb-3\"\n                    v-if=\"historicalMedicalRecordData.courseType !== 'OPD'\">\n                    <p class=\"mb-0 me-1\">客戶需求 :</p>\n                    <p class=\"mb-0\"\n                      v-for=\"(item, index) in historicalMedicalRecordData.customerDemandNames\"\n                      :key=\"item + index\">\n                      <span>{{ item }}</span>\n                      <span v-if=\"historicalMedicalRecordData.customerDemandNames.length !== index + 1\">、</span>\n                    </p>\n                    <p class=\"mb-0\" v-if=\"historicalMedicalRecordData.customerDemandNames\">\n                      {{ historicalMedicalRecordData.customerDemandNames.length === 0 ? '無' : null }}\n                    </p>\n                  </div>\n\n                  <div class=\"d-flex mb-3\" v-if=\"historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'\">\n                    <p class=\"mb-0 me-1\">美容耗材 :</p>\n                    <p class=\"mb-0\">{{ historicalMedicalRecordData.beautyConsumableId || '無' }}</p>\n                  </div>\n\n                  <div class=\"d-flex\">\n                    <p class=\"mb-0 me-1\">關心紀錄 :</p>\n                    <p class=\"mb-0\" v-if=\"historicalMedicalRecordData.careRecord\">\n                      <span>{{ historicalMedicalRecordData.careRecord.situation }}</span>\n                      <span v-if=\"historicalMedicalRecordData.careRecord.content\">\n                        / {{ historicalMedicalRecordData.careRecord.content }}\n                      </span>\n                    </p>\n                    <p v-else class=\"mb-0 text-gray3\">\n                      尚未關心\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"border-top border-2 border-gray2 bg-white py-5 px-10\">\n                <div class=\"form-check form-check-inline mb-3\">\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"noTreatment\"\n                        v-model=\"historicalMedicalRecordData.notTreat\"\n                        disabled>\n                  <label class=\"form-check-label\" for=\"noTreatment\">未治療</label>\n                </div>\n\n                <div class=\"d-flex mb-3\">\n                  <p class=\"mb-0 me-1\">主 訴 :</p>\n                  <p class=\"mb-0\">{{ historicalMedicalRecordData.subjectiveDescription }}</p>\n                </div>\n\n                <div class=\"d-flex mb-3\"\n                    v-if=\"historicalMedicalRecordData.courseType === 'IV'\">\n                  <p class=\"mb-0 me-1\" style=\"white-space: nowrap;\">診 斷 :</p>\n                  <p class=\"mb-0\">{{ historicalMedicalRecordData.diagnosis }}</p>\n                </div>\n\n                <div class=\"d-flex mb-3\"\n                    v-if=\"historicalMedicalRecordData.courseType === 'IV'\">\n                  <p class=\"mb-0 me-1\" style=\"white-space: nowrap;\">療 耗 :</p>\n                  <div>\n                    <p class=\"mb-0\">\n                      {{ historicalMedicalRecordData.treatmentConsume }}\n                    </p>\n                    <div class=\"col-auto\" v-if=\"historicalMedicalRecordData.doctorSigned\">\n                      <img :src=\"`${employeeStampData}`\" alt=\"\" width=\"80\" height=\"40\">\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"border-1 text-gray3\">\n                  <!-- 麻藥紀錄 -->\n                  <div v-if=\"historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'\">\n                    <p class=\"fw-500 mb-2\">麻藥紀錄 :</p>\n                    <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                      <div class=\"d-flex text-center\">\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 20%;\">麻藥名稱</p>\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 30%;\">劑 量</p>\n                        <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 20%;\">施打時間</p>\n                        <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 30%;\">施打護理師</p>\n                      </div>\n\n                      <div class=\"d-flex text-center text-main-dark2\"\n                          v-for=\"item in historicalMedicalRecordData.anestheticUsageRecordData\"\n                          :key=\"item\">\n                        <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">{{ item.anestheticName }}</div>\n                        <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 30%;\">{{ item.dose }}cc</div>\n                        <div class=\"mb-0 py-3 px-4 border-end border-top border-gray2\" style=\"width: 20%;\">{{ deleteTTimeFormat(item.createdTime).time }}</div>\n                        <div class=\"mb-0 py-3 px-4 border-top border-gray2\" style=\"width: 30%;\">{{ item.beauticianName }}</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- 雷射能量 -->\n                  <div v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                    <p class=\"fw-500 mb-2\">雷射能量 :</p>\n                    <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                      <div class=\"d-flex text-center\">\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 16%;\">設備名稱</p>\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 32%;\">診 斷</p>\n                        <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 52%;\">能 量</p>\n                      </div>\n\n                      <div class=\"d-flex\" v-for=\"laserRecordItem in laserRecord\" :key=\"laserRecordItem\">\n                        <div class=\"mb-0 border-end border-top border-gray2 text-center py-3\" style=\"width: 16%;\">\n                          <p class=\"mb-0 text-main-dark2\">{{ laserRecordItem.laserEquipmentName }}</p>\n                        </div>\n                        <div class=\"d-flex flex-wrap mb-0 p-3 border-end border-top border-gray2\" style=\"width: 32%;\">\n                          <span class=\"mb-0 text-main-dark2\"\n                            v-for=\"(item, index) in laserRecordItem.showLaserDiagnosis\"\n                            :key=\"item + index\">\n                            <span>{{ item }}</span>\n                            <span v-if=\"laserRecordItem.showLaserDiagnosis.length !== index + 1\">、</span>\n                          </span>\n                        </div>\n                        <div class=\"d-flex mb-0 p-3 border-top border-gray2\" style=\"width: 52%;\">\n                          <div class=\"d-flex flex-wrap align-items-center\">\n                            <template v-for=\"(item, index) in laserRecordItem.laserRecordDetailData\" :key=\"item\">\n                              <span>\n                                <span class=\"text-mark\">{{ item.value }}</span>\n                                <span class=\"text-main-dark2\">{{ item.laserEquipmentFeatureUnit }}</span>\n                              </span>\n\n                              <span class=\"mx-1\" v-if=\"laserRecordItem.laserRecordDetailData.length !== index + 1\">/</span>\n\n                              <div class=\"d-flex align-items-center\" v-if=\"item.laserEquipmentFeatureId === 'Refrigerant1'\">\n                                <div>\n                                  <p class=\"mb-0 text-mark\">{{ laserRecordItem.Refrigerant1 }}</p>\n                                  <p class=\"mb-0 text-mark\">{{ laserRecordItem.Refrigerant2 }}</p>\n                                </div>\n                                <span class=\"mx-1\" v-if=\"laserRecordItem.laserRecordDetailData.length !== index + 1\"> / </span>\n                              </div>\n\n                            </template>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                    <p class=\"fw-500 mb-2\">醫師詳答 :</p>\n                    <div class=\"border border-gray2 rounded-10 mb-3 text-gray3\">\n                      <div class=\"d-flex text-center\">\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 25%;\">雷射能量</p>\n                        <p class=\"mb-0 py-2 border-end border-gray2 fw-500\" style=\"width: 25%;\">能量等級</p>\n                        <p class=\"mb-0 py-2 px-5 border-end border-gray2 fw-500\" style=\"width: 25%;\">下次治療建議</p>\n                        <p class=\"mb-0 py-2 px-5 fw-500\" style=\"width: 25%;\">下次建議時間</p>\n                      </div>\n\n                      <div class=\"d-flex text-center\">\n                        <div style=\"width: 25%;\"\n                          :class=\"{'border-end' : doctorDetailAnswerDataIndex !== historicalMedicalRecordData.doctorDetailAnswerData.length - 1}\"\n                              v-for=\"(doctorDetailAnswerDataItem, doctorDetailAnswerDataIndex) in historicalMedicalRecordData.doctorDetailAnswerData\"\n                              :key=\"doctorDetailAnswerDataItem\">\n                            <div class=\"py-3 px-4 border-top border-gray2\"\n                                \n                                v-if=\"Array.isArray(doctorDetailAnswerDataItem) && doctorDetailAnswerDataItem.length !== 0\">\n                              <span class=\"mb-0 text-main-dark2\"\n                                v-for=\"(item, index) in doctorDetailAnswerDataItem\"\n                                :key=\"item.itemContent\">{{ item.itemContent }}\n                                <span v-if=\"index !== doctorDetailAnswerDataItem.length - 1\">、</span>  \n                              </span>\n                            </div>\n\n                            <p class=\"mb-0 text-main-dark2\"\n                              :class=\"{ 'py-3 px-4 border-top': doctorDetailAnswerDataItem.itemContent }\"\n                              v-else>{{ doctorDetailAnswerDataItem.itemContent }}</p>\n                          </div>\n\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"text-main-dark2\">\n                    <div class=\"d-flex mb-3\" v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                      <p class=\"mb-0 me-1\">諮詢估量 :</p>\n                      <p class=\"mb-0\">{{ historicalMedicalRecordData.estimate || '無' }}</p>\n                    </div>\n                    <div class=\"d-flex mb-3\" v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                      <p class=\"mb-0 me-1\">醫師醫囑 :</p>\n                      <p class=\"mb-0\">{{ historicalMedicalRecordData.advisory || '無' }}</p>\n                    </div>\n                  </div>\n\n                  <p class=\"fw-500 mb-2\">醫師確認 :</p>\n                  <div class=\"border border-gray2 rounded-10 mb-3\">\n                    <div class=\"d-flex\" v-if=\"historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'\">\n                      <p class=\"mb-0 py-2 border-end border-gray2 fw-500 text-gray3 text-center\" style=\"width: 25%;\">修護霜 R</p>\n                      <div class=\"py-2 px-4 border-gray2 fw-500 text-main-dark2\" style=\"width: 75%;\">\n                        <template v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords\">\n                          <p v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length === 0\"\n                            class=\"mb-0\">\n                            不拿R\n                          </p>\n                        \n                          <div class=\"d-flex\" v-else>\n                            <p class=\"mb-0\"\n                              v-for=\"(item, index) in historicalMedicalRecordData.repairCreamPrescribeMedicineRecords\"\n                              :key=\"item\">{{ item.medicineName }} *{{ item.amount }}\n                              <span v-if=\"historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length > 1 && historicalMedicalRecordData.repairCreamPrescribeMedicineRecords.length !== index + 1\">、</span>  \n                            </p>\n                          </div>\n                        </template>\n                      </div>\n                    </div>\n\n                    <div class=\"d-flex\">\n                      <div class=\"mb-0 py-3 px-4 border-end border-gray2\" style=\"width: 25%;\"\n                          :class=\"{ 'border-top' : historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'}\">\n                        <p class=\"mb-0 text-main-dark2 text-center text-gray3\">是否開藥</p>\n                      </div>\n                      <div class=\"mb-0 py-3 px-4 border-gray2\" style=\"width: 75%;\"\n                          :class=\"{ 'border-top' : historicalMedicalRecordData.courseType === 'Laser' || historicalMedicalRecordData.courseType === 'MicroPlasticSurgery'}\">\n                        <div class=\"text-gray3 mb-2\">\n                          <p class=\"mb-0\"\n                            v-for=\"item in historicalMedicalRecordData.prescribeMedicineRecords\"\n                            :key=\"item\">\n                            {{ item.medicineTypeName }} - {{ item.medicineName }}, 天數 : {{ item.amount }}<span v-if=\"item.takeMedicineFrequencyName\">, {{ item.takeMedicineFrequencyName }}</span>\n                          </p>\n                        </div>\n\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"row gx-3 text-main-dark2 mb-3\"\n                      v-if=\"historicalMedicalRecordData.courseType === 'Laser'\">\n                    <div class=\"col-auto\">\n                      <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"defaultCheck\"\n                              v-model=\"historicalMedicalRecordData.cancelled\"\n                              disabled>\n                        <label class=\"form-check-label\" for=\"defaultCheck\">\n                          醫師免單\n                        </label>\n                      </div>\n                    </div>\n                    <div class=\"col-7\">\n                      <p class=\"mb-0\">{{ historicalMedicalRecordData.reason }}</p>\n                    </div>\n                  </div>\n\n                  <div class=\"row gx-3 text-main-dark2\"\n                      v-if=\"historicalMedicalRecordData.courseType !== 'IV'\">\n                    <div class=\"col-auto\">\n                      <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"defaultCheck1\"\n                              v-model=\"historicalMedicalRecordData.doctorSigned\"\n                              disabled>\n                        <label class=\"form-check-label\" for=\"defaultCheck1\">\n                          醫師確認\n                        </label>\n                      </div>\n                    </div>\n                    <div class=\"col-auto\" v-if=\"historicalMedicalRecordData.doctorSigned\">\n                      <img :src=\"`${employeeStampData}`\" alt=\"\" width=\"80\" height=\"40\">\n                    </div>\n                  </div>\n\n                </div>\n\n              </div>\n            </div>\n            <div class=\"d-flex align-items-center justify-content-end bg-white rounded-bottom-20 border-2 border-top border-gray2 py-4 pe-10\">\n\n              <button type=\"button\" class=\"btn btn-alert-second rounded-pill\" data-bs-dismiss=\"modal\">關 閉</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script setup>\n  import { inject, toRefs, reactive, onMounted, nextTick, ref } from 'vue';\n  import { Modal } from 'bootstrap';\n  import { useRouter } from 'vue-router';\n\n  const track = inject('track');\n  const textConversionTool = inject('textConversionTool');\n  const alertMessage = inject('alertMessage');\n\n  const fetchFunction = inject('fetchFunction');\n\n  const accordions = inject('accordion');\n  const {\n    accordionToggle,\n  } = accordions;\n\n  const {\n    fetchApi,\n    getTokenFromCookie\n  } = fetchFunction;\n\n  const Employee = inject('Employee');\n\n  const {\n    employeeState,\n    getAllDoctorData,\n    getBeauticians\n  } = Employee;\n\n  const {\n    allDoctorData,\n    beauticiansData\n  } = toRefs(employeeState);\n\n  const LeaveRecord = inject('LeaveRecord');\n\n  const {\n    leaveRecordState, getLeaveRecordTagData, getInitLeaveRecordData, createLeaveRecord,\n  } = LeaveRecord;\n\n  const {\n    leaveRecordTagData, initLeaveRecordData,\n  } = toRefs(leaveRecordState);\n\n  const MedicalRecord = inject('MedicalRecord');\n\n  const {\n    medicalRecordState,\n    getChangeOperatorData,\n    getDepartmentFollowUpDataBySearchCondition,\n    getEmployeeStampData,\n    getOtherPartHistory,\n    getInitExtraMedicalRecordData,\n    getConsoleConfirmTagData,\n    changeSubcourseOperator,\n    getDoctorStampData,\n    getHistoricalMedicalRecordOption,\n    getHistoricalMedicalRecordData,\n  } = MedicalRecord;\n\n  const {\n    changeOperatorData,\n    employeeStampData,\n    otherPartHistoryData,\n    initExtraMedicalRecordData,\n    consoleConfirmTagData,\n    doctorStampData,\n    historicalMedicalRecordOption,\n    historicalMedicalRecordData\n  } = toRefs(medicalRecordState);\n\n  const Course = inject('Course');\n\n  const {\n    courseState,\n    getCourseOptionsByType,\n  } = Course;\n\n  const {\n    courseOptionsByType\n  } = toRefs(courseState);\n\n  const courseType = inject('courseType');\n\n  const {\n    courseTypeState,\n    getCourseTypeData,\n  } = courseType;\n\n  const {\n    courseTypeData\n  } = toRefs(courseTypeState);\n\n  const prescribeMedicineRecord = inject('prescribeMedicineRecord');\n\n  const {\n    prescribeMedicineRecordState,\n    getPrescribeMedicineRecord,\n    getByUpdateMedicalRecord,\n  } = prescribeMedicineRecord;\n\n  const {\n    prescribeMedicineRecordData\n  } = toRefs(prescribeMedicineRecordState);\n\n  const router = useRouter();\n\n  const { \n          trackState,\n          getDoctors,\n          resetSelectedDoctor,\n          getCurrentMonth,\n          continuousOrReservedToggle,\n          detailedTrackInformationData,\n          detailedInformationInit,\n        } = track;\n\n  const {\n    department,\n    year,\n    month,\n    date,\n    doctorData,\n    selectedDoctor,\n    filterQueryStatus,\n    trackContent,\n  } = toRefs(trackState);\n  \n  const {\n    convertTimeFormatDeleteSecond, deleteTTimeFormat,\n    } = textConversionTool;\n\n  const store = inject('store');\n  const {\n    appointmentState,\n  } = store;\n\n  const { selectedCustomer } = toRefs(appointmentState);\n\n  const { updateMessage } = alertMessage;\n\n  const data = reactive({\n    customer: {\n      name: null,\n      tel: null,\n      birth: null,\n      beautician: null,\n      courseTypeId: null,\n    },\n    focusIndex: null,\n    continuousOrReservedStatus: 'continuousOutpatientAmount',\n    appointmentBodyPartsWindow: false,\n    createCustomerModalSuccess: false,\n  });\n\n  const historyCourseWindow = ref(false);\n\n  /** 開啟之前治療的方案 */\n  const openHistoryCourseWindow = () => {\n    if (historyCourseWindow.value) return null;\n    historyCourseWindow.value = true;\n\n    function close() {\n      historyCourseWindow.value = false;\n      document.removeEventListener('click', close);\n    }\n\n    document.addEventListener('click', close);\n  }\n\n  const editDoctorModalRef = ref(null);\n  let editDoctorModal;\n\n  const quantityTableModalRef = ref(null);\n  let quantityTableModal;\n\n  const extraModalRef = ref(null);\n  let extraModal;\n\n  const endOfTreatmentModalRef = ref(null);\n  let endOfTreatmentModal;\n\n  const photoRecordModalRef = ref(null);\n  // let photoRecordModal;\n\n  const AIQModalRef = ref(null);\n  let AIQModal;\n\n  const consoleConfirmationModalRef = ref(null);\n  let consoleConfirmationModal;\n\n  const customerNeedsModalRef = ref(null);\n  let customerNeedsModal;\n\n  const docterOptions = ref([]);\n  const editDoctor = ref('');\n  const selectedEditDoctorDataIndex = ref(0);\n\n  /** 部門切換 */\n  const departmentToggle = async(status) => {\n    department.value = status;\n\n    await getCourseTypeData();\n\n    data.customer.courseTypeId = null;\n\n    if (status === 'AestheticMedicine') {\n      courseTypeData.value = courseTypeData.value.filter(item => item.id !== 'Beauty');\n    }\n\n    if (status === 'Beauty') {\n      courseTypeData.value = courseTypeData.value.filter(item => item.id === 'Beauty');\n    }\n\n    continuousOrReservedToggle();\n  }\n\n  /** 客戶查詢 */\n  async function searchDetailedInformation(customer) {\n    const { name, birthday, cellPhone, courseTypeId } = customer;\n    const data = {\n      customerName: name,\n      customerBirthday: birthday,\n      customerCellPhone: cellPhone,\n      courseTypeId: courseTypeId,\n    }\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    const response = await getDepartmentFollowUpDataBySearchCondition(department.value, d, data);\n\n    updateMessage(response.message);\n\n    detailedInformationInit(response.data);\n  }\n\n  /** 開啟變更醫師 */\n  const openEditDoctorModal = async (item) => {\n\n    selectedEditDoctorDataIndex.value = 0;\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    await getChangeOperatorData(department.value, item.customer.customerId, d);\n\n    if (department.value === 'AestheticMedicine') {\n      await getAllDoctorData();\n      docterOptions.value = allDoctorData.value;\n    }\n\n    if (department.value === 'Beauty') {\n      await getBeauticians();\n      docterOptions.value = beauticiansData.value;\n    }\n\n    editDoctor.value = changeOperatorData.value[selectedEditDoctorDataIndex.value].operatorId;\n    editDoctorModal.show();\n  }\n\n  /** 選擇變更醫師資料 */\n  async function selectEditDoctorData(index) {\n    selectedEditDoctorDataIndex.value = index;\n\n    editDoctor.value = changeOperatorData.value[selectedEditDoctorDataIndex.value].operatorId;\n  }\n\n  /** 變更醫師 - 確定變更 */\n  async function editDoctorConfirmChanges() {\n    let url = `/api/MedicalRecord/ChangeOperator`;\n  \n    const PATCHData = {\n      medicalRecordId: changeOperatorData.value[selectedEditDoctorDataIndex.value].medicalRecordId,\n      operatorId: editDoctor.value\n    }\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'PATCH',\n      body: JSON.stringify(PATCHData),\n    }\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    continuousOrReservedToggle();\n    editDoctorModal.hide();\n  }\n\n  // 儲值量\n\n  const customerStoredValue = ref([]);\n\n  /** 根據客戶取得儲值量 */\n  async function getCustomerStoredValue(customerId) {\n    const url = `/api/CustomerStoredValue/GetByCustomer?customerId=${customerId}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    customerStoredValue.value = response.data;\n  }\n  \n  /** 開啟儲值量 */\n  const openQuantityTableModal = async (item) => {\n    await getCustomerStoredValue(item.customer.customerId);\n\n    quantityTableModal.show();\n  }\n\n  /** 取得支付方式 */\n  async function getPaymentMethod() {\n    const url = `/api/PaymentMethod/GetAll`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n  \n    return response.data;\n  }\n\n  // 加診資料\n  const extraModalData = ref({});\n  const commonDataList = ref({});         // 共用資料\n  const bodyPartsOptions = ref([]);\n\n  const activityData = ref([]);\n  const cashData = ref([]); \n  const voucherInput = ref([]);\n  const oweVoucherInput = ref([]);\n  const voucherOrderDetailData = ref([]);\n  const bodyParts = ref([]);\n  const allBodyParts = ref([]);\n\n  const total = ref(0);\n\n  /** 其他部位 與 其他部位的數量 */\n  const otherBodyPartLength = ref(1);\n  const otherBodyParts = ref([]);\n  const otherBodyPartJudge = ref(false);\n\n  let noDataForOtherParts = [];\n\n  /** 支付方式資料 */\n  const paymentMethodData = ref([]);\n\n  /** 支付方式下拉開關 */\n  const paymentMethodSwitch = ref([]);\n\n  /** 支付方式選項 */\n  const paymentMethods = ref([]);\n\n  /** 病歷用的共用資料 (其他部位) */\n  const commonDataListForOhterBodypart = ref({});\n\n  /** 支付方式選項 - 其他部位 */\n  const paymentMethodsForOtherBodyparts = ref([]);\n\n  const anestheticInfo = ref({});  //上麻資料\n\n  /** 開啟加診(初始) */\n  const openExtraModal = async (item) => {\n\n    const customerId = item.followUpMedicalRecord[0].detail[0].cureContent.customerId;\n\n    await getInitExtraMedicalRecordData(department.value, customerId);\n\n    const { commonData, customer } = initExtraMedicalRecordData.value;\n\n    commonDataList.value = commonData;\n\n    commonDataListForOhterBodypart.value = JSON.parse(JSON.stringify(commonData));\n    commonDataListForOhterBodypart.value.priceTypes = commonDataListForOhterBodypart.value.priceTypes.filter(item => item.id === 'Once' );\n\n    activityData.value = [];\n    cashData.value = [];\n    voucherInput.value = [];\n    oweVoucherInput.value = [];\n    voucherOrderDetailData.value = [];\n\n    anestheticInfo.value = null;\n\n    // 支付方式初始\n    paymentMethodData.value = [];\n    noDataForOtherParts = [];\n\n    activityData.value = [];\n    cashData.value = [];\n    voucherInput.value = [];\n    oweVoucherInput.value = [];\n    voucherOrderDetailData.value = [];\n\n    allBodyParts.value = [];\n    bodyParts.value = [];\n    bodyPartsOptions.value = [];\n\n    otherBodyPartJudge.value = false;\n    otherBodyParts.value = [];\n    \n    // 初始資料\n    extraModalData.value = {\n      name: customer.name,\n      birthday: customer.birthday,\n      beauticianNickname: customer.beauticianNickname,\n      customerId: customer.id,\n      courseType: null,\n      courseId: null,\n      operatorId: null,\n      anesthesiaType: null,\n      comment: null,\n      anestheticFee: null,\n      received: false,\n    }\n\n    paymentMethods.value = await getPaymentMethod();\n\n    paymentMethodsForOtherBodyparts.value = JSON.parse(JSON.stringify(paymentMethods.value));\n\n    paymentMethodsForOtherBodyparts.value = paymentMethodsForOtherBodyparts.value.filter(item => item.id === 'Cash' || item.id === 'CreditCard' || item.id === 'Free');\n\n    extraModal.show();\n  }\n\n  /** 選擇部位 */\n  function selectedBodyParts(item, event) {\n\n    const checked = event.target.checked;\n    const newNoDataForOtherParts = bodyParts.value.filter(itemA => itemA.id !== 'Other');\n    const newNoDataForOtherPartsLen = newNoDataForOtherParts.length - 1;\n\n    if (checked && item.id !== 'Other') {\n\n      const addItem = newNoDataForOtherParts[newNoDataForOtherPartsLen];\n\n      allBodyParts.value.splice(newNoDataForOtherPartsLen, 0, addItem);\n\n      paymentMethodData.value.splice(newNoDataForOtherPartsLen, 0, {\n        bodyPartId: addItem.id,\n        paymentMethod: [{id: 'Voucher', name: '療程專用券', sequence: 1, active: true}],\n      });\n      paymentMethodSwitch.value.splice(newNoDataForOtherPartsLen, 0, []);\n\n      activityData.value.splice(newNoDataForOtherPartsLen, 0, []);\n      cashData.value.splice(newNoDataForOtherPartsLen, 0, []);\n\n      voucherInput.value.splice(newNoDataForOtherPartsLen, 0, '');\n      oweVoucherInput.value.splice(newNoDataForOtherPartsLen, 0, {\n        bodyPartId: addItem.id,\n        oweAmount: 0\n      });\n\n      voucherOrderDetailData.value.splice(newNoDataForOtherPartsLen, 0, []);\n    }\n\n    if (!checked && item.id !== 'Other') {\n      // 治療部位刪除時\n      \n      const deleteItem = allBodyParts.value.find(item => {\n        return !newNoDataForOtherParts.includes(item);\n      });\n\n      const i = allBodyParts.value.indexOf(deleteItem);\n\n      allBodyParts.value.splice(i, 1);\n      noDataForOtherParts.splice(i, 1);\n\n      paymentMethodData.value.splice(i, 1);\n      paymentMethodSwitch.value.splice(i, 1);\n\n      activityData.value.splice(i, 1);\n\n      let deleteAmount = 0;\n\n      if (cashData.value[i].length !== 0) {\n        if (cashData.value[i][0].priceType === 'Deposit') {\n        cashData.value[i][0].depositData.forEach(item => {\n          deleteAmount += item.amountOfMoney;\n        });\n\n          total.value -= deleteAmount;\n        } else {\n          total.value -= cashData.value[i][0].price;\n        }\n      }\n\n      cashData.value.splice(i, 1);\n\n      voucherInput.value.splice(i, 1);\n      oweVoucherInput.value.splice(i, 1);\n      voucherOrderDetailData.value.splice(i, 1);\n    }\n\n    if (checked && item.id === 'Other') {\n      otherBodyPartLength.value = 1;\n      otherBodyParts.value.push({\n        part: \"\",\n        scope: \"\",\n        price: \"\"\n      })\n\n    otherBodyPartJudge.value = true;\n\n      allBodyParts.value.push({\n        id: \"Other\",\n        name: \"其他\",\n        part: \"\",\n        price: '',\n        scope: \"\"\n      });\n\n      paymentMethodData.value.push({\n        bodyPartId: \"Other\",\n        paymentMethod: [{id: 'Cash', name: '現金支付', sequence: 3, active: true}],\n      })\n\n      paymentMethodSwitch.value.push({\n        bodyPartId: \"Other\",\n        switch: false,\n      })\n\n      // activityData.value.push([]);\n      cashData.value.push([]);\n\n      // voucherInput.value.push('');\n      // voucherOrderDetailData.value.push([]);\n\n      // oweVoucherInput.value.push({\n      //   bodyPartId: item.id,\n      //   oweAmount: 0\n      // });\n\n      cashData.value[cashData.value.length - 1].push(\n        {\n          bodyPartId: \"Other\",\n          paymentMethodId: \"Cash\",\n          priceType: \"Once\",\n          price: null,\n          received: false,\n          otherPartName: '',\n          otherPartScope: '',\n          depositData: [],\n        }\n      );\n    }\n\n    if (!checked && item.id === 'Other') {\n      otherBodyPartJudge.value = false;\n      otherBodyPartLength.value = 0;\n      otherBodyParts.value = [];\n      for(let i = 0; i < allBodyParts.value.length; i++) {\n        if (allBodyParts.value[i].id === \"Other\") {\n          allBodyParts.value.splice(i, 1);\n\n          paymentMethodData.value.splice(i, 1);\n          paymentMethodSwitch.value.splice(i, 1);\n\n          // activityData.value.splice(i, 1);\n\n          total.value -= cashData.value[i][0].price;\n          cashData.value.splice(i, 1);\n\n          // voucherInput.value.splice(i, 1);\n          // voucherOrderDetailData.value.splice(i, 1);\n\n          i--;\n        }\n      }\n    }\n  }\n\n  /** 其他部位 - 部位 Blur */\n  function otherBodyPartInputBlur(index) {\n    if (otherBodyParts.value[index].part === '') return null;\n\n    const newNoDataForOtherParts = bodyParts.value.filter(item => item.id !== 'Other');\n    const len = newNoDataForOtherParts.length;\n\n    allBodyParts.value[len + index].part = otherBodyParts.value[index].part;\n\n    if (!cashData.value[len + index][0]) return null;\n\n    cashData.value[len + index][0].otherPartName = otherBodyParts.value[index].part;\n  }\n\n  /** 其他部位 - 範圍 Blur */\n  function otherBodyScopeInputBlur(index) {\n    if (otherBodyParts.value[index].scope === '') return null;\n\n    const newNoDataForOtherParts = bodyParts.value.filter(item => item.id !== 'Other');\n    const len = newNoDataForOtherParts.length;\n\n    allBodyParts.value[len + index].scope = otherBodyParts.value[index].scope;\n\n    if (!cashData.value[len + index][0]) return null;\n\n    cashData.value[len + index][0].scope = otherBodyParts.value[index].scope;\n  }\n\n  /** 新增其他部位的欄位 */\n  const addOtherBodyPartLength = () => {\n    otherBodyPartLength.value++;\n    otherBodyParts.value.push({\n      part: \"\",\n      scope: \"\",\n      price: \"\"\n    })\n\n    paymentMethodData.value.push({\n      bodyPartId: \"Other\",\n      paymentMethod: [{id: 'Cash', name: '現金支付', sequence: 3, active: true}],\n    })\n\n    paymentMethodSwitch.value.push({\n      bodyPartId: \"Other\",\n      switch: false,\n    })\n\n    allBodyParts.value.push({\n      id: \"Other\",\n      name: \"其他\",\n      part: \"\",\n      price: '',\n      scope: \"\"\n    });\n\n    // activityData.value.push([]);\n    cashData.value.push([]);\n\n    // voucherInput.value.push('');\n    // voucherOrderDetailData.value.push([]);\n\n    cashData.value[cashData.value.length - 1].push(\n      {\n        bodyPartId: \"Other\",\n        paymentMethodId: \"Cash\",\n        priceType: \"Once\",\n        price: null,\n        received: false,\n        otherPartName: '',\n        otherPartScope: '',\n        depositData: [],\n      }\n    );\n  }\n\n  /** 刪除其他欄位 */\n  const deleteOtherBodyPartLength = (index) => {\n    otherBodyPartLength.value--;\n    otherBodyParts.value.splice(index, 1);\n    const newNoDataForOtherParts = bodyParts.value.filter(item => item.id !== 'Other');\n\n    const len = newNoDataForOtherParts.length;\n    const i = len + index;\n    \n    allBodyParts.value.splice(i, 1);\n\n    paymentMethodData.value.splice(i, 1);\n    paymentMethodSwitch.value.splice(i, 1);\n\n    // activityData.value.splice(i, 1);\n    total.value -= cashData.value[i][0].price;\n    cashData.value.splice(i, 1);\n\n    // voucherInput.value.splice(i, 1);\n    // voucherOrderDetailData.value.splice(i, 1);\n  }\n\n  /** 刪除治療部位選項 */\n  const deleteAppointmentBodyPartsItem = (item) => {\n    let index = bodyParts.value.indexOf(item);\n    // const newNoDataForOtherParts = bodyParts.value.filter(itemA => itemA.id !== 'Other');\n\n    bodyParts.value.splice(index, 1);\n\n    if (item.id !== 'Other') {\n      // const deleteItem = allBodyParts.value.find(item => {\n      //   return !newNoDataForOtherParts.includes(item);\n      // });\n\n      const i = allBodyParts.value.indexOf(item);\n\n      allBodyParts.value.splice(i, 1);\n      noDataForOtherParts.splice(i, 1);\n\n      paymentMethodData.value.splice(i, 1);\n      paymentMethodSwitch.value.splice(i, 1);\n\n      activityData.value.splice(i, 1);\n\n      let deleteAmount = 0;\n\n      if (cashData.value[i].length !== 0) {\n        if (cashData.value[i][0].priceType === 'Deposit') {\n        cashData.value[i][0].depositData.forEach(item => {\n          deleteAmount += item.amountOfMoney;\n        });\n\n          total.value -= deleteAmount;\n        } else {\n          total.value -= cashData.value[i][0].price;\n        }\n      }\n\n      cashData.value.splice(i, 1);\n\n      voucherInput.value.splice(i, 1);\n      oweVoucherInput.value.splice(i, 1);\n      voucherOrderDetailData.value.splice(i, 1);\n    } else {\n      otherBodyPartJudge.value = false;\n      otherBodyPartLength.value = 0;\n      otherBodyParts.value = [];\n      for(let i = 0; i < allBodyParts.value.length; i++) {\n        if (allBodyParts.value[i].id === \"Other\") {\n          allBodyParts.value.splice(i, 1);\n\n          paymentMethodData.value.splice(i, 1);\n          paymentMethodSwitch.value.splice(i, 1);\n\n          // activityData.value.splice(i, 1);\n\n          total.value -= cashData.value[i][0].price;\n          cashData.value.splice(i, 1);\n\n          // voucherInput.value.splice(i, 1);\n          // voucherOrderDetailData.value.splice(i, 1);\n\n          i--;\n        }\n      }\n    }\n  }\n\n  /** 取得治療部位 */\n  const getBodyPart = async(courseId) => {\n    const url = `/api/BodyPart/GetBodyPartByCourse?courseId=${courseId}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    return response.data;\n  }\n\n  /** 取得上麻資料 */\n  async function getAnestheticInfo() {\n\n    if (!extraModalData.value.courseId && !extraModalData.value.operatorId) return null;\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    const url = `/api/MedicalRecord/GetAnestheticInfo?customerId=${extraModalData.value.customerId}&courseId=${extraModalData.value.courseId}&doctor=${extraModalData.value.operatorId}&date=${d}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    anestheticInfo.value = response.data;\n  }\n\n  /** 修改療程類別，更新療程選項 */\n  async function changeCourseType(courseType) {\n\n    await getCourseOptionsByType(courseType);\n    \n    extraModalData.value.courseId = '';\n    bodyParts.value = [];\n    bodyPartsOptions.value = [];\n\n    activityData.value = [];\n    paymentMethodData.value = [];\n    paymentMethodSwitch.value = [];\n\n    cashData.value = [];\n    voucherInput.value = [];\n    oweVoucherInput.value = [];\n    voucherOrderDetailData.value = [];\n    allBodyParts.value = [];\n\n    otherBodyPartLength.value = 0;\n    otherBodyParts.value = [];\n\n    otherBodyPartJudge.value = false;\n\n    extraModalData.value.anestheticFee = commonDataList.value.anestheticFees[0].id;\n\n    total.value = 0;\n  }\n\n  /** 修改療程類別、療程選項，更新治療部位*/\n  async function changeCourseId(courseId) {\n    bodyPartsOptions.value = await getBodyPart(courseId);\n    getOtherPartHistory(extraModalData.value.customerId, extraModalData.value.courseId);\n\n    getAnestheticInfo();\n\n    bodyParts.value = [];\n\n    activityData.value = [];\n    paymentMethodData.value = [];\n    paymentMethodSwitch.value = [];\n\n    cashData.value = [];\n    voucherInput.value = [];\n    oweVoucherInput.value = [];\n    voucherOrderDetailData.value = [];\n    allBodyParts.value = [];\n\n    otherBodyPartLength.value = 0;\n    otherBodyParts.value = [];\n\n    otherBodyPartJudge.value = false;\n\n    extraModalData.value.anestheticFee = commonDataList.value.anestheticFees[0].id;\n\n    total.value = 0;\n  }\n\n  /** 開啟支付方式下拉選項 */\n  function openPaymentMethodOption(index) {\n    if (paymentMethodSwitch.value[index].switch) return null;\n    \n    let indexClicked;\n\n    // 取得被展開過的優惠卷下拉視窗\n    const judge = paymentMethodSwitch.value.find((item, i) => {\n      if (item.switch) {\n        indexClicked = i;\n        return item;\n      }\n    })\n\n    // 有被展開過，就關閉該視窗\n    if (judge) {\n      paymentMethodSwitch.value[indexClicked].switch = false;\n      document.removeEventListener('click', close);\n    }\n\n    paymentMethodSwitch.value[index].switch = true;\n\n    function close() {\n      paymentMethodSwitch.value[index].switch = false;\n      document.removeEventListener('click', close);\n    }\n\n    document.addEventListener('click', close);\n  }\n\n  /** 治療部位下拉選單開關 */\n  const bodyPartsWindow = ref(false);\n\n  /** 開啟治療部位下拉選單 */\n  const openAppointmentBodyPartsWindow = () => {\n    if (bodyPartsWindow.value) return null;\n    bodyPartsWindow.value = true;\n\n    function close() {\n      bodyPartsWindow.value = false;\n      document.removeEventListener('click', close);\n    }\n\n    document.addEventListener('click', close);\n  }\n\n  /** 刪除已選的支付方式 */\n  function deleteSelectedPaymentMethod(item, index) {\n\n    const i = paymentMethodData.value[index].paymentMethod.indexOf(item);\n    paymentMethodData.value[index].paymentMethod.splice(i, 1);\n\n    if (item.id === 'Cash') {\n      let deleteAmount = 0;\n\n      if (cashData.value[index][0].priceType === 'Deposit') {\n        cashData.value[index][0].depositData.forEach(item => {\n          deleteAmount += item.amountOfMoney;\n        });\n\n        total.value -= deleteAmount;\n        cashData.value[index] = [];\n        return null;\n      }\n\n      total.value -= cashData.value[index][0].price;\n      cashData.value[index] = [];\n    }\n\n    if (item.id === 'Voucher') {\n      voucherOrderDetailData.value[index] = [];\n\n      oweVoucherInput.value[index].oweAmount = null;\n    }\n\n    if (item.id === 'Activity') {\n      activityData.value[index] = [];\n    }\n  }\n\n  /** 支付方式選擇，新增或刪除預設空值給該部位 */\n  function selectedPaymentMethod(item, index, event) {\n\n    const checked = event.target.checked;\n\n    if (item.id === 'Voucher' && !checked) {\n      voucherOrderDetailData.value[index] = [];\n\n      oweVoucherInput.value[index].oweAmount = null;\n    }\n\n    if (item.id === 'Activity' && checked) {\n      activityData.value[index].push(\n        {\n          prizeId: commonDataList.value.prizeData[0].prizeId,\n          bodyPartId: allBodyParts.value[index].id,\n          couponNumber: \"\"\n        }\n      );\n    }\n\n    if (item.id === 'Activity' && !checked) {\n      activityData.value[index] = [];\n    }\n\n    if (item.id === 'Cash' && !checked) {\n      let deleteAmount = 0;\n\n      if (cashData.value[index][0].priceType === 'Deposit') {\n        cashData.value[index][0].depositData.forEach(item => {\n          deleteAmount += item.amountOfMoney;\n        });\n\n        total.value -= deleteAmount;\n        cashData.value[index] = [];\n        return null;\n      }\n      \n      total.value -= cashData.value[index][0].price;\n      cashData.value[index] = [];\n    }\n\n    if (item.id === 'Cash' && checked) {\n      cashData.value[index].push(\n        {\n          bodyPartId: allBodyParts.value[index].id,\n          paymentMethodId: \"Cash\",\n          priceType: \"Once\",\n          price: null,\n          received: false,\n          otherPartName: allBodyParts.value[index].part ? allBodyParts.value[index].part : '',\n          otherPartScope: allBodyParts.value[index].scope ? allBodyParts.value[index].scope : '',\n          depositData: [],\n        }\n      );\n    }\n  }\n\n  // --- 活動優惠券 ---\n\n  /** 刪除活動優惠券的券號欄位 */\n  function deleteActivityItem(index, i) {\n    activityData.value[index].splice(i, 1);\n  }\n\n  /** 新增活動優惠券的券號欄位 */\n  function addActivityItem(index) {\n\n    activityData.value[index].push(\n      {\n        prizeId: commonDataList.value.prizeData[0].prizeId,\n        bodyPartId: allBodyParts.value[index].id,\n        couponNumber: \"\"\n      }\n    );\n  }\n\n  /** 改變現金支付種類 */\n  function changePriceType(item, index) {\n\n    total.value -= item.price;\n    cashData.value[index][0].price = null;\n\n    if (item.priceType === \"Deposit\") {\n      cashData.value[index][0].price = null;\n      cashData.value[index][0].depositData.push({\n        voucherType: commonDataList.value.voucherTypes[0].id,\n        amountOfMoney: null\n      });\n\n      return null;\n    }\n\n    let deleteAmount = 0;\n\n    if (item.priceType !== \"Deposit\" && cashData.value[index][0].depositData.length !== 0) {\n      cashData.value[index][0].depositData.forEach(item => {\n        deleteAmount += item.amountOfMoney;\n      });\n\n      total.value -= deleteAmount;\n      cashData.value[index][0].depositData = [];\n\n      return null;\n    }\n  }\n\n  function addDepositInput(index, depositData) {\n    const arr = commonDataList.value.voucherTypes.filter(item => !depositData.some(x => x.voucherType === item.id));\n\n    cashData.value[index][0].depositData.push({\n      voucherType: arr[0].id,\n      amountOfMoney: null\n    });\n  }\n\n  function deleteDepositInput(index, i) {\n    let deleteAmount = cashData.value[index][0].depositData[i].amountOfMoney;\n\n    total.value -= deleteAmount;\n\n    cashData.value[index][0].depositData.splice(i, 1);\n  }\n\n  function voucherTypesJudge(depositData, id, voucherType) {\n    if (voucherType === id) return true;\n\n    return !depositData.some(item => item.voucherType === id);\n  }\n\n  /** 輸入的金額，計算總金額 和 將輸入的金額補入 otherBodyParts 的 price */\n  function cashInputBlur(cashDataItem, index) {\n    let added = 0;\n    cashData.value.forEach(item => {\n\n      if (item[0]) {\n        if (!isNaN(parseInt(item[0].price))) {\n          added += parseInt(item[0].price);\n          return null;\n        }\n\n        if (item[0].depositData.length !== 0) {\n          item[0].depositData.forEach(item => {\n            if (!isNaN(parseInt(item.amountOfMoney))) {\n              added += parseInt(item.amountOfMoney);\n            }\n          })\n        }\n      }\n    })\n\n    total.value = added + calculateFeeValue;\n\n    if (!cashDataItem) return null;\n    if (cashDataItem.bodyPartId === 'Other') {\n      const len = bodyParts.value.filter(item => item.id !== 'Other').length;\n      const otherBodyIndex = index - len;\n      otherBodyParts.value[otherBodyIndex].price = cashData.value[index][0].price;\n    }\n  }\n\n  /** 加診確認 */\n  async function confirmExtra() {\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    // 其他部位\n    const otherParts = otherBodyParts.value.map(item => {\n      return {\n        part: item.part,\n        scope: item.scope,\n        price: item.price,\n      }\n    })\n\n    // 是否上麻\n    const anesthetic = commonDataList.value.anestheticFees.find(item => item.id === extraModalData.value.anestheticFee);\n\n    // 現金支付\n    const coursePartOrderDetailData = [];\n\n    cashData.value.forEach(item => {\n      if (item[0]) {\n        coursePartOrderDetailData.push(item[0]);\n      }\n    })\n\n    // 現金支付 - 驗證\n\n    let coursePartOrderDetailJudge = [];\n\n    cashData.value.forEach((item, index) => {\n      if (item.length !== 0 && item[0].priceType !== 'Deposit') {\n        if (\n          item[0].price === null ||\n          item[0].price === '' ||\n          item[0].price === 0\n        ) {\n          coursePartOrderDetailJudge.push(index);\n        }\n      }\n      // 押金驗證\n      if (item.length !== 0 && item[0].priceType === 'Deposit') {\n        item[0].depositData.forEach(item => {\n          if (\n            item.amountOfMoney === null ||\n            item.amountOfMoney === '' ||\n            item.amountOfMoney === 0\n          ) {\n            coursePartOrderDetailJudge.push(index);\n          }\n        })\n      }\n    })\n\n    if (coursePartOrderDetailJudge.length !== 0) {\n      updateMessage('現金金額需填寫');\n      return null;\n    }\n\n    // 支付方式 - 驗證\n    if (paymentMethodData.value.length === 0 &&\n        extraModalData.value.courseType !== 'OPD' &&\n        extraModalData.value.courseType !== 'IV') {\n      updateMessage('未選擇部位');\n      return null;\n    }\n\n    let paymentMethodJudge = [];\n\n    paymentMethodData.value.forEach((item, index) => {\n      if (item.paymentMethod.length === 0) {\n        paymentMethodJudge.push(index);\n      }\n    })\n\n    if (paymentMethodJudge.length !== 0) {\n      updateMessage('尚有部位未填寫收費方式');\n      return null;\n    }\n\n    // 欠卷，驗證\n    let judge = [];\n\n    paymentMethodData.value.forEach((itemA, index) => {\n      itemA.paymentMethod.forEach(itemB => {\n        if (itemB.id === 'Voucher') {\n          if (oweVoucherInput.value[index].oweAmount === null || oweVoucherInput.value[index].oweAmount === '') {\n            judge.push(index);\n          }\n\n          if (oweVoucherInput.value[index].oweAmount === 0) {\n            if (voucherOrderDetailData.value[index].length === 0) {\n              judge.push(index);\n            }\n          }\n        }\n      });\n    })\n\n    if (judge.length !== 0 && extraModalData.value.courseType !== 'MicroPlasticSurgery') {\n      updateMessage('療程專用券需填入卷號或欠卷數');\n      return null;\n    }\n\n    // 療程專用券\n    const voucherOrderDetail = [];\n\n    voucherOrderDetailData.value.forEach(itemA => {\n      if (itemA.length === 0) return null;\n      itemA.forEach(itemB => {\n        voucherOrderDetail.push(itemB);\n      });\n    })\n\n    // 療程專用券 - 欠卷\n    const oweVoucherSituationData = oweVoucherInput.value.filter(item => item.oweAmount !== 0 && item.oweAmount !== null);\n\n    // 活動優惠券 - 資料整理與驗證\n    const couponOrderDetailData = [];\n    const couponOrderDetailDataJudge = [];\n\n    activityData.value.forEach((itemA, index) => {\n      itemA.forEach(itemB => {\n        if (!itemB.couponNumber) {\n          couponOrderDetailDataJudge.push(index);\n          return null;\n        }\n        couponOrderDetailData.push(itemB);\n      })\n    })\n\n    if (couponOrderDetailDataJudge.length !== 0) {\n      updateMessage('需填入活動優惠券');\n      return null;\n    }\n\n    let anesthesiaType;\n    let anesthesiaSituation;\n\n    if (anestheticInfo.value) {\n      anesthesiaType = anestheticInfo.value.anesthesiaType;\n      anesthesiaSituation = anestheticInfo.value.anesthesiaSituation;\n    } else {\n      anesthesiaType = extraModalData.value.anesthesiaType;\n      anesthesiaSituation = extraModalData.value.anesthesiaType === 'None' ? 'NoAnesthesia' : 'Anesthesia';\n    }\n\n    const postData = {\n      departmentId: department.value,\n      customerId: extraModalData.value.customerId,\n      date: d,\n      courseType: extraModalData.value.courseType,\n      courseId: extraModalData.value.courseId,\n      operator: extraModalData.value.operatorId,\n      anesthesiaType,\n      anesthesiaSituation,\n      comment: extraModalData.value.comment,\n      bodyParts: bodyParts.value.map(item => item.id),\n      otherParts,\n      anestheticOrderDetailData: extraModalData.value.anesthesiaType !== 'None' && anestheticInfo.value === null ? {\n        anesthesiaType: extraModalData.value.anesthesiaType,\n        anestheticFeeId: anesthetic.id,\n        price: anesthetic.fee,\n        received: anesthetic.id !== 'Free' ? extraModalData.value.received : true,\n      } : null,\n      coursePartOrderDetailData,\n      voucherOrderDetailData: voucherOrderDetail,\n      oweVoucherSituationData,\n      couponOrderDetailData\n    }\n\n    const url = `/api/MedicalRecord/CreateExtraMedicalRecord`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'POST',\n      body: JSON.stringify(postData),\n    }\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    continuousOrReservedToggle();\n\n    accordionToggle(0, accordion.value.toggleCustomerData);\n\n    extraModal.hide();\n  }\n\n  // 離診\n  const leaveRecordTagDataNum = ref(0);\n  const endOfTreatmentData = ref({});\n\n  let endOfTreatmentCustomerId = null;\n  \n  /** 開啟離診 */\n  const openEndOfTreatmentModal = async(item) => {\n\n    endOfTreatmentCustomerId = item.cureContent.customerId;\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    await getLeaveRecordTagData(item.cureContent.customerId, d);\n    \n    const leaveRecordTagItem = leaveRecordTagData.value.find(itemA => itemA.medicalRecordId === item.cureContent.medicalRecordId);\n\n    // 取得標籤 index\n    leaveRecordTagDataNum.value = leaveRecordTagData.value.indexOf(leaveRecordTagItem);\n\n    await endOfTreatmentDataCollation();\n\n    endOfTreatmentModal.show();\n  }\n\n  /** 離診 - 初始資料整理 */\n  async function endOfTreatmentDataCollation() {\n    await getInitLeaveRecordData(leaveRecordTagData.value[leaveRecordTagDataNum.value].medicalRecordId);\n\n    // 已離診\n    if (initLeaveRecordData.value.leaveRecord) {\n      endOfTreatmentData.value = JSON.parse(JSON.stringify(initLeaveRecordData.value.leaveRecord));\n\n      // 修護霜 R\n      if (endOfTreatmentData.value.largeRepairCreamAmount !== 0 || endOfTreatmentData.value.smallRepairCreamAmount !== 0) {\n        endOfTreatmentData.value.getR = true;\n      } else {\n        endOfTreatmentData.value.getR = false;\n      }\n\n      // 不開啟試用品下拉\n      needGiveawayJudgeValue.value = false;\n\n      // 已選的試用品\n      endOfTreatmentData.value.giveaways = initLeaveRecordData.value.giveaways.filter(item => {\n        return initLeaveRecordData.value.leaveRecordGiveaways.includes(item.id);\n      })\n\n      // 結束醫美師\n      endOfTreatmentData.value.beautician = initLeaveRecordData.value.beauticians.find(item => item.id === endOfTreatmentData.value.beautician).name;\n    }\n\n    // 未離診\n    if (!initLeaveRecordData.value.leaveRecord) {\n\n      // 取得病歷對應的開藥紀錄\n      await getPrescribeMedicineRecord(leaveRecordTagData.value[leaveRecordTagDataNum.value].medicalRecordId);\n\n      let small = null;\n      let large = null;\n\n      prescribeMedicineRecordData.value.forEach(item => {\n        if (item.medicineId === 'SmallRepairCream') {\n          small = item;\n        } else {\n          large = item;\n        }\n      })\n\n      endOfTreatmentData.value = {\n        getR: prescribeMedicineRecordData.value.length === 0 ? false : true,\n        giveaways: [],\n        largeRepairCreamAmount: large ? large.amount : 0,\n        smallRepairCreamAmount: small ? small.amount : 0,\n        reserveNextTime: false,       // 是否有預約下次治療時間\n        needGiveaway: false,          // 是否需拿試用品\n        newCustomerAddLine: false,    // 是否有新客+LINE\n        remindReceptionistFee: false, // 是否有提醒櫃台收費\n        sonophoresis: false,          // 是否有導入\n        beautician: initLeaveRecordData.value.beauticians[0].id,\n        medicalRecordId: leaveRecordTagData.value[leaveRecordTagDataNum.value].medicalRecordId,\n      }\n\n    needGiveawayJudgeValue.value = false;\n    }\n  }\n\n  /** 選擇離診資料 */\n  function selectLeaveRecordTagData(index) {\n    leaveRecordTagDataNum.value = index;\n    endOfTreatmentDataCollation();\n  }\n\n  const giveawayWindow = ref(false);\n\n  /** 開啟試用品下拉 */\n  function openGiveawayWindow() {\n    if (giveawayWindow.value) return null;\n    giveawayWindow.value = true;\n\n    function close() {\n      giveawayWindow.value = false;\n      document.removeEventListener('click', close);\n    }\n\n    document.addEventListener('click', close);\n  }\n\n  /** 刪除已選擇的試用品 */\n  function deleteSelectedGiveaway(index) {\n    endOfTreatmentData.value.giveaways.splice(index, 1);\n  }\n\n  const needGiveawayJudgeValue = ref(false);\n\n  /** 需拿試用品開啟或關閉 */\n  function needGiveawayJudge(event) {\n    const checked = event.target.checked;\n\n    if (checked) {\n      needGiveawayJudgeValue.value = true;\n    } else {\n      needGiveawayJudgeValue.value = false;\n      endOfTreatmentData.value.giveaways = [];\n    }\n  }\n\n  \n  const beforeEndOfTreatmentModalRef = ref(null);\n  let beforeEndOfTreatmentModal;\n\n  onMounted(() => {\n    beforeEndOfTreatmentModal = new Modal(beforeEndOfTreatmentModalRef.value);\n  })\n\n  /** 離診確認前，確認子療程空白 */\n  function checkAnySubcourseNoBeautician() {\n    if (initLeaveRecordData.value.anySubcourseNoBeautician) {\n      endOfTreatmentModal.hide();\n      beforeEndOfTreatmentModal.show();\n      return null;\n    }\n\n    executionEndOfTreatment();\n  }\n\n  /** 離診確認 */\n  async function executionEndOfTreatment() {\n    const {\n      getR,\n      largeRepairCreamAmount,\n      smallRepairCreamAmount,\n      reserveNextTime,\n      needGiveaway,\n      newCustomerAddLine,\n      remindReceptionistFee,\n      sonophoresis,\n      beautician,\n      giveaways,\n      medicalRecordId,\n    } = endOfTreatmentData.value;\n\n    const postData = {\n      medicalRecordId,\n      smallRepairCreamAmount: getR ? smallRepairCreamAmount : 0,\n      largeRepairCreamAmount: getR ? largeRepairCreamAmount : 0,\n      reserveNextTime,\n      needGiveaway,\n      giveaways: giveaways.map(item => item.id),\n      newCustomerAddLine,\n      remindReceptionistFee,\n      sonophoresis,\n      beautician,\n    }\n    \n    const response = await createLeaveRecord(postData);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    const updateMedicalRecordData = {\n      medicalRecordId,\n      prescribeMedicineData: []\n    }\n\n    if (getR) {\n      if (smallRepairCreamAmount) {\n        updateMedicalRecordData.prescribeMedicineData.push({\n          medicineGroupId: \"AfterLaser\",\n          medicineId: \"SmallRepairCream\",\n          amount: smallRepairCreamAmount,\n          takeMedicineFrequencyId: null,\n        });\n      }\n\n      if (largeRepairCreamAmount) {\n        updateMedicalRecordData.prescribeMedicineData.push({\n          medicineGroupId: \"AfterLaser\",\n          medicineId: \"LargeRepairCream\",\n          amount: largeRepairCreamAmount,\n          takeMedicineFrequencyId: null,\n        });\n      }\n    }\n\n    const updateMedicalRecordResponse = await getByUpdateMedicalRecord(updateMedicalRecordData);\n\n    updateMessage(updateMedicalRecordResponse.message);\n\n    if (updateMedicalRecordResponse.statusCode >= 400) return null;\n\n    await endOfTreatmentDataCollation();\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    await getLeaveRecordTagData(endOfTreatmentCustomerId, d);\n\n    endOfTreatmentCustomerId = null;\n\n    continuousOrReservedToggle();\n\n    if (initLeaveRecordData.value.anySubcourseNoBeautician) {\n      beforeEndOfTreatmentModal.hide();\n    }\n  }\n\n  /** 離診 - 改變取修護霜 R  */\n  function changeGetR() {\n    console.log(endOfTreatmentData.value.getR);\n    if (endOfTreatmentData.value.getR) {\n      endOfTreatmentData.value.smallRepairCreamAmount = 1;\n      endOfTreatmentData.value.largeRepairCreamAmount = 0;\n    } else {\n      endOfTreatmentData.value.smallRepairCreamAmount = 0;\n      endOfTreatmentData.value.largeRepairCreamAmount = 0;\n    }\n  }\n\n  const openPhotoRecordModal = () => {\n    // photoRecordModal.show();\n    return null;\n  }\n\n  const openAIQModal = () => {\n    AIQModal.show();\n  }\n\n  // 控台確認\n  const consoleConfirmTagDataIndex = ref(0); // 標籤 index\n  const consoleConfirmJudge = ref(false); // 控台確認 input\n  \n  let consoleConfirmCustomerId = null;\n\n  /** 開啟控台確認 */\n  const openConsoleConfirmationModal = async (item) => {\n\n    consoleConfirmCustomerId = item.customer.customerId;\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    await getConsoleConfirmTagData(item.customer.customerId, d);\n\n    consoleConfirmTagDataIndex.value = 0;\n\n    await getHistoricalMedicalRecordData(consoleConfirmTagData.value[consoleConfirmTagDataIndex.value].medicalRecordId);\n\n    historicalMedicalRecordDataCollation(historicalMedicalRecordData.value);\n\n    consoleConfirmationModal.show();\n  }\n\n  /** 確認 - 控台確認 */\n  async function consoleConfirm() {\n    const PATCHData = {\n      medicalRecordId: consoleConfirmTagData.value[consoleConfirmTagDataIndex.value].medicalRecordId,\n      consoleConfirm: consoleConfirmJudge.value\n    }\n\n    const url = `/api/MedicalRecord/ConsoleConfirm`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'PATCH',\n      body: JSON.stringify(PATCHData),\n    }\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    continuousOrReservedToggle();\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    await getConsoleConfirmTagData(consoleConfirmCustomerId, d);\n\n    consoleConfirmCustomerId = null;\n  }\n\n  /** 選擇控台標籤 */\n  async function selectConsoleConfirmTag(index) {\n    consoleConfirmTagDataIndex.value = index;\n\n    await getHistoricalMedicalRecordData(consoleConfirmTagData.value[consoleConfirmTagDataIndex.value].medicalRecordId);\n\n    historicalMedicalRecordDataCollation(historicalMedicalRecordData.value);\n  }\n\n  /** 全部是否已控台確認 */\n  function allConsoleConfirmJudge(followUpMedicalRecord) {\n\n    let Judge = [];\n    followUpMedicalRecord.forEach(itemA => {\n      itemA.detail.forEach(itemB => {\n        Judge.push(itemB.cureContent.consoleConfirmed);\n      })\n    });\n\n    return Judge.every(item => item === true);\n  }\n\n  // 客戶需求\n  const customerNeedsData = ref({})\n  const customerNeedsCourseType = ref('');\n  const customerNeedsCheckboxData = ref([]);\n  const customDemands = ref([]);\n  const customDemand = ref('');\n  let customerNeedsCustomerId;\n  let deleteCustomDemands = [];\n\n  /** 開啟客戶需求(初始) */\n  const openCustomerNeedsModal = async (item) => {\n    \n    const medicalRecordId = item.followUpMedicalRecord[0].detail[0].cureContent.medicalRecordId;\n    customerNeedsCustomerId = item.followUpMedicalRecord[0].detail[0].cureContent.customerId;\n\n    await getInitCustomerDemandData(medicalRecordId);\n\n    customerNeedsCourseType.value = item.followUpMedicalRecord[0].detail[0].cureContent.courseTypeId;\n\n    customerNeedsModal.show();\n  }\n\n  /** 客戶需求初始 */\n  async function getInitCustomerDemandData(medicalRecordId) {\n    customerNeedsData.value = {};\n    customerNeedsCheckboxData.value = [];\n    customDemands.value = [];\n    customDemand.value = '';\n    deleteCustomDemands = [];\n\n    let url = `/api/MedicalRecord/GetInitCustomerDemandData?medicalRecordId=${medicalRecordId}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n  \n    customerNeedsData.value = response.data;\n\n    console.log(customerNeedsData.value);\n\n    // 客戶需求初始\n    const optionsKey = Object.keys(customerNeedsData.value.customerDemandOptions);\n\n    optionsKey.forEach(itemA => {\n      customerNeedsData.value.customerDemandOptions[itemA].forEach(itemB => {\n        if (itemA === 'Customized') {\n          customDemands.value.push(itemB);\n        }\n\n        if (customerNeedsData.value.customerDemandData.includes(itemB.id) && itemA !== 'Customized') {\n          customerNeedsCheckboxData.value.push(itemB);\n        }\n      })\n    })\n\n    console.log(customDemands.value);\n  }\n\n  /** 新增客戶需求 */\n  function addCustomDemand() {\n    customDemands.value.push({ name: customDemand.value });\n    customDemand.value = '';\n  }\n\n  /** 刪除客戶需求 */\n  function deleteCustomDemand(index) {\n    deleteCustomDemands.push(customDemands.value[index]);\n    customDemands.value.splice(index, 1);\n  }\n\n  /** 確認客戶需求 */\n  async function confirmCustomDemand() {\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    let customerDemandData = customerNeedsCheckboxData.value.map(item => item.id);\n\n    // 篩出原先有的自訂客戶需求\n    const oldCustomDemands = customDemands.value.filter(item => item.id);\n\n    const oldCustomDemandId = oldCustomDemands.map(item => item.id);\n\n    // 自訂客戶需求 與 非自訂客戶需求一起放入\n    customerDemandData = [...customerDemandData, ...oldCustomDemandId]\n\n    // 篩出新建立的自訂客戶需求\n    const newCustomDemands = customDemands.value.filter(item => !item.id);\n\n    const customizedDemandToCreate = newCustomDemands.map(item => {\n      return {\n        courseType: customerNeedsCourseType.value,\n        name: item.name,\n        groupId: \"Customized\",\n        customerId: customerNeedsCustomerId,\n      }\n    })\n\n    // 篩出刪除的自訂客戶需求紀錄\n    const newDeleteCustomDemands = deleteCustomDemands.filter(item => item.id);\n\n    const customizedDemandToDelete = newDeleteCustomDemands.map(item => item.id);\n\n    const PATCHData = {\n      customerId: customerNeedsCustomerId,\n      courseType: customerNeedsCourseType.value,\n      date: d,\n      customerDemandData,\n      customizedDemandToCreate,\n      customizedDemandToDelete,\n    }\n\n    const url = `/api/MedicalRecord/UpdateMedicalReocrdCustomerDemand`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'PATCH',\n      body: JSON.stringify(PATCHData),\n    }\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    continuousOrReservedToggle();\n    customerNeedsModal.hide();\n  }\n\n  /** 客戶需求 - 療程類型修改 */\n  async function customerNeedsCourseTypeChange(courseTypeId) {\n    const medicalRecordId = customerNeedsData.value.medicalRecordIdData[courseTypeId][0];\n    await getInitCustomerDemandData(medicalRecordId);\n  }\n\n  onMounted(() => {\n    extraModal = new Modal(extraModalRef.value);\n    editDoctorModal = new Modal(editDoctorModalRef.value);\n    quantityTableModal = new Modal(quantityTableModalRef.value);\n    endOfTreatmentModal = new Modal(endOfTreatmentModalRef.value);\n    // photoRecordModal = new Modal(photoRecordModalRef.value);\n    AIQModal = new Modal(AIQModalRef.value);\n    consoleConfirmationModal = new Modal(consoleConfirmationModalRef.value);\n    customerNeedsModal = new Modal(customerNeedsModalRef.value);\n  });\n\n  /** 燈號判斷 */\n  function lightsJudge(item) {\n\n    const leftTimeJudge = item.followUpMedicalRecord.every(itemA => {\n      return itemA.detail.every(itemB => itemB.cureContent.leftTime);\n    })\n\n    const endTimeOfTreatmentJudge = item.followUpMedicalRecord.some(itemA => {\n      return itemA.detail.some(itemB => itemB.cureContent.endTimeOfTreatment);\n    })\n\n    if (leftTimeJudge) {\n      return 'bg-gray3'\n    }\n    \n    if (endTimeOfTreatmentJudge) {\n      return 'bg-mark'\n    }\n\n    return 'bg-green'\n  }\n\n  /** 醫師陣容 - 選擇醫師頭像 */\n  const showOrHideDoctorData = async (item1) => {\n    doctorData.value.forEach(item2 => {\n      if (item1.id === item2.id) {\n        if (item1.select) {\n          if (selectedDoctor.value.length === 1) {\n            // 最少要 1 位\n            return null;\n          }\n          item1.select = false;\n        } else {\n          // 最多選 4 位\n          if (selectedDoctor.value.length >= 4) {\n            return null;\n          }\n          item1.select = true;\n        }\n      }\n    })\n\n    resetSelectedDoctor();\n\n    continuousOrReservedToggle();\n  }\n\n  const outstandingData = ref([]);\n\n  /** 取得尚未收費 */\n  async function getOutstandingData() {\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    const url = `/api/Order/GetOutstandingData?date=${d}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    outstandingData.value = response.data;\n  }\n\n\n  const switchToDiagnosisOrDetails = () => {\n    trackContent.value = trackContent.value === 'dateOfAppointment' ? 'detailedInformation' : 'dateOfAppointment';\n    continuousOrReservedToggle();\n  }\n\n  const monthNumtoEn = (month) => {\n    const arr = [\"JAN\", \"FEB\", \"MAR\", \"APR\", \"MAY\", \"JUN\", \"JUL\", \"AUG\", \"SEP\", \"OCT\", \"NOV\", \"DEC\"];\n    return arr[month];\n  }\n\n  // /** 開啟治療部位下拉選單 */\n  // const openAppointmentBodyPartsWindow = () => {\n  //   if (data.appointmentBodyPartsWindow) return null;\n  //   data.appointmentBodyPartsWindow = true;\n\n  //   function close() {\n  //     data.appointmentBodyPartsWindow = false;\n  //     document.removeEventListener('click', close);\n  //   }\n\n  //   document.addEventListener('click', close);\n  // }\n\n\n  const setPeriod = (attributes) => {\n    const newValue = !filterQueryStatus.value[attributes];\n\n    filterQueryStatus.value[attributes] = newValue;\n\n    continuousOrReservedToggle();\n  }\n\n  /** 過濾查詢 - 重置 */\n  const filterQueryReset = () => {\n    filterQueryStatus.value = {\n      continuousOutpatientNum: 1,\n      isAppointment: true,\n      morning: true,\n      afternoon: true,\n      evening: true,\n    }\n\n    data.continuousOrReservedStatus = 'continuousOutpatientAmount';\n    data.customer = {\n      name: null,\n      tel: null,\n      birth: null,\n      beautician: null,\n      courseTypeId: null,\n    }\n\n    filterQueryStatus.value.courseTypeId = null;\n\n    continuousOrReservedToggle();\n  }\n\n  // --- 手風琴 accordion ---\n\n  /** accordion data */\n  const accordion = ref({\n    toggleCard: [\n      { \n        className: '.toggle-card',\n        maxHeight: '300px'\n      },\n      { \n        className: '.toggle-card-icon',\n        style: 'transform',\n        open: 'rotate(180deg)',\n        close: 'rotate(0deg)'\n      }\n    ],\n    toggleCustomerData: [\n      { \n        className: '.toggle-customerData',\n        maxHeight: null\n      },\n      { \n        className: '.toggle-customerData-icon',\n        style: 'transform',\n        open: 'rotate(180deg)',\n        close: 'rotate(0deg)'\n      }\n    ],\n  })\n\n  onMounted(async() => {\n    await init();\n    if (detailedTrackInformationData.value && detailedTrackInformationData.value.length !== 0) {\n      accordionToggle(0, accordion.value.toggleCustomerData);\n    }\n  })\n\n  const stripCalendarInit = () => {\n    let currentMonth = getStripCalendarData(year.value, month.value);\n\n    currentMonth.forEach((item, index) => {\n      if (item.date === date.value) {\n        data.focusIndex = index;\n      }\n    })\n\n    const nextLen = currentMonth.length - 10;\n    const lastLen = currentMonth.length - nextLen;\n\n    if (data.focusIndex <= lastLen) {\n      const { returnYear, returnMonth } = timeSwitch(year.value, month.value, true);\n\n      console.log(returnYear, returnMonth);\n\n      let lastMonth = getStripCalendarData(returnYear, returnMonth);\n      currentMonth = lastMonth.concat(currentMonth);\n    }\n\n    if (data.focusIndex >= nextLen) {\n      const { returnYear, returnMonth } = timeSwitch(year.value, month.value, false);\n\n      // console.log(y, m);\n\n      let nextMonth = getStripCalendarData(returnYear, returnMonth);\n      currentMonth = currentMonth.concat(nextMonth);\n    }\n\n    currentMonth.forEach((item, index) => {\n      if (item.date === date.value && item.month === month.value + 1 && item.year === year.value) {\n        data.focusIndex = index;\n      }\n    })\n\n    data.stripCalendar = currentMonth;\n\n    console.log(data.stripCalendar);\n    \n    calendarListFocus(data.focusIndex);\n  }\n\n  /** 條狀拖拉日曆移動到目標 */\n  const calendarListFocus = (num) => {\n  \n    const focus = num - 5;\n\n    nextTick(() => {\n      const items = document.querySelectorAll('.calendarList');\n      let total = 0;\n\n      for (let i = 0; i < focus; i++) {\n        total += items[i].offsetWidth + 32;\n    }\n\n    const scroll = document.querySelector('.scroll');\n    scroll.scrollTo({left: total, behavior: 'smooth'});\n    });\n  }\n\n  const timeSwitch = (year, month, judge) => {\n    if (judge) {\n      month -= 1;\n    } else {\n      month += 1;\n    }\n\n    if (month === 12) {\n      month = 0;\n      year+= 1;\n    }\n\n    if (month === -1) {\n      month = 11;\n      year -= 1;\n    }\n\n    const returnYear = year;\n    const returnMonth = month;\n\n    return { returnYear, returnMonth };\n  }\n\n  /** 取得條狀拖拉日曆 */\n  const getStripCalendarData = (year, month) => {\n    let time = new Date(year, month+1, 1);\n    let arr = [];\n    let dayEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n    time.setHours(time.getHours() - 1);    // 下個月 - 1 小時，目的是轉換成當月的最後一天 \n\n    const allDate = time.getDate();\n\n    for (let i = 1; i <= allDate; i++) {\n      let index = new Date(year, month, i).getDay();\n      arr.push({\n        day: dayEn[index],\n        date: i,\n        month: month + 1,\n        year: year,\n      })\n    }\n    // this.stripCalendar = arr;\n    return arr;\n  }\n\n  /** 增加條狀拖拉日曆長度和下個顯示位置 */\n  const calendarListMove = (judge) => {\n    let len = data.stripCalendar.length;\n\n    const nextLen = len - 10;\n    const lastLen = len - nextLen;\n\n    if (judge) {\n      data.focusIndex = data.focusIndex - 6;\n    } else {\n      data.focusIndex = data.focusIndex + 6;\n    }\n\n    const focusItem = data.stripCalendar[data.focusIndex];\n\n    if (data.focusIndex <= lastLen) {\n      const { returnYear, returnMonth } = timeSwitch(data.stripCalendar[data.focusIndex].year, data.stripCalendar[data.focusIndex].month - 1, true);\n\n      let lastMonth = getStripCalendarData(returnYear, returnMonth);\n\n      data.stripCalendar = lastMonth.concat(data.stripCalendar);\n    }\n\n    if (data.focusIndex >= nextLen) {\n      const { returnYear, returnMonth } = timeSwitch(data.stripCalendar[data.focusIndex].year, data.stripCalendar[data.focusIndex].month - 1, false);\n      let nextMonth = getStripCalendarData(returnYear, returnMonth);\n      data.stripCalendar = data.stripCalendar.concat(nextMonth);\n    }\n\n    data.stripCalendar.forEach((item, index) => {\n      if (item.date === focusItem.date && item.month === focusItem.month && item.year === focusItem.year) {\n        data.focusIndex = index;\n      }\n    })\n      \n    calendarListFocus(data.focusIndex);\n  }\n\n  const selectDate = (item) => {\n    date.value = item.date;\n    month.value = item.month - 1;\n    year.value = item.year;\n\n    continuousOrReservedToggle();\n  }\n\n  /** 前往今日病歷 */\n  function goToMedicalRecordIndex(item) {\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n    const customerId = item.followUpMedicalRecord[0].detail[0].cureContent.customerId;\n\n    let url = router.resolve({\n      name: 'medicalRecordIndex',\n      params: {\n        customerId,\n        date: d,\n      }\n    })\n\n    window.open(url.href, '_blank')\n  }\n\n  /** 今日病歷數量 */\n  function historicalMedicalRecordLength(followUpMedicalRecord) {\n    let length = 0;\n    followUpMedicalRecord.forEach(item => {\n      length += item.detail.length;\n    });\n\n    return length;\n  }\n\n  // 同意書\n  const consenModalRef = ref(null);\n  let consenModal;\n\n  onMounted(() => {\n    consenModal = new Modal(consenModalRef.value);\n  })\n\n  const historicalDataByCustomerAndDate = ref([]);\n  const historicalDataList = ref([]);\n  const historicalDataIndex = ref(0);\n  let historicalDataCustomerId;\n  \n  /** 根據客戶、日期取得歷史的同意書紀錄 */\n  async function getHistoricalDataByCustomerAndDate(customerId) {\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    const url = `/api/Consent/GetInitCreateConsentRecordData?customerId=${customerId}&date=${d}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    historicalDataByCustomerAndDate.value = response.data[historicalDataIndex.value];\n    historicalDataList.value = response.data;\n  }\n\n  /** 選擇同意書 */\n  async function selectHistoricalData(inedx) {\n    historicalDataIndex.value = inedx;\n    historicalDataByCustomerAndDate.value = historicalDataList.value[historicalDataIndex.value];\n\n    if (historicalDataByCustomerAndDate.value.consentRecord) {\n      initHistoricalData(historicalDataByCustomerAndDate.value.consentRecord);\n    }\n\n    console.log(historicalDataByCustomerAndDate.value, 'consentRecordId');\n\n    // 判斷同意書簽名\n    const consent = historicalDataByCustomerAndDate.value.consentRecordId || null;\n\n    // 判斷歷史同意書簽名\n    const consentRecord = historicalDataByCustomerAndDate.value.consentRecord ? historicalDataByCustomerAndDate.value.consentRecord.id : null;\n\n    console.log(consent, consentRecord);\n\n    if (consent || consentRecord) {\n      await getCustomerSignature(consent || consentRecord);\n    } else {\n      customerSignature.value = null;\n    }\n  }\n\n  /** 同意書初始資料 */\n  function initHistoricalData(consentRecord) {\n\n    const {\n      doctorPropaganda,\n      patientConsultAndAnswer,\n      agreeTreatment,\n      agreeUsePhoto,\n      guardianId\n    } = consentRecord;\n\n    nextTick(() => {\n      let form = document.querySelector('form');\n\n      if (doctorPropaganda && form.elements['doctorDeclaration']) {\n        let doctorPropagandaArr = doctorPropaganda.split('■').filter(t => t !== '');\n\n        doctorPropagandaArr.forEach(item => {\n          form.elements['doctorDeclaration'][item - 1].checked = true;\n        })\n      }\n\n      if(patientConsultAndAnswer !== null && form.elements[\"patientConsultAndAnswer\"]) {\n        if (patientConsultAndAnswer === 1) {\n          form.elements[\"patientConsultAndAnswer\"][0].checked = true;\n        } else {\n          form.elements[\"patientConsultAndAnswer\"][1].checked = true;\n        }\n      }\n\n      if (agreeTreatment !== null && form.elements[\"agreeTreatment\"]) {\n        if (agreeTreatment) {\n          form.elements[\"agreeTreatment\"][0].checked = true;\n        } else {\n          form.elements[\"agreeTreatment\"][1].checked = true;\n        }\n      }\n\n      if (agreeUsePhoto !== null && form.elements[\"agreeUsePhoto\"]) {\n        if (agreeUsePhoto) {\n          form.elements[\"agreeUsePhoto\"][0].checked = true;\n        } else {\n          form.elements[\"agreeUsePhoto\"][1].checked = true;\n        }\n      }\n\n      if (guardianId !== null && form.elements[\"guardian\"]) {\n        if (guardianId === 'Father') {\n          form.elements[\"agreeUsePhoto\"][0].checked = true;\n        }\n\n        if (guardianId === 'Mother') {\n          form.elements[\"agreeUsePhoto\"][1].checked = true;\n        }\n\n        if (guardianId === 'Guardian') {\n          form.elements[\"agreeUsePhoto\"][2].checked = true;\n        }\n      }\n    })\n  }\n\n  /** 同意 */\n  async function agree() {\n    if (historicalDateOption.value.length !== 0) return null;\n\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    let form = document.querySelector('form');\n\n    let doctorDeclaration = '';\n\n    if (form.elements[\"doctorDeclaration\"]) {\n      form.elements[\"doctorDeclaration\"].forEach(item => {\n        if (!item.checked) return null;\n\n        doctorDeclaration += `${item.value}■`;\n      })\n    } else {\n      doctorDeclaration = null;\n    }\n\n    // patientConsultAndAnswer : 病人問題詢問與答覆\n\n    let patientConsultAndAnswer = null;\n\n    if (form.elements[\"patientConsultAndAnswer\"]) {\n      if (form.elements[\"patientConsultAndAnswer\"]['value'] === 'Yes') {\n        patientConsultAndAnswer = `1■${form.elements[\"patientConsultAndAnswer-content\"].value}`;\n      } else {\n        patientConsultAndAnswer = '0';\n      }\n    }\n\n    // agreeTreatment : 基於上述聲明，我同意不同意進行此治療\n\n    let agreeTreatment = true;\n\n    if (form.elements[\"agreeTreatment\"]) {\n      if (form.elements[\"agreeTreatment\"]['value'] !== 'Yes') {\n        agreeTreatment = false;\n      }\n    }\n\n    // agreeUsePhoto : 此外，我同意不同意 治療過程之拍照或錄影,可作為醫師教學及研究論文之用途。\n\n    let agreeUsePhoto = false;\n\n    if (form.elements[\"agreeUsePhoto\"]) {\n      if (form.elements[\"agreeUsePhoto\"]['value'] === 'Yes') {\n        agreeUsePhoto = true;\n      }\n    }\n\n    // guardianId : 本人為TYCOCO(病患姓名)之父親 母親 監護人\n\n    let guardianId = null;\n\n    if (form.elements[\"guardian\"]) {\n      guardianId = form.elements[\"guardian\"]['value'];\n    }\n\n    const postData = {\n      customerId: historicalDataCustomerId,\n      consentId: historicalDataList.value[historicalDataIndex.value].consentId,\n      patientConsultAndAnswer,\n      agreeTreatment,\n      agreeUsePhoto,\n      doctorPropaganda: doctorDeclaration,\n      guardianId,\n      agreeDate: d,\n      // agreeTime: time\n    };\n\n    const url = `/api/ConsentRecord/AgreeConsent`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'POST',\n      body: JSON.stringify(postData),\n    };\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    await getHistoricalDataByCustomerAndDate(historicalDataCustomerId);\n  }\n\n  /** 開啟同意書 */\n  const openConsentRefModal = async (item) => {\n    historicalDataIndex.value = 0;\n    historicalDateOption.value = [];\n    historicalDataCustomerId = item.customer.customerId;\n    await getHistoricalDataByCustomerAndDate(item.customer.customerId);\n\n    // initHistoricalData(historicalDataByCustomerAndDate.value.consentRecord);\n\n    if (historicalDataList.value[0].consentRecordId) {\n      getCustomerSignature(historicalDataList.value[0].consentRecordId);\n    } else {\n      customerSignature.value = null;\n    }\n\n    consenModal.show();\n  }\n\n  /** 同意書燈號判斷 */\n  function consenJudge(leistItem) {\n\n    if (!leistItem.needToSign) {\n      return 'bg-white';\n    }\n\n    if (!leistItem.agree) {\n      return 'bg-warning';\n    }\n\n    if (leistItem.agree) {\n      return 'bg-success';\n    }\n  }\n\n  const customerSignature = ref(null);\n\n  /** 根據同意書填寫紀錄取得客戶簽名 */\n  async function getCustomerSignature(id) {\n    const url = `/api/ConsentRecord/GetCustomerSignature?id=${id}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET',\n    };\n\n    const response = await fetchApi(url, options);\n\n    console.log(response);\n\n    customerSignature.value = response.data;\n  }\n\n  // 同意簽名\n  const signatureFunctionModalRef = ref(null);\n  let signatureFunctionModal;\n\n  onMounted(() => {\n    signatureFunctionModal = new Modal(signatureFunctionModalRef.value);\n  })\n\n  let canvas;\n  let context;\n\n  /** 開啟簽名 */\n  const openSignatureFunctionModal = () => {\n    if (historicalDateOption.value.length !== 0) return null;\n\n    if (!historicalDataByCustomerAndDate.value.consentRecordId) {\n      updateMessage('請先同意，再簽名');\n      return null;\n    }\n    canvas = document.getElementById('canvas');\n    context = canvas.getContext('2d');\n\n    context.strokeStyle = '#000';\n    context.lineJoin = 'round';\n    context.lineWidth = 3;\n\n    let lastX, lastY;\n\n    let isDrawing = false;\n\n    function handleMouseMove(event) {\n      // 判斷是否繪製\n      if (!isDrawing) {\n        return;\n      }\n\n      let x = event.offsetX;\n      let y = event.offsetY;\n\n      context.beginPath();\n      context.moveTo(lastX, lastY);\n      context.lineTo(x, y);\n      context.stroke();\n\n      lastX = x;\n      lastY = y;\n    }\n\n    canvas.addEventListener('mousedown', function(event) {\n      isDrawing = true;\n\n      lastX = event.offsetX;\n      lastY = event.offsetY;\n    });\n\n    canvas.addEventListener('mousemove', handleMouseMove);\n\n    canvas.addEventListener('mouseup', function() {\n      isDrawing = false;\n    });\n\n    canvas.addEventListener('mouseout', function() {\n      isDrawing = false;\n    });\n\n    consenModal.hide();\n    signatureFunctionModal.show();\n  }\n\n  // 清除簽名\n  function clearCanvas() {\n    context.clearRect(0, 0, canvas.width, canvas.height);\n  }\n\n  // 建立簽名\n  async function saveSignature() {\n    const dataURL = canvas.toDataURL();\n    const d = `${year.value}-${month.value + 1 <= 9 ?'0':''}${month.value + 1}-${date.value <= 9 ?'0':''}${date.value}`;\n\n    const signature = dataURL.split(',')[1];\n\n    const postData = {\n      customerId: historicalDataCustomerId,\n      signature,\n      date: d,\n    };\n\n    const url = `/api/ConsentRecord/SignConsent`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'POST',\n      body: JSON.stringify(postData),\n    };\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n    await getHistoricalDataByCustomerAndDate(historicalDataCustomerId);\n    await getCustomerSignature(historicalDataByCustomerAndDate.value.consentRecordId);\n\n    continuousOrReservedToggle();\n    closeSignatureFunctionModal();\n  }\n\n  /** 取消同意過的同意書 */\n  async function cancelConsent() {\n    const url = `/api/ConsentRecord/CancelConsent?consentRecordId=${historicalDataByCustomerAndDate.value.consentRecordId}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'POST'\n    }\n\n    const response = await fetchApi(url, options);\n\n    updateMessage(response.message);\n\n    if (response.statusCode >= 400) return null;\n\n    getHistoricalDataByCustomerAndDate(historicalDataCustomerId);\n  }\n  \n  /** 關閉簽名 */\n  function closeSignatureFunctionModal() {\n    clearCanvas();\n    consenModal.show();\n    signatureFunctionModal.hide();\n  }\n  \n  // 歷史病歷\n\n  const historicalMedicalRecordsRef = ref(null);\n  let historicalMedicalRecordsRefModel;\n\n  onMounted(() => {\n    historicalMedicalRecordsRefModel = new Modal(historicalMedicalRecordsRef.value);\n  })\n\n  const historicalMedicalRecordOptionFocusNum = ref(0);\n\n  const courseTypeSelected = ref([]);\n  const courseTypeWindow = ref(false);\n\n  const pagination = ref([]);  // 分頁\n  const maximumPages = ref(0); // 最大頁數\n\n  const minimumRange = ref(1); // 分頁最小範圍\n  const maximumRange = ref(3); // 分頁最大範圍\n\n  const paginationFocusNum = ref(1);\n\n  const laserRecord = ref([]);\n\n  const paginationFocusPage = ref(1);\n  let historicalMedicalRecordCustomerId = '';\n\n  /** 開啟歷史病歷 */\n  const openHistoricalMedicalRecordsRefModal = async (itme) => {\n    historicalMedicalRecordCustomerId = itme.customer.customerId;\n\n    await getCourseTypeData();\n    await getHistoricalMedicalRecordOption(courseTypeData.value, historicalMedicalRecordCustomerId);\n\n    if (Object.keys(historicalMedicalRecordOption.value).length === 0) {\n      updateMessage('目前沒有歷史病歷');\n      return null;\n    }\n\n    historicalMedicalRecordOptionFocusNum.value = 0;\n    courseTypeSelected.value = [];\n    paginationFocusPage.value = 1;\n    \n    minimumRange.value = 1;\n    maximumRange.value = 3;\n\n    paginationFocusNum.value = 1;\n\n    courseTypeSelected.value.push({id: 'all', name: '全部'});\n\n    initPagination();\n    selectHistoricalMedicalRecord(0);\n\n    historicalMedicalRecordsRefModel.show();\n  }\n\n  /** 開啟病歷類型下拉選單 */\n  const openCourseTypeWindow = () => {\n    if (courseTypeWindow.value) return null;\n    courseTypeWindow.value = true;\n\n    function close() {\n      courseTypeWindow.value = false;\n      document.removeEventListener('click', close);\n    }\n\n    document.addEventListener('click', close);\n  }\n\n  /** 選擇病歷類型 */\n  async function selectCourseType() {\n\n    let idArr = courseTypeSelected.value.map(item => item.id);\n\n    if (idArr.some(item => item === 'all' || idArr.length === 0)) {\n      await getHistoricalMedicalRecordOption(courseTypeData.value, historicalMedicalRecordCustomerId);\n      return null;\n    }\n\n    await getHistoricalMedicalRecordOption(courseTypeSelected.value, historicalMedicalRecordCustomerId);\n  }\n\n  const historicalMedicalRecordTagData = ref([]); // 歷史病歷的標籤資料\n  const historicalMedicalRecordTagIndex = ref(0); // 歷史病歷的標籤 index\n\n  /** 選擇歷史病歷的標籤 */\n  async function selectHistoricalMedicalRecordTag(index) {\n    historicalMedicalRecordTagIndex.value = index;\n\n    await getHistoricalMedicalRecordData(historicalMedicalRecordTagData.value[index].medicalRecordId);\n\n    historicalMedicalRecordDataCollation(historicalMedicalRecordData.value);\n  }\n\n  /** 取得歷史病歷的標籤資料 */\n  async function getHistoricalMedicalRecordTagData(historicalMedicalRecord) {\n\n    const {\n      appointmentDate,\n      courseType,\n      operatorId,\n    } = historicalMedicalRecord;\n\n    const url = `/api/MedicalRecord/GetHistoricalMedicalRecordTagData?customerId=${historicalMedicalRecordCustomerId}&courseType=${courseType}&date=${appointmentDate}&operatorId=${operatorId}`;\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    historicalMedicalRecordTagData.value = response.data;\n\n    historicalMedicalRecordTagIndex.value = 0;\n\n    await getHistoricalMedicalRecordData(historicalMedicalRecordTagData.value[historicalMedicalRecordTagIndex.value].medicalRecordId);\n\n    historicalMedicalRecordDataCollation(historicalMedicalRecordData.value);\n  }\n\n  \n\n  /** 歷史病歷資料整理 */\n  function historicalMedicalRecordDataCollation(response) {\n\n    console.log(response);\n\n    getEmployeeStampData(response.medicalRecord.operator);\n    \n    const {\n      voucherOrderDetails,\n      subcourseData,\n      medicalRecord,\n      anestheticOrderDetail,\n      coursePartOrderDetails,\n      bodyPartsOptions,\n      careRecord,\n      repairCreamPrescribeMedicineRecords,\n      prescribeMedicineRecords,\n      doctorFreeRecord,\n      customerDemandNames,\n      laserRecordRelativeData,\n      anestheticUsageRecordData,\n      doctorDetailAnswerData,\n      operatorName,\n    } = response;\n\n    // 療程專用卷 - 整理\n\n    // 重複部位中各別取唯一部位 ID\n    const voucherOrderId = [];\n\n    voucherOrderDetails.forEach(item => {\n      const judge = voucherOrderId.some(t => t === item.bodyPartId)\n\n      if (judge) return null;\n      voucherOrderId.push(item.bodyPartId);\n    })\n    \n    let voucherOrder = voucherOrderId.map(itemA => {\n      const bodyPartName = response.bodyPartsOptions.find(itemB => itemA === itemB.id);\n\n      return {\n        bodyPartId: itemA,\n        bodyPartName: bodyPartName ? bodyPartName.name : null,\n        voucherId: [],\n      }\n    })\n\n    voucherOrderDetails.forEach(itemA => {\n      voucherOrder.forEach(itemB => {\n        if (itemA.bodyPartId === itemB.bodyPartId) {\n          itemB.voucherId.push(itemA.voucherId);\n        }\n      })\n    })\n\n    // 收費明細\n\n    let feeDetails = [];\n\n    // 收費明細 - 麻藥費用\n    if (medicalRecord.anesthesiaSituation === \"Anesthesia\") {\n      feeDetails.push({\n        chargeType: 'anesthesia',\n        chargeName: '麻藥費用',\n        anesthesiaSituation: \"Anesthesia\",\n        price: anestheticOrderDetail.price === 0 ? '免費' : anestheticOrderDetail.price,\n      });\n    }\n    // 收費明細 - 現金收費\n\n    // 單次 - 一般部位\n\n    const onceData = {\n      chargeType: 'cash',\n      chargeName: '單次費用',\n      data: [],\n    }\n\n    coursePartOrderDetails.forEach(item => {\n      if (item.priceType === 'Once' && item.bodyPartId !== \"Other\") {\n        const bodyPartName = bodyPartsOptions.find(itemA => itemA.id === item.bodyPartId);\n        onceData.data.push({\n          bodyPartName: bodyPartName ? bodyPartName.name : null,\n          price: item.price,\n        });\n      }\n    })\n\n    // 單次 - 其他部位\n    coursePartOrderDetails.forEach(item => {\n      if (item.priceType === 'Once' && item.bodyPartId == \"Other\") {\n        onceData.data.push({\n          bodyPartName: `其他/ ${item.otherPartName}`,\n          price: item.price,\n        });\n      }\n    })\n\n    if (onceData.data.length !== 0) {\n      feeDetails.push(onceData);\n    }\n\n    // 體驗\n\n    const experienceData = {\n      chargeType: 'cash',\n      chargeName: '體驗費用',\n      data: [],\n    }\n\n    coursePartOrderDetails.forEach(item => {\n      if (item.priceType === 'Experience') {\n        experienceData.data.push({\n          bodyPartName: bodyPartsOptions.find(itemA => itemA.id === item.bodyPartId).name,\n          price: item.price,\n        });\n      }\n    })\n\n    if (experienceData.data.length !== 0) {\n      feeDetails.push(experienceData);\n    }\n\n    // 押金\n\n    const depositData = {\n      chargeType: 'cash',\n      chargeName: '押金費用',\n      data: [],\n    }\n\n    coursePartOrderDetails.forEach(item => {\n      if (item.priceType === 'Deposit') {\n        depositData.data.push({\n          bodyPartName: bodyPartsOptions.find(itemA => itemA.id === item.bodyPartId).name,\n          price: item.price,\n        });\n      }\n    })\n\n    if (depositData.data.length !== 0) {\n      feeDetails.push(depositData);\n    }\n\n    // 雷射能量\n    laserRecord.value = [];\n\n    laserRecordRelativeData.forEach(item => {\n      let Refrigerant1;\n      let Refrigerant2;\n\n      item.laserRecordDetailData.forEach(item => {\n        if (item.laserEquipmentFeatureId === 'Refrigerant1') {\n          Refrigerant1 = item.value || null;\n        }\n\n        if (item.laserEquipmentFeatureId === 'Refrigerant2') {\n          Refrigerant2 = item.value || null;\n        }\n      })\n\n      laserRecord.value.push({\n        ...item,\n        showLaserDiagnosis: [...item.diagnosticSymptoms, ...item.parts, ...item.laserEquipmentCustomizedPart],\n        Refrigerant1,\n        Refrigerant2\n      })\n    })\n\n    // 醫師詳答 - 整理\n    const doctorDetailAnswerDataSortingOut = [];\n    const laser = [];\n\n    doctorDetailAnswerData.forEach(item => {\n      if (item.groupName === '雷射能量') {\n        laser.push(item);\n        return null;\n      }\n\n      doctorDetailAnswerDataSortingOut.push(item);\n    })\n\n    doctorDetailAnswerDataSortingOut.unshift(laser);\n\n    console.log(doctorDetailAnswerDataSortingOut);\n    \n    historicalMedicalRecordData.value = {\n      operatorName,\n      voucherOrder,\n      subcourseData,\n      feeDetails,\n      careRecord, // 關心紀錄\n      ...medicalRecord,\n      notTreat: medicalRecord.notTreat,\n      repairCreamPrescribeMedicineRecords,\n      prescribeMedicineRecords,\n      customerDemandNames,\n      cancelled: doctorFreeRecord ? !doctorFreeRecord.cancelled : null,\n      reason: doctorFreeRecord ? doctorFreeRecord.reason : null,\n      anestheticUsageRecordData,\n      doctorDetailAnswerData: doctorDetailAnswerDataSortingOut,\n    }\n\n    // 控台確認\n    consoleConfirmJudge.value = medicalRecord.consoleConfirmed;\n  }\n\n  /** 選擇病歷紀錄 */\n  function selectHistoricalMedicalRecord(index) {\n\n    console.log(historicalMedicalRecordOption.value);\n    historicalMedicalRecordOptionFocusNum.value = index;\n    const historicalMedicalRecord = historicalMedicalRecordOption.value[index];\n\n    getHistoricalMedicalRecordTagData(historicalMedicalRecord);\n  }\n\n  /** 分頁初始 */\n  function initPagination() {\n\n    maximumPages.value = historicalMedicalRecordOption.value.length / 10;\n\n    if (maximumPages.value <= 1) return null;\n\n    maximumPages.value = Math.ceil(maximumPages.value);\n\n    for(let i = 1; i <= maximumPages.value; i++) {\n      pagination.value.push(i);\n    }\n  }\n  \n  /** 前一頁 */\n  function previousPage() {\n    if (minimumRange.value === 1) return null;\n\n    minimumRange.value -= 3;\n    maximumRange.value -= 3;\n  } \n\n  /** 下一頁 */\n  function nextPage() {\n    let paginationNum = pagination.value.length / 3;\n    let maximumRangeNum = maximumRange.value / 3;\n\n    if (paginationNum <= maximumRangeNum) return null;\n    minimumRange.value += 3;\n    maximumRange.value += 3;\n  }\n\n  /** 前往最後一頁 */\n  function goLastPage() {\n    let paginationNum = pagination.value.length / 3;\n    minimumRange.value = Math.ceil(paginationNum) * 3 - 2;\n    maximumRange.value = Math.ceil(paginationNum) * 3;\n\n    paginationFocusNum.value = pagination.value.length;\n  }\n\n  let calculateFeeValue = 0;\n\n  /** 計算麻藥費用 */\n  function calculateFee(anestheticFee) {\n    const anestheticFeeItem = commonDataList.value.anestheticFees.find(item => item.id === anestheticFee);\n\n    if (calculateFeeValue === 0) {\n      total.value += anestheticFeeItem.fee;\n    } else {\n      total.value -= calculateFeeValue;\n      total.value += anestheticFeeItem.fee;\n    }\n\n    calculateFeeValue = anestheticFeeItem.fee;\n  }\n\n  /** 選擇病歷基本資料和收費 */\n  function selectUpdateBasicDataAndFeeData(item) {\n    otherBodyPartLength.value++;\n    otherBodyParts.value.push({\n      part: item.part,\n      scope: item.scope,\n      price: item.price\n    })\n\n    paymentMethodData.value.push({\n      bodyPartId: \"Other\",\n      paymentMethod: [{id: 'Cash', name: '現金支付', sequence: 3, active: true}],\n    })\n\n    paymentMethodSwitch.value.push({\n      bodyPartId: \"Other\",\n      switch: false,\n    })\n\n    allBodyParts.value.push({\n      id: \"Other\",\n      name: \"其他\",\n      part: item.part,\n      price: item.price,\n      scope: item.scope\n    });\n\n    cashData.value.push([]);\n    \n    cashData.value[cashData.value.length - 1].push(\n      {\n        bodyPartId: \"Other\",\n        paymentMethodId: \"Cash\",\n        priceType: \"Once\",\n        received: false,\n        price: item.price,\n        otherPartName: item.part,\n        otherPartScope: item.scope,\n        depositData: [],\n      }\n    );\n  }\n\n  const historicalDateOption = ref([]);\n\n  /** 歷史同意書日期 */\n  async function getHistoricalDateOption(customerId) {\n\n    const url = `/api/ConsentRecord/GetHistoricalDateOption?customerId=${customerId}`\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    historicalDateOption.value = response.data;\n  }\n\n  let historicalConsentCustomerId;\n\n  /** 修改歷史同意書日期 */\n  async function changeHistoricalDate() {\n    historicalDataIndex.value = 0;\n    await getConsentRecordHistoricalDataByCustomerAndDate(historicalConsentCustomerId, historicalDate.value);\n  }\n\n  /** 根據客戶、日期取得歷史的同意書紀錄 */\n  async function getConsentRecordHistoricalDataByCustomerAndDate(customerId, date) {\n\n    console.log(customerId, date);\n\n    const url = `/api/ConsentRecord/GetHistoricalDataByCustomerAndDate?customerId=${customerId}&date=${date}`\n\n    const token = getTokenFromCookie();\n\n    const options = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\" : `Bearer ${token}`\n      },\n      method: 'GET'\n    }\n\n    const response = await fetchApi(url, options);\n\n    historicalDataByCustomerAndDate.value = response.data[historicalDataIndex.value];\n    historicalDataList.value = response.data;\n  }\n\n  const historicalDate = ref(null);\n\n  /** 開啟歷史同意書 */\n  async function openHistoricalConsentRefModal(item) {\n\n    historicalDataIndex.value = 0;\n\n    historicalConsentCustomerId = item.customer.customerId;\n\n    await getHistoricalDateOption(item.customer.customerId);\n\n    if (historicalDateOption.value.length == 0) {\n      updateMessage('目前沒有歷史同意書');\n      return null;\n    }\n\n    historicalDate.value = historicalDateOption.value[0];\n\n    await getConsentRecordHistoricalDataByCustomerAndDate(item.customer.customerId, historicalDateOption.value[0]);\n\n    initHistoricalData(historicalDataByCustomerAndDate.value.consentRecord);\n\n    selectHistoricalData(0);\n\n    consenModal.show();\n  }\n\n  /** 前往約診 */\n  async function toAppointment(item) {\n\n    const { customerId, customerName, customerBirthday, beauticianNickname } = item.customer;\n\n    selectedCustomer.value = {\n      id: customerId,\n      name: customerName,\n      birthday: customerBirthday,\n      beauticianNickname: beauticianNickname,\n    };\n\n    router.push('appointment');\n  }\n\n  async function init() {\n    getCurrentMonth();\n    stripCalendarInit();\n    await getDoctors();\n    resetSelectedDoctor();\n    // await getDaysOutpatientData();\n    await getOutstandingData();\n    await getDoctorStampData();\n    await continuousOrReservedToggle();\n    await getCourseTypeData();\n\n    if (department.value === 'AestheticMedicine') {\n      courseTypeData.value = courseTypeData.value.filter(item => item.id !== 'Beauty');\n    }\n\n    if (department.value === 'Beauty') {\n      courseTypeData.value = courseTypeData.value.filter(item => item.id === 'Beauty');\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n// 初始手風琴 accordion\n  .toggle-style {\n    overflow: hidden;\n    max-height: 0px;\n    transition: max-height 0.3s ease-out;\n  }\n\n  .toggle-icon-style {\n    transition: transform 0.3s ease-out;\n    transform: rotate(0deg);\n  }\n\n  // 展開手風琴 accordion\n  .toggle-active {\n\n    .toggle-card {\n      max-height: 1000px;\n    }\n\n    .toggle-card-icon {\n      transform: rotate(180deg);\n    }\n  }\n  // 初始手風琴 accordion\n  .toggle-card {\n      overflow: hidden;\n      max-height: 0px;\n      transition: max-height 0.3s ease-out;\n  }\n\n  .toggle-card-icon {\n    transition: transform 0.3s ease-out;\n    transform: rotate(0deg);\n  }\n\n  // 醫師頭像\n  .head {\n    display: inline-block;\n    border-radius: 50%;\n    text-decoration: none;\n    position: relative;\n\n    .head-img-border {\n      border: 1px solid #fff;\n      border-radius: 50%;\n      width: 46px;\n      height: 46px;\n    }\n\n    &:hover::before,\n    &.active::before {\n      content: \"\";\n      width: 44px;\n      height: 44px;\n      position: absolute;\n      border-radius: 50%;\n      opacity: 0.5;\n      background-color: #000000;\n      transform: translate(-50%, -50%);\n      left: 50%;\n      top: 50%;\n    }\n\n    &.active:hover img {\n      filter: none;\n    }\n\n    &.active .head-name,\n    &:hover .head-name {\n      display: block;\n    }\n\n    .head-name {\n      color: rgb(255, 255, 255);\n      position: absolute;\n      transform: translate(-50%, -50%);\n      left: 50%;\n      top: 50%;\n      z-index: 10;\n      display: none;\n    }\n\n    &:hover img {\n      filter: blur(2px);\n    }\n  }\n\n  .otherBodyPartTable {\n    width: 100%;\n\n    td, th {\n      padding: 8px 20px;\n    }\n\n    th {\n      border-bottom: 1px solid #A9A9A9;\n    }\n\n    td {\n      border-bottom: 1px solid #A9A9A9;\n    }\n    \n    tr:last-child td {\n      border-bottom: 0px;\n    }\n\n    tr:last-child td:first-child {\n      border-bottom: 0px;\n      border-bottom-left-radius: 15px;\n    }\n\n    tr:last-child td:last-child {\n      border-bottom: 0px;\n      border-bottom-right-radius: 15px;\n    }\n\n    tbody tr:hover {\n      background: #0A5866;\n      cursor: pointer;\n      color: #fff;\n    }\n  }\n\n  .bg-green {\n    background: #00C853;\n  }\n\n  .bg-mark {\n    background: #E06656;\n  }\n\n  .nickName-icon {\n    width: 22px;\n    height: 22px;\n    font-size: 12px; \n    font-weight: 700;\n  }\n\n  .text-mark {\n    color: #E06656;\n  }\n\n  .scroll {\n    width: 598px;\n    overflow: auto;\n\n    // &::-webkit-scrollbar { width: 4px; height: 4px; }\n    &::-webkit-scrollbar { display: none; }\n    // &::-webkit-scrollbar-track-piece { background: $amis-gray2; border-radius: 20px; }\n    // &::-webkit-scrollbar-thumb { background: $amis-main-dark2; border-radius: 20px; }\n    // &::-webkit-scrollbar-thumb:hover { background: $amis-main-dark2; }\n  }\n\n  .no-focus-outline:focus-visible {\n    outline: 0;\n  }\n\n  .slider {\n    transition: all 0.5s;\n    border-radius: 20px;\n    display: inline-block;\n    position: absolute;\n    background-color: #0A5866;\n    left: 4px;\n    color: transparent;\n    z-index: 60;\n  }\n\n  .activeds {\n    left: 50%;\n  }\n</style>\n","import script from \"./trackIndex.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./trackIndex.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./trackIndex.vue?vue&type=style&index=0&id=5dfa1678&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\shang\\\\OneDrive\\\\桌面\\\\amis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5dfa1678\"]])\n\nexport default __exports__"],"names":["track","inject","textConversionTool","alertMessage","fetchFunction","accordions","accordionToggle","fetchApi","getTokenFromCookie","Employee","employeeState","getAllDoctorData","getBeauticians","allDoctorData","beauticiansData","toRefs","LeaveRecord","leaveRecordState","getLeaveRecordTagData","getInitLeaveRecordData","createLeaveRecord","leaveRecordTagData","initLeaveRecordData","MedicalRecord","medicalRecordState","getChangeOperatorData","getDepartmentFollowUpDataBySearchCondition","getEmployeeStampData","getOtherPartHistory","getInitExtraMedicalRecordData","getConsoleConfirmTagData","changeSubcourseOperator","getDoctorStampData","getHistoricalMedicalRecordOption","getHistoricalMedicalRecordData","changeOperatorData","employeeStampData","otherPartHistoryData","initExtraMedicalRecordData","consoleConfirmTagData","doctorStampData","historicalMedicalRecordOption","historicalMedicalRecordData","Course","courseState","getCourseOptionsByType","courseOptionsByType","courseType","courseTypeState","getCourseTypeData","courseTypeData","prescribeMedicineRecord","prescribeMedicineRecordState","getPrescribeMedicineRecord","getByUpdateMedicalRecord","prescribeMedicineRecordData","router","useRouter","trackState","getDoctors","resetSelectedDoctor","getCurrentMonth","continuousOrReservedToggle","detailedTrackInformationData","detailedInformationInit","department","year","month","date","doctorData","selectedDoctor","filterQueryStatus","trackContent","convertTimeFormatDeleteSecond","deleteTTimeFormat","store","appointmentState","selectedCustomer","updateMessage","data","reactive","customer","name","tel","birth","beautician","courseTypeId","focusIndex","continuousOrReservedStatus","appointmentBodyPartsWindow","createCustomerModalSuccess","historyCourseWindow","ref","openHistoryCourseWindow","value","close","document","removeEventListener","addEventListener","editDoctorModalRef","editDoctorModal","quantityTableModalRef","quantityTableModal","extraModalRef","extraModal","endOfTreatmentModalRef","endOfTreatmentModal","photoRecordModalRef","AIQModalRef","AIQModal","consoleConfirmationModalRef","consoleConfirmationModal","customerNeedsModalRef","customerNeedsModal","docterOptions","editDoctor","selectedEditDoctorDataIndex","departmentToggle","async","status","filter","item","id","searchDetailedInformation","birthday","cellPhone","customerName","customerBirthday","customerCellPhone","d","response","message","openEditDoctorModal","customerId","operatorId","show","selectEditDoctorData","index","editDoctorConfirmChanges","url","PATCHData","medicalRecordId","token","options","headers","method","body","JSON","stringify","statusCode","hide","customerStoredValue","getCustomerStoredValue","openQuantityTableModal","getPaymentMethod","extraModalData","commonDataList","bodyPartsOptions","activityData","cashData","voucherInput","oweVoucherInput","voucherOrderDetailData","bodyParts","allBodyParts","total","otherBodyPartLength","otherBodyParts","otherBodyPartJudge","noDataForOtherParts","paymentMethodData","paymentMethodSwitch","paymentMethods","commonDataListForOhterBodypart","paymentMethodsForOtherBodyparts","anestheticInfo","openExtraModal","followUpMedicalRecord","detail","cureContent","commonData","parse","priceTypes","beauticianNickname","courseId","anesthesiaType","comment","anestheticFee","received","selectedBodyParts","event","checked","target","newNoDataForOtherParts","itemA","newNoDataForOtherPartsLen","length","addItem","splice","bodyPartId","paymentMethod","sequence","active","oweAmount","deleteItem","find","includes","i","indexOf","deleteAmount","priceType","depositData","forEach","amountOfMoney","price","push","part","scope","switch","paymentMethodId","otherPartName","otherPartScope","otherBodyPartInputBlur","len","otherBodyScopeInputBlur","addOtherBodyPartLength","deleteOtherBodyPartLength","deleteAppointmentBodyPartsItem","getBodyPart","getAnestheticInfo","changeCourseType","anestheticFees","changeCourseId","openPaymentMethodOption","indexClicked","judge","bodyPartsWindow","openAppointmentBodyPartsWindow","deleteSelectedPaymentMethod","selectedPaymentMethod","prizeId","prizeData","couponNumber","deleteActivityItem","addActivityItem","changePriceType","voucherType","voucherTypes","addDepositInput","arr","some","x","deleteDepositInput","voucherTypesJudge","cashInputBlur","cashDataItem","added","isNaN","parseInt","calculateFeeValue","otherBodyIndex","confirmExtra","otherParts","map","anesthetic","coursePartOrderDetailData","coursePartOrderDetailJudge","paymentMethodJudge","itemB","voucherOrderDetail","oweVoucherSituationData","couponOrderDetailData","couponOrderDetailDataJudge","anesthesiaSituation","postData","departmentId","operator","anestheticOrderDetailData","anestheticFeeId","fee","accordion","toggleCustomerData","leaveRecordTagDataNum","endOfTreatmentData","endOfTreatmentCustomerId","openEndOfTreatmentModal","leaveRecordTagItem","endOfTreatmentDataCollation","leaveRecord","largeRepairCreamAmount","smallRepairCreamAmount","getR","needGiveawayJudgeValue","giveaways","leaveRecordGiveaways","beauticians","small","large","medicineId","amount","reserveNextTime","needGiveaway","newCustomerAddLine","remindReceptionistFee","sonophoresis","selectLeaveRecordTagData","giveawayWindow","openGiveawayWindow","deleteSelectedGiveaway","needGiveawayJudge","beforeEndOfTreatmentModalRef","beforeEndOfTreatmentModal","checkAnySubcourseNoBeautician","anySubcourseNoBeautician","executionEndOfTreatment","updateMedicalRecordData","prescribeMedicineData","medicineGroupId","takeMedicineFrequencyId","updateMedicalRecordResponse","changeGetR","console","log","onMounted","Modal","openPhotoRecordModal","openAIQModal","consoleConfirmTagDataIndex","consoleConfirmJudge","consoleConfirmCustomerId","openConsoleConfirmationModal","historicalMedicalRecordDataCollation","consoleConfirm","selectConsoleConfirmTag","allConsoleConfirmJudge","Judge","consoleConfirmed","every","customerNeedsData","customerNeedsCourseType","customerNeedsCheckboxData","customDemands","customDemand","customerNeedsCustomerId","deleteCustomDemands","openCustomerNeedsModal","getInitCustomerDemandData","optionsKey","Object","keys","customerDemandOptions","customerDemandData","addCustomDemand","deleteCustomDemand","confirmCustomDemand","oldCustomDemands","oldCustomDemandId","newCustomDemands","customizedDemandToCreate","groupId","newDeleteCustomDemands","customizedDemandToDelete","customerNeedsCourseTypeChange","medicalRecordIdData","lightsJudge","leftTimeJudge","leftTime","endTimeOfTreatmentJudge","endTimeOfTreatment","showOrHideDoctorData","item2","item1","select","outstandingData","getOutstandingData","switchToDiagnosisOrDetails","monthNumtoEn","setPeriod","attributes","newValue","filterQueryReset","continuousOutpatientNum","isAppointment","morning","afternoon","evening","toggleCard","className","maxHeight","style","open","init","stripCalendarInit","currentMonth","getStripCalendarData","nextLen","lastLen","returnYear","returnMonth","timeSwitch","lastMonth","concat","nextMonth","stripCalendar","calendarListFocus","num","focus","nextTick","items","querySelectorAll","offsetWidth","scroll","querySelector","scrollTo","left","behavior","time","Date","dayEn","setHours","getHours","allDate","getDate","getDay","day","calendarListMove","focusItem","selectDate","goToMedicalRecordIndex","resolve","params","window","href","historicalMedicalRecordLength","consenModalRef","consenModal","historicalDataByCustomerAndDate","historicalDataList","historicalDataIndex","historicalDataCustomerId","getHistoricalDataByCustomerAndDate","selectHistoricalData","inedx","consentRecord","initHistoricalData","consent","consentRecordId","getCustomerSignature","customerSignature","doctorPropaganda","patientConsultAndAnswer","agreeTreatment","agreeUsePhoto","guardianId","form","elements","doctorPropagandaArr","split","t","agree","historicalDateOption","doctorDeclaration","consentId","agreeDate","openConsentRefModal","consenJudge","leistItem","needToSign","signatureFunctionModalRef","signatureFunctionModal","canvas","context","openSignatureFunctionModal","lastX","lastY","getElementById","getContext","strokeStyle","lineJoin","lineWidth","isDrawing","handleMouseMove","offsetX","y","offsetY","beginPath","moveTo","lineTo","stroke","clearCanvas","clearRect","width","height","saveSignature","dataURL","toDataURL","signature","closeSignatureFunctionModal","cancelConsent","historicalMedicalRecordsRef","historicalMedicalRecordsRefModel","historicalMedicalRecordOptionFocusNum","courseTypeSelected","courseTypeWindow","pagination","maximumPages","minimumRange","maximumRange","paginationFocusNum","laserRecord","paginationFocusPage","historicalMedicalRecordCustomerId","openHistoricalMedicalRecordsRefModal","itme","initPagination","selectHistoricalMedicalRecord","openCourseTypeWindow","selectCourseType","idArr","historicalMedicalRecordTagData","historicalMedicalRecordTagIndex","selectHistoricalMedicalRecordTag","getHistoricalMedicalRecordTagData","historicalMedicalRecord","appointmentDate","medicalRecord","voucherOrderDetails","subcourseData","anestheticOrderDetail","coursePartOrderDetails","careRecord","repairCreamPrescribeMedicineRecords","prescribeMedicineRecords","doctorFreeRecord","customerDemandNames","laserRecordRelativeData","anestheticUsageRecordData","doctorDetailAnswerData","operatorName","voucherOrderId","voucherOrder","bodyPartName","voucherId","feeDetails","chargeType","chargeName","onceData","experienceData","Refrigerant1","Refrigerant2","laserRecordDetailData","laserEquipmentFeatureId","showLaserDiagnosis","diagnosticSymptoms","parts","laserEquipmentCustomizedPart","doctorDetailAnswerDataSortingOut","laser","groupName","unshift","notTreat","cancelled","reason","Math","ceil","previousPage","nextPage","paginationNum","maximumRangeNum","goLastPage","calculateFee","anestheticFeeItem","selectUpdateBasicDataAndFeeData","getHistoricalDateOption","historicalConsentCustomerId","changeHistoricalDate","getConsentRecordHistoricalDataByCustomerAndDate","historicalDate","openHistoricalConsentRefModal","toAppointment","__exports__"],"sourceRoot":""}