"use strict";(self["webpackChunkamis"]=self["webpackChunkamis"]||[]).push([[299],{1299:function(e,l,a){a.r(l),a.d(l,{default:function(){return he}});var o=a(6252),t=a(2262),s=a(3577),n=a(9963),c=a(8877);const d={class:"container"},i=(0,o._)("h3",{class:"mb-5"},"員工管理",-1),m=(0,o._)("h4",{class:"mb-2"},"員工清單",-1),r={class:"d-flex justify-content-end mb-2"},u={class:"table"},p=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"姓名"),(0,o._)("th",{scope:"col"},"小名"),(0,o._)("th",{scope:"col"},"職稱"),(0,o._)("th",{scope:"col"},"電話"),(0,o._)("th",{scope:"col"},"到職日期"),(0,o._)("th",{class:"text-center",scope:"col"},"編輯")])],-1),b={class:"align-middle"},_={class:"align-middle"},v={class:"align-middle"},y={class:"align-middle"},f={class:"align-middle"},h={class:"text-center"},w={class:"btn-group",role:"group","aria-label":"Basic example"},D=["onClick"],k=["onClick"],g={class:"modal-dialog"},x={class:"modal-content"},I={class:"modal-header"},C={class:"modal-title",id:"exampleModalLabel"},E=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body px-1"},A={class:"row mb-3"},M=(0,o._)("label",{for:"name",class:"col-sm-2 col-form-label"},"姓名",-1),N={class:"col-sm-10"},V={class:"row mb-3"},z=(0,o._)("label",{for:"userId",class:"col-sm-2 col-form-label"},"帳號",-1),L={class:"col-sm-10"},S={class:"row mb-3"},H=(0,o._)("label",{for:"password",class:"col-sm-2 col-form-label"},"密碼",-1),B={class:"col-sm-10"},j={class:"row mb-3"},T=(0,o._)("label",{for:"nickname",class:"col-sm-2 col-form-label"},"小名",-1),q={class:"col-sm-10"},R={class:"row mb-3"},K=(0,o._)("label",{for:"departmentId",class:"col-sm-2 col-form-label"},"部門",-1),Y={class:"col-sm-10"},F={class:"d-flex align-items-center h-100"},G={class:"form-check form-check-inline"},O=(0,o._)("label",{class:"form-check-label",for:"AestheticMedicine"},"醫美部",-1),$={class:"form-check form-check-inline"},J=(0,o._)("label",{class:"form-check-label",for:"Beauty"},"美容部",-1),P={class:"row mb-3"},Q=(0,o._)("label",{for:"jobTitle",class:"col-sm-2 col-form-label"},"職稱",-1),W={class:"col-sm-10"},X=["value"],Z={class:"row mb-3"},ee=(0,o._)("label",{for:"phoneNumber",class:"col-sm-2 col-form-label"},"電話",-1),le={class:"col-sm-10"},ae={class:"row mb-3"},oe=(0,o._)("label",{for:"hireDate",class:"col-sm-2 col-form-label"},"到職日期",-1),te={class:"col-sm-10"},se={class:"row align-items-center mb-3"},ne=(0,o._)("label",{for:"color",class:"col-sm-2 col-form-label"},"顏色",-1),ce={class:"col-sm-10"},de={class:"modal-footer px-1"},ie=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),me={class:"modal-dialog"},re={class:"modal-content"},ue=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除員工資料"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pe={class:"modal-body"},be={class:"text-danger"},_e={class:"modal-footer"},ve=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);var ye={__name:"employeeManagement",setup(e){const l=(0,o.f3)("alertMessage"),{updateMessage:a}=l,ye=(0,o.f3)("fetchFunction"),{fetchApi:fe,getTokenFromCookie:he}=ye,we=(0,t.iH)(null),De=(0,t.iH)(null);let ke,ge;const xe=(0,t.iH)([]),Ie=(0,t.iH)({deleteitem:"",modalData:{name:null,nickname:null,role:null,hireDate:null,phoneNumber:null,nurseLicense:!0,color:"#000000",doctorSequence:0,active:!0,userId:null,password:null},departmentId:"",roleData:[],isAddEmployee:!0}),Ce=(0,o.f3)("Employee"),{employeeState:Ee,addEmployee:Ue,editEmployee:Ae,getInitUpdateEmployeeData:Me,getEmployeeSettingData:Ne}=Ce,{initUpdateEmployeeData:Ve,employeeSettingData:ze}=(0,t.BK)(Ee),Le=e=>{Ie.value.deleteitem=Object.assign({},e),ge.show()},Se=async()=>{let e;if(e=Ie.value.isAddEmployee?await Ue({...Ie.value.modalData,departmentIdList:xe.value}):await Ae({...Ie.value.modalData,departmentIdList:xe.value}),e.statusCode>=400)return a(e.message),null;a(e.message),Ne(),ke.hide()},He=async(e,l)=>{if(Ie.value.isAddEmployee=e,Ie.value.isAddEmployee)Be();else{await Me(l.id),console.log(Ve.value);const{id:e,name:a,nickname:o,role:t,hireDate:s,resignationDate:n,phoneNumber:c,nurseLicense:d,color:i,doctorSequence:m,active:r}=Ve.value.employee;Ie.value.modalData={employeeId:e,name:a,nickname:o,role:t,hireDate:s,resignationDate:n,phoneNumber:c,nurseLicense:d,color:i,doctorSequence:m,active:r,password:Ve.value.password,userId:Ve.value.userId},xe.value=Ve.value.departmentIdList}ke.show()};function Be(){Ie.value.modalData={name:null,nickname:null,role:null,hireDate:null,phoneNumber:null,nurseLicense:!0,color:"#000000",doctorSequence:0,active:!0,userId:null,password:null},Ie.value.departmentId="",xe.value=[]}async function je(){const e="/api/Role/GetAllEmployeeRole",l=he(),a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},method:"GET"},o=await fe(e,a);Ie.value.roleData=o.data}function Te(){je(),Ne()}return Te(),(0,o.bv)((()=>{ke=new c.u_(we.value),ge=new c.u_(De.value)})),(e,l)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[i,m,(0,o._)("div",r,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l[0]||(l[0]=e=>He(!0))},"新增公司員工")]),(0,o._)("table",u,[p,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,t.SU)(ze),(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",b,(0,s.zw)(e.name),1),(0,o._)("td",_,(0,s.zw)(e.nickname),1),(0,o._)("td",v,(0,s.zw)(e.roleName),1),(0,o._)("td",y,(0,s.zw)(e.phoneNumber),1),(0,o._)("td",f,(0,s.zw)(e.hireDate),1),(0,o._)("td",h,[(0,o._)("div",w,[(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:l=>{Le(e)}},"刪除",8,D),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l=>He(!1,e)},"編輯",8,k)])])])))),128))])])]),(0,o._)("div",{class:"modal fade",ref_key:"modalRef",ref:we},[(0,o._)("div",g,[(0,o._)("div",x,[(0,o._)("div",I,[(0,o._)("h5",C,(0,s.zw)(Ie.value.isAddEmployee?"新增":"編輯")+"公司員工",1),E]),(0,o._)("div",U,[(0,o._)("form",null,[(0,o._)("div",A,[M,(0,o._)("div",N,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":l[1]||(l[1]=e=>Ie.value.modalData.name=e)},null,512),[[n.nr,Ie.value.modalData.name]])])]),(0,o._)("div",V,[z,(0,o._)("div",L,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"userId","onUpdate:modelValue":l[2]||(l[2]=e=>Ie.value.modalData.userId=e)},null,512),[[n.nr,Ie.value.modalData.userId]])])]),(0,o._)("div",S,[H,(0,o._)("div",B,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>Ie.value.modalData.password=e)},null,512),[[n.nr,Ie.value.modalData.password]])])]),(0,o._)("div",j,[T,(0,o._)("div",q,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"nickname","onUpdate:modelValue":l[4]||(l[4]=e=>Ie.value.modalData.nickname=e)},null,512),[[n.nr,Ie.value.modalData.nickname]])])]),(0,o._)("div",R,[K,(0,o._)("div",Y,[(0,o._)("div",F,[(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"AestheticMedicine",value:"AestheticMedicine","onUpdate:modelValue":l[5]||(l[5]=e=>xe.value=e)},null,512),[[n.e8,xe.value]]),O]),(0,o._)("div",$,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"Beauty",value:"Beauty","onUpdate:modelValue":l[6]||(l[6]=e=>xe.value=e)},null,512),[[n.e8,xe.value]]),J])])])]),(0,o._)("div",P,[Q,(0,o._)("div",W,[(0,o.wy)((0,o._)("select",{class:"form-select",id:"jobTitle","onUpdate:modelValue":l[7]||(l[7]=e=>Ie.value.modalData.role=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Ie.value.roleData,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,s.zw)(e.name),9,X)))),128))],512),[[n.bM,Ie.value.modalData.role]])])]),(0,o._)("div",Z,[ee,(0,o._)("div",le,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"phoneNumber","onUpdate:modelValue":l[8]||(l[8]=e=>Ie.value.modalData.phoneNumber=e)},null,512),[[n.nr,Ie.value.modalData.phoneNumber]])])]),(0,o._)("div",ae,[oe,(0,o._)("div",te,[(0,o.wy)((0,o._)("input",{type:"date",class:"form-control",id:"hireDate","onUpdate:modelValue":l[9]||(l[9]=e=>Ie.value.modalData.hireDate=e)},null,512),[[n.nr,Ie.value.modalData.hireDate]])])]),(0,o._)("div",se,[ne,(0,o._)("div",ce,[(0,o.wy)((0,o._)("input",{type:"color",class:"form-control",id:"color","onUpdate:modelValue":l[10]||(l[10]=e=>Ie.value.modalData.color=e)},null,512),[[n.nr,Ie.value.modalData.color]])])])])]),(0,o._)("div",de,[ie,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l[11]||(l[11]=e=>Se())},"確定")])])])],512),(0,o._)("div",{class:"modal fade",ref_key:"deleteModalRef",ref:De},[(0,o._)("div",me,[(0,o._)("div",re,[ue,(0,o._)("div",pe,[(0,o.Uk)(" 確認要刪除員工 "),(0,o._)("span",be,(0,s.zw)(Ie.value.deleteitem.name),1)]),(0,o._)("div",_e,[ve,(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:l[12]||(l[12]=l=>e.deleteEmployee(Ie.value.deleteitem.id))},"確定")])])])],512)],64))}};const fe=ye;var he=fe}}]);
//# sourceMappingURL=299.224d8ef7.js.map