{"version":3,"file":"js/807.c79da6ae.js","mappings":"6oBA6BE,MAAMA,GAAOC,EAAAA,EAAAA,IAAI,CACbC,OAAQ,QACRC,SAAU,WAENC,GAAUH,EAAAA,EAAAA,IAAI,IAEdI,GAAgBC,EAAAA,EAAAA,IAAO,iBAEvBC,GAASC,EAAAA,EAAAA,OAET,SACJC,GACEJ,EAEJK,eAAeC,IACb,MAAMC,EAAO,aAEbC,SAASC,OAAU,SAEnB,MAAMC,EAAU,CACdC,QAAS,CACP,eAAgB,oBAElBC,OAAQ,OACRC,KAAMC,KAAKC,UAAUpB,EAAKqB,QAGtBC,QAAiBb,EAASG,EAAKG,GAErC,GAAIO,EAASC,YAAc,IAGzB,OAFAnB,EAAQiB,MAAQC,EAASlB,QACzBoB,IACO,KAGTX,SAASC,OAAU,SAAQQ,EAASG,KAAKC,SAEzC,MAAMC,EAAW,CACfC,WAAYN,EAASG,KAAKG,WAC1BC,aAAcP,EAASG,KAAKI,aAC5BC,KAAMR,EAASG,KAAKK,MAGtBC,aAAaC,QAAQ,WAAYb,KAAKC,UAAUO,IAEhDpB,EAAO0B,KAAK,eACd,CAEA,SAAST,IACPU,YAAW,KACT9B,EAAQiB,MAAQ,EAAE,GACjB,IACL,C,mtBC3EJ,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://amis/./src/views/loginIndex.vue","webpack://amis/./src/views/loginIndex.vue?1c09"],"sourcesContent":["<template>\n  <div>\n    <div class=\"mt-5\">\n      <form class=\"form-signin\" @submit.prevent=\"signin\">\n        <h1 class=\"h3 mb-3 font-weight-normal text-center\">登入</h1>\n        <label for=\"inputEmail\" class=\"sr-only\">address</label>\n        <input type=\"text\" id=\"inputEmail\"\n          class=\"form-control mb-2\"\n          placeholder=\"address\"\n          required autofocus\n          v-model=\"user.userId\">\n        <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n        <input type=\"password\" id=\"inputPassword\"\n          class=\"form-control mb-2\"\n          placeholder=\"Password\" required\n          v-model=\"user.password\">\n        <button  class=\"btn btn-lg btn-main-dark2 w-100\" type=\"submit\">\n          <span v-if=\"!message\">Sign in</span>\n          <span v-else>{{message}}</span>\n        </button>\n    </form>\n  </div>\n</div>\n</template>\n\n<script setup>\n  import { ref, inject } from 'vue';\n  import { useRouter } from 'vue-router';\n\n  const user = ref({\n      userId: 'admin',\n      password: '115799',\n    });\n    const message = ref('');\n\n    const fetchFunction = inject('fetchFunction');\n\n    const router = useRouter();\n\n    const {\n      fetchApi,\n    } = fetchFunction;\n\n    async function signin() {\n      const url = `/api/Login`;\n\n      document.cookie = `token=`;\n\n      const options = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        method: 'POST',\n        body: JSON.stringify(user.value),\n      };\n\n      const response = await fetchApi(url, options);\n\n      if (response.statusCode >= 400) {\n        message.value = response.message;\n        textSwitch();\n        return null;\n      }\n      // document.cookie = `token=${res.data.token}; Secure; HttpOnly`;\n      document.cookie = `token=${response.data.token};`;\n\n      const employee = {\n        employeeId: response.data.employeeId,\n        employeeName: response.data.employeeName,\n        role: response.data.role,\n      }\n\n      localStorage.setItem('employee', JSON.stringify(employee));\n\n      router.push('/appointment');\n    }\n\n    function textSwitch() {\n      setTimeout(() => {\n        message.value = '';\n      }, 3000);\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.form-signin {\n  width: 100%;\n  max-width: 330px;\n  padding: 15px;\n  margin: auto;\n}\n.form-signin .checkbox {\n  font-weight: 400;\n}\n.form-signin .form-control {\n  position: relative;\n  box-sizing: border-box;\n  height: auto;\n  padding: 10px;\n  font-size: 16px;\n}\n.form-signin .form-control:focus {\n  z-index: 2;\n}\n// .form-signin input[type=\"email\"] {\n//   margin-bottom: -1px;\n//   border-bottom-right-radius: 0;\n//   border-bottom-left-radius: 0;\n// }\n// .form-signin input[type=\"password\"] {\n//   margin-bottom: 10px;\n//   border-top-left-radius: 0;\n//   border-top-right-radius: 0;\n// }\n</style>","import script from \"./loginIndex.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./loginIndex.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./loginIndex.vue?vue&type=style&index=0&id=41902a40&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\shang\\\\OneDrive\\\\桌面\\\\amis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-41902a40\"]])\n\nexport default __exports__"],"names":["user","ref","userId","password","message","fetchFunction","inject","router","useRouter","fetchApi","async","signin","url","document","cookie","options","headers","method","body","JSON","stringify","value","response","statusCode","textSwitch","data","token","employee","employeeId","employeeName","role","localStorage","setItem","push","setTimeout","__exports__"],"sourceRoot":""}