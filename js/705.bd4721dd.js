"use strict";(self["webpackChunkamis"]=self["webpackChunkamis"]||[]).push([[705],{5237:function(e,t,a){a(7658);var o=a(8262);t["Z"]=(0,o.Q_)("alertMessage Store",{state:()=>({messages:[]}),actions:{updateMessage(e,t=null){const a=Math.floor(new Date/1e3);this.messages.push({message:e,timestamp:a,ststus:t}),this.removeMessageWithTiming(a)},removeMessageWithTiming(e){setTimeout((()=>{this.messages.forEach(((t,a)=>{t.timestamp===e&&this.messages.splice(a,1)}))}),2e3)},removeMessage(e){this.messages.splice(e,1)}}})},3102:function(e,t,a){var o=a(8262),l=a(5237);const i=(0,l.Z)(),{updateMessage:n}=i,s="http://192.168.1.205:8888";t["Z"]=(0,o.Q_)("fetchApi Store",{state:()=>({}),actions:{async fetchApi(e,t){const a=t&&t.headers,o=t&&t.method,l=t&&t.data,i={headers:a?t.headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getTokenFromCookie()}`},method:o?t.method:"GET"};l&&(i.body=JSON.stringify(t.data));try{const t=await fetch(s+e,i).then((e=>e.json())).then((e=>e)),a="GET"===i.method||"get"===i.method;return 200!==t.statusCode||a||n(t.message),200===t.statusCode||a||n(`${t.message} ${t.statusCode}`),t}catch(r){}},getTokenFromCookie(){const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const a=e[t].trim();if(a.startsWith("token=")){const e=a.substring("token=".length);return e}}return null}}})},705:function(e,t,a){a.r(t),a.d(t,{default:function(){return Im}});var o=a(6252),l=a(3577),i=a(9963),n=a(9012),s=a(8083),r=a(5063);const d=e=>((0,o.dD)("data-v-2ee687df"),e=e(),(0,o.Cn)(),e),c={class:"container"},p={class:"row"},u=d((()=>(0,o._)("div",{class:"col-2"},null,-1))),m={class:"col-10"},h={class:"d-flex justify-content-end mb-3"},y={class:"border border-gray3 bg-white p-1 rounded-pill position-relative"},v={class:"row"},g={class:"col-lg-2"},b={class:"pt-4 px-3 bg-white rounded-20 border border-gray2"},w=d((()=>(0,o._)("div",{class:"d-flex align-items-center mb-4"},[(0,o._)("h6",{class:"text-main-dark2 me-auto mb-0 ms-1"},"醫師陣容")],-1))),D={class:"border-top border-gray2 pt-4"},k={class:"row gx-1"},f=["onClick"],_={class:"head-name h6"},x={class:"head-img-border"},C=["src"],I=d((()=>(0,o._)("h6",{class:"mb-0 text-main-dark2 me-auto"},"客戶搜尋",-1))),T=d((()=>(0,o._)("img",{class:"toggle-card-icon",src:n,alt:"arrow_down",width:"15.78",height:"7.3"},null,-1))),M=[I,T],P={class:"toggle-card"},A={class:"pb-2 px-3"},O=d((()=>(0,o._)("div",{class:"border-top border-gray2"},null,-1))),z={class:"position-relative mt-4 mb-2"},B=d((()=>(0,o._)("label",{for:"customerName",style:{left:"14px"},class:"position-absolute top-50 translate-middle-y form-label text-main-dark2"},"姓 名",-1))),q={class:"position-relative mb-2"},H=d((()=>(0,o._)("label",{for:"customerBirth",style:{left:"14px"},class:"position-absolute top-50 translate-middle-y form-label text-main-dark2"},"生 日",-1))),N={class:"position-relative"},V=d((()=>(0,o._)("label",{for:"customerTel",style:{left:"14px"},class:"position-absolute top-50 translate-middle-y form-label text-main-dark2"},"電 話",-1))),L={class:"row gx-3 mt-3"},S={class:"col-12 mb-2"},F={class:"d-flex"},E=d((()=>(0,o._)("h6",{class:"mb-0 text-main-dark2 me-auto"},"過濾查詢",-1))),$=d((()=>(0,o._)("img",{class:"toggle-card-icon",src:n,alt:"arrow_down",width:"15.78",height:"7.3"},null,-1))),R=[E,$],Y={class:"toggle-card"},U={class:"pb-4 px-3"},K=d((()=>(0,o._)("div",{class:"border-top border-gray2"},null,-1))),J={class:"row gx-3 mt-4"},j={class:"col-6 mb-2"},W={class:"col-6 mb-2"},G={class:"col-6 mb-2"},Q={class:"col-6 mb-2"},Z=d((()=>(0,o._)("h6",{class:"mb-0 text-main-dark2"},"尚未收費",-1))),X={class:"badge rounded-pill bg-main-dark2 me-auto ms-1"},ee=d((()=>(0,o._)("img",{class:"toggle-card-icon",src:n,alt:"arrow_down",width:"15.78",height:"7.3"},null,-1))),te={class:"toggle-card"},ae={class:"pb-4 px-3"},oe=d((()=>(0,o._)("div",{class:"border-top border-gray2"},null,-1))),le={class:"scroll-content-none mt-4",style:{"max-height":"268px"}},ie={class:"bg-gray2 rounded-top-15"},ne={class:"fw-500 mb-0 text-center py-1"},se={class:"d-flex"},re=d((()=>(0,o._)("span",{class:"fw-500 me-2"},"療程:",-1))),de={class:"d-flex"},ce=d((()=>(0,o._)("span",{class:"fw-500 me-2"},"費用:",-1))),pe={key:0,class:"d-flex"},ue=d((()=>(0,o._)("span",{class:"fw-500 text-mark"},"需收卷",-1))),me=[ue],he={class:"col-lg-10"},ye={class:"border border-main-dark1 rounded-20 p-4"},ve={class:"d-flex mb-4"},ge={style:{width:"24%"}},be={class:"bg-white px-8 py-1 rounded-pill border border-gray"},we={class:"d-flex align-items-center"},De={class:"text-main-dark1 me-6"},ke={class:"me-1",style:{"font-size":"20px","font-weight":"700"}},fe={style:{"font-weight":"700"}},_e=d((()=>(0,o._)("img",{src:s,width:"7.62",height:"16",alt:"arrow_left"},null,-1))),xe=[_e],Ce={class:"d-flex list-unstyled mb-0 scroll"},Ie=["onClick"],Te={class:"mb-0 fw-500",style:{"font-size":"16px"}},Me={class:"mb-0 fw-500",style:{"font-size":"12px"}},Pe=d((()=>(0,o._)("img",{src:r,width:"7.62",height:"16",alt:"arrow_right"},null,-1))),Ae=[Pe];function Oe(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",p,[u,(0,o._)("div",m,[(0,o._)("div",h,[(0,o._)("div",y,[(0,o._)("h6",{class:(0,l.C_)(["d-inline-block mb-0 py-1 px-5 slider",{activeds:"Beauty"===e.department}]),onClick:t[0]||(t[0]=e=>n.departmentToggle("AestheticMedicine"))}," 醫 美 部 ",2),(0,o._)("h6",{class:(0,l.C_)(["d-inline-block mb-0 py-1 px-5 position-relative text-main-dark1",{"text-white":"AestheticMedicine"===e.department}]),style:{"z-index":"66"},onClick:t[1]||(t[1]=e=>n.departmentToggle("AestheticMedicine"))}," 醫 美 部 ",2),(0,o._)("h6",{class:(0,l.C_)(["d-inline-block mb-0 py-1 px-5 position-relative text-main-dark1",{"text-white":"Beauty"===e.department}]),style:{"z-index":"66"},onClick:t[2]||(t[2]=e=>n.departmentToggle("Beauty"))}," 美 容 部 ",2)])])])]),(0,o._)("div",v,[(0,o._)("div",g,[(0,o.wy)((0,o._)("div",b,[w,(0,o._)("div",D,[(0,o._)("div",k,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.doctorData,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"col-4 mb-4",key:e},[(0,o._)("a",{href:"#",class:(0,l.C_)(["head",{active:e.select}]),style:(0,l.j5)(`border: 4px solid ${e.color};`),onClick:(0,i.iM)((t=>n.showOrHideDoctorData(e)),["prevent"])},[(0,o._)("span",_,(0,l.zw)(e.nickname),1),(0,o._)("div",x,[(0,o._)("img",{width:"44",height:"44",class:"rounded-circle",src:`https://randomuser.me/api/portraits/women/${t+1}.jpg`,alt:""},null,8,C)])],14,f)])))),128))])])],512),[[i.F8,"AestheticMedicine"===e.department]]),"detailedInformation"===e.checkInContent?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["bg-white rounded-20 border border-gray2 mt-3",{"toggle-active":0===n.accordionNum}])},[(0,o._)("a",{class:"d-flex w-100 align-items-center text-decoration-none py-4 px-5",href:"#",onClick:t[3]||(t[3]=(0,i.iM)((e=>n.accordionNum=0),["prevent"]))},M),(0,o._)("div",P,[(0,o._)("div",A,[O,(0,o._)("div",z,[B,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill text-main-dark2",style:{"text-indent":"50px"},id:"customerName","aria-describedby":"customerName",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=e=>n.data.customer.name=e)},null,512),[[i.nr,n.data.customer.name]])]),(0,o._)("div",q,[H,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill text-main-dark2",style:{"text-indent":"50px"},id:"customerBirth","aria-describedby":"customerBirth",autocomplete:"off",placeholder:"YYYMMDD","onUpdate:modelValue":t[5]||(t[5]=e=>n.data.customer.birth=e),maxlength:"8"},null,512),[[i.nr,n.data.customer.birth]])]),(0,o._)("div",N,[V,(0,o.wy)((0,o._)("input",{type:"tel",class:"form-control rounded-pill text-main-dark2",style:{"text-indent":"50px"},id:"customerTel","aria-describedby":"customerTel",autocomplete:"off",placeholder:"09xx-xxx-xxx","onUpdate:modelValue":t[6]||(t[6]=e=>n.data.customer.tel=e),maxlength:"10"},null,512),[[i.nr,n.data.customer.tel]])]),(0,o._)("div",L,[(0,o._)("div",S,[(0,o._)("button",{type:"button",class:"btn btn-outline-main-dark w-100 rounded-pill",onClick:t[7]||(t[7]=e=>n.searchDetailedInformation({name:n.data.customer.name,birthday:n.data.customer.birth,cellPhone:n.data.customer.tel}))},"查 詢")])])])])],2)):(0,o.kq)("",!0),(0,o._)("div",{class:(0,l.C_)(["bg-white rounded-20 border border-gray2 mt-3",{"toggle-active":1===n.accordionNum}])},[(0,o._)("div",F,[(0,o._)("a",{class:"d-flex w-100 align-items-center text-decoration-none py-4 px-5",href:"#",onClick:t[8]||(t[8]=(0,i.iM)((e=>n.accordionNum=1),["prevent"]))},R)]),(0,o._)("div",Y,[(0,o._)("div",U,[K,(0,o._)("div",J,[(0,o._)("div",j,[(0,o._)("button",{type:"button",class:(0,l.C_)(["btn btn-outline-main-dark w-100 rounded-pill",{active:e.filterQueryStatus.morning}]),onClick:t[9]||(t[9]=e=>n.setPeriod("morning"))},"早 診",2)]),(0,o._)("div",W,[(0,o._)("button",{type:"button",class:(0,l.C_)(["btn btn-outline-main-dark w-100 rounded-pill",{active:e.filterQueryStatus.afternoon}]),onClick:t[10]||(t[10]=e=>n.setPeriod("afternoon"))},"午 診",2)]),(0,o._)("div",G,[(0,o._)("button",{type:"button",class:(0,l.C_)(["btn btn-outline-main-dark w-100 rounded-pill",{active:e.filterQueryStatus.evening}]),onClick:t[11]||(t[11]=e=>n.setPeriod("evening"))},"晚 診",2)]),(0,o._)("div",Q,[(0,o._)("button",{type:"button",class:"btn btn-outline-second2 w-100 rounded-pill",onClick:t[12]||(t[12]=e=>n.filterQueryReset())},"重 置")])])])])],2),(0,o._)("div",{class:(0,l.C_)(["bg-white rounded-20 border border-gray2 mt-3",{"toggle-active":2===n.accordionNum}])},[(0,o._)("a",{class:"d-flex w-100 align-items-center text-decoration-none py-4 px-5",href:"#",onClick:t[13]||(t[13]=(0,i.iM)((e=>n.accordionNum=2),["prevent"]))},[Z,(0,o._)("span",X,(0,l.zw)(n.outstandingData?Object.keys(n.outstandingData).length:0),1),ee]),(0,o._)("div",te,[(0,o._)("div",ae,[oe,(0,o._)("div",le,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.outstandingData,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-2",key:t},[(0,o._)("div",ie,[(0,o._)("p",ne,(0,l.zw)(e.customerName),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.outstandingDetails,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["border border-gray2 border-top-0 py-2 px-3",{"rounded-bottom-15":e.outstandingDetails.length-1===a}]),key:t},[(0,o._)("div",se,[re,(0,o._)("span",null,(0,l.zw)(t.courseName),1)]),(0,o._)("div",de,[ce,(0,o._)("span",{class:(0,l.C_)({"text-mark":t.oweTicket})},(0,l.zw)(t.fee),3)]),t.oweTicket?((0,o.wg)(),(0,o.iD)("div",pe,me)):(0,o.kq)("",!0)],2)))),128))])))),128))])])])],2)]),(0,o._)("div",he,[(0,o._)("div",ye,[(0,o._)("div",ve,[(0,o.wy)((0,o._)("div",ge,null,512),[[i.F8,"dateOfAppointment"===e.checkInContent]]),(0,o._)("button",{type:"button",class:"w-100 me-3 bg-white rounded-pill border border-gray",style:{"font-size":"16px"},onClick:t[14]||(t[14]=e=>n.switchToDiagnosisOrDetails())},(0,l.zw)("dateOfAppointment"===e.checkInContent?"詳細資料":"返回到診表"),1),(0,o._)("div",be,[(0,o._)("div",we,[(0,o._)("div",De,[(0,o._)("span",ke,(0,l.zw)(e.month+1),1),(0,o._)("span",fe,(0,l.zw)(n.monthNumtoEn(e.month)),1)]),(0,o._)("a",{href:"#",class:"text-decoration-none d-inline-block me-2",onClick:t[15]||(t[15]=(0,i.iM)((e=>n.calendarListMove(!0)),["prevent"]))},xe),(0,o._)("ul",Ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.data.stripCalendar,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"mx-4 calendarList",key:t},[(0,o._)("a",{href:"#",class:(0,l.C_)(["text-decoration-none text-center d-inline-block",{"text-gray3":e.year!==t.year||e.month+1!==t.month||e.date!==t.date}]),onClick:(0,i.iM)((e=>n.selectDate(t)),["prevent"])},[(0,o._)("p",Te,(0,l.zw)(t.date),1),(0,o._)("p",Me,(0,l.zw)(t.day),1)],10,Ie)])))),128))]),(0,o._)("a",{href:"#",class:"text-decoration-none d-inline-block ms-2",onClick:t[16]||(t[16]=(0,i.iM)((e=>n.calendarListMove(!1)),["prevent"]))},Ae)])])]),((0,o.wg)(),(0,o.j4)((0,o.LL)(e.checkInContent)))])])])])}a(7658);var ze=a(2262),Be=a(4266),qe=a(9970),He=a(1376),Ne=a(2874),Ve=a(3610),Le=a(8988),Se=a(2213);const Fe=e=>((0,o.dD)("data-v-93eb7e4a"),e=e(),(0,o.Cn)(),e),Ee={class:"scroll-content-none",style:{height:"680px"}},$e={key:0,class:"d-flex"},Re={style:{width:"5%"}},Ye={class:"dateOfAppointmentList h-100 position-relative"},Ue={class:"h-100"},Ke={key:0,class:"d-flex align-items-center justify-content-center py-2"},Je={class:"dateOfAppointmentList-imgBorder"},je=["src"],We={class:"mb-0"},Ge={class:"position-relative"},Qe={key:0,class:"position-absolute text-main-dark2 fw-500",style:{top:"-10px",left:"-42px"}},Ze={key:1},Xe={class:"px-2 pb-2"},et={class:"position-relative"},tt={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},at=["onMouseenter","onMouseleave"],ot=["onClick"],lt={class:"align-middle"},it=["onMouseenter","onMouseleave"],nt={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},st={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},rt={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},dt={class:"details mb-2"},ct={key:0},pt=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),ut={class:"ps-2 py-1"},mt={key:1},ht=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),yt={class:"ps-2 py-1"},vt={key:2},gt=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),bt={class:"ps-2 py-1"},wt=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),Dt={class:"ps-2 py-1"},kt={class:"mb-0"},ft={key:0,class:"details mb-2"},_t=Fe((()=>(0,o._)("tr",null,[(0,o._)("td",{colspan:"2"},[(0,o._)("p",{class:"mb-0 py-1 text-center"},"寄 卷")])],-1))),xt={key:0,width:"50%",class:"px-4 py-1"},Ct={key:1,width:"50%",class:"py-1"},It={class:"row gx-1"},Tt={class:"col-6 text-end"},Mt={class:"mb-0 text-end w-100"},Pt={class:"col-6"},At={key:1,class:"details"},Ot=Fe((()=>(0,o._)("tr",null,[(0,o._)("td",{colspan:"2"},[(0,o._)("p",{class:"mb-0 py-1 text-center"},"儲 值")])],-1))),zt={width:"50%",class:"px-4 py-1"},Bt={width:"50%",class:"py-1"},qt={class:"row gx-1"},Ht={class:"col-6 text-end"},Nt={class:"mb-0 text-end w-100"},Vt={class:"col-6"},Lt={class:"position-relative"},St={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},Ft=["onMouseenter","onMouseleave"],Et=["onClick"],$t=["onMouseenter","onMouseleave"],Rt={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},Yt={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},Ut={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},Kt={class:"details"},Jt={key:0},jt=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),Wt={class:"ps-2 py-1"},Gt={key:1},Qt=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),Zt={class:"ps-2 py-1"},Xt={key:2},ea=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),ta={class:"ps-2 py-1"},aa=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),oa={class:"ps-2 py-1"},la={class:"mb-0"},ia={key:2},na=Fe((()=>(0,o._)("div",{class:"ms-auto p-2",style:{height:"37px"}},null,-1))),sa=[na],ra={class:"position-relative"},da={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},ca=["onMouseenter","onMouseleave"],pa=["onClick"],ua=["onMouseenter","onMouseleave"],ma={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},ha={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},ya={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},va={class:"details"},ga={key:0},ba=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),wa={class:"ps-2 py-1"},Da={key:1},ka=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),fa={class:"ps-2 py-1"},_a={key:2},xa=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),Ca={class:"ps-2 py-1"},Ia=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),Ta={class:"ps-2 py-1"},Ma={class:"mb-0"},Pa={key:1,class:"d-flex justify-content-end"},Aa={style:{width:"5%"}},Oa={class:"dateOfAppointmentList h-100"},za=Fe((()=>(0,o._)("thead",null,[(0,o._)("tr",{class:"bg-white h-100"},[(0,o._)("th",null,[(0,o._)("p",{class:"mb-0 fw-500 py-6 text-center text-main-dark2"},"醫 美 師")])])],-1))),Ba={class:"position-relative"},qa={class:"position-absolute text-main-dark2 fw-500",style:{top:"-10px",left:"-42px"}},Ha={key:0},Na={class:"position-relative"},Va={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},La=["onMouseenter","onMouseleave"],Sa=["onClick"],Fa={class:"align-middle me-1"},Ea={class:"align-middle"},$a=["onMouseenter","onMouseleave"],Ra={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},Ya={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},Ua={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},Ka={class:"details"},Ja={key:0},ja=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),Wa={class:"ps-2 py-1"},Ga={key:1},Qa=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),Za={class:"ps-2 py-1"},Xa={key:2},eo=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),to={class:"ps-2 py-1"},ao=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),oo={class:"ps-2 py-1"},lo={class:"mb-0"},io={class:"d-flex align-items-center text-main-dark1 bg-transparent border-0 w-100 px-2 mb-2"},no={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},so=["onMouseenter","onMouseleave"],ro=["onClick"],co={class:"me-1"},po=["onMouseenter","onMouseleave"],uo={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},mo={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},ho={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},yo={class:"details"},vo={key:0},go=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),bo={class:"ps-2 py-1"},wo={key:1},Do=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),ko={class:"ps-2 py-1"},fo={key:2},_o=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),xo={class:"ps-2 py-1"},Co=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),Io={class:"ps-2 py-1"},To={class:"mb-0"},Mo={key:1},Po=Fe((()=>(0,o._)("div",{class:"ms-auto p-2",style:{height:"37px"}},null,-1))),Ao=[Po],Oo={class:"d-flex align-items-center text-main-dark1 bg-transparent border-0 w-100 px-2 mb-2"},zo={class:"position-absolute top-50 start-50 translate-middle text-main-dark1 me-1",style:{"font-weight":"700","font-size":"12px"}},Bo=["onMouseenter","onMouseleave"],qo=["onClick"],Ho={class:"me-1"},No=["onMouseenter","onMouseleave"],Vo={class:"mb-0 bg-main-dark2 rounded-top-10 py-1 fw-500 text-center text-white"},Lo={class:"border border-main-dark1 rounded-bottom-10 bg-gray1 px-3 pb-3 pt-2 scroll-content-none",style:{"max-height":"350px"}},So={class:"rounded-pill py-1 text-main-dark1 bg-gray2 mb-2 text-center"},Fo={class:"details"},Eo={key:0},$o=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"項 目",-1))),Ro={class:"ps-2 py-1"},Yo={key:1},Uo=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"部 位",-1))),Ko={class:"ps-2 py-1"},Jo={key:2},jo=Fe((()=>(0,o._)("td",{width:"30%",class:"text-center py-1"},"麻 醉",-1))),Wo={class:"ps-2 py-1"},Go=Fe((()=>(0,o._)("td",{class:"align-top text-center py-1",width:"30%"},"備 註",-1))),Qo={class:"ps-2 py-1"},Zo={class:"mb-0"},Xo={key:1,class:"bg-white border-top border-gray1 py-3"},el={class:"modal fade",ref:"checkInModalRef"},tl={class:"modal-dialog modal-904"},al={class:"modal-content p-0 bg-transparent"},ol=Fe((()=>(0,o._)("h5",{class:"mb-0 py-3 text-center fe-500 bg-main-dark1 text-white rounded-top-20"},"到 診 登 錄",-1))),ll={class:"bg-white rounded-bottom-20"},il={class:"row gx-0"},nl=Fe((()=>(0,o._)("div",{class:"col-2 bg-gray1 py-6 px-10"},[(0,o._)("h6",{class:"text-center fw-500"}," 預約療程 ")],-1))),sl={class:"col-10"},rl={class:"py-4 px-10 border-2 border-bottom border-gray1"},dl=["onClick"],cl={key:0,class:"align-middle me-2 img1",src:Be,width:"15",height:"15",alt:"Check-01"},pl={key:1,class:"align-middle me-2 img2",src:qe,width:"15",height:"15",alt:"Check-02"},ul={class:"align-middle"},ml={class:"scroll-content-none",style:{"max-height":"620px"}},hl={class:"row gx-0"},yl=Fe((()=>(0,o._)("div",{class:"col-2 bg-gray1 py-6 px-10"},[(0,o._)("h6",{class:"text-center fw-500"}," 治療內容 ")],-1))),vl={class:"col-10 py-4 px-10"},gl={class:"row gx-0 mb-3"},bl={class:"col-5"},wl={class:"d-flex py-2"},Dl={class:"amis-btn-lg amis-btn-lg-name p-0"},kl={class:"amis-btn-lg-name-bg bg-main-dark2 me-1"},fl={class:"amis-btn-lg-name-item text-white text-main-dark2"},_l={class:"align-middle text-main-dark2"},xl={class:"col-7"},Cl={class:"d-flex py-2"},Il={class:"mb-0 me-2 text-main-dark2"},Tl={class:"mb-0 me-4 text-main-dark2"},Ml={class:"row gx-0 mb-3"},Pl={class:"col-5"},Al={class:"d-flex py-2 text-main-dark2"},Ol={key:0,class:"mb-0 text-main-dark2"},zl={key:0,class:"col-7"},Bl={class:"input-group"},ql=Fe((()=>(0,o._)("label",{class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},"療程項目",-1))),Hl=["value"],Nl={key:0,selected:"",disabled:"",value:""},Vl=["value"],Ll={key:1,class:"col-7"},Sl={class:"d-flex py-2 text-gray5"},Fl=Fe((()=>(0,o._)("h6",{class:"mb-0 fw-500 me-4"},"療程項目",-1))),El={class:"mb-0 me-2 text-main-dark2"},$l={class:"row gx-0 mb-3"},Rl={key:0,class:"col-5"},Yl={class:"input-group"},Ul={key:0,class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},Kl={key:1,class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},Jl=Fe((()=>(0,o._)("option",{value:null},"不指定",-1))),jl=["value"],Wl={key:1,class:"col-5"},Gl={class:"d-flex py-2"},Ql={key:0,class:"mb-0 fw-500 me-4 text-gray5"},Zl={key:1,class:"mb-0 fw-500 me-4 text-gray5"},Xl={key:2,class:"mb-0 me-2 text-main-dark2"},ei={key:2,class:"col-5"},ti=Fe((()=>(0,o._)("h6",{class:"me-8 mb-0"},"麻",-1))),ai=Fe((()=>(0,o._)("h6",{class:"mb-0 me-4"},"醉",-1))),oi={key:0,class:"mb-0 text-main-dark2"},li={key:0,class:"input-group mb-3"},ii=Fe((()=>(0,o._)("p",{class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},"治療部位",-1))),ni={type:"button",class:"d-flex flex-wrap border-0 pt-2 pb-0 rounded-15 bg-transparent",style:{width:"90%","min-height":"51px"}},si=["onClick"],ri={class:"align-middle me-2"},di=Fe((()=>(0,o._)("img",{class:"align-middle",src:He,alt:"icon",width:"10",height:"10"},null,-1))),ci=["onClick"],pi={class:"scroll-content-none",style:{"max-height":"170px"}},ui=["onChange"],mi=["value","id"],hi=["for"],yi={key:1,class:"col-12"},vi={class:"input-group mb-3"},gi=Fe((()=>(0,o._)("label",{class:"input-group-text align-items-start text-main-dark2 mb-0 border-0 p-0 bg-transparent",style:{width:"80px"}},null,-1))),bi={class:"position-relative",style:{flex:"1 1 auto",width:"1%","min-width":"0"}},wi=Fe((()=>(0,o._)("img",{src:Ne,alt:"",width:"20",height:"20"},null,-1))),Di=[wi],ki={class:"position-absolute",style:{"min-width":"223px","z-index":"10",left:"28px"}},fi={class:"bg-gray1 border border-gray3 rounded-15"},_i={class:"otherBodyPartTable text-main-dark1"},xi=Fe((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"其他部分"),(0,o._)("th",null,"大小"),(0,o._)("th",null,"金額")])],-1))),Ci=["onClick"],Ii={class:"d-inline-block ms-10"},Ti=Fe((()=>(0,o._)("div",{class:"col-1"},[(0,o._)("span",{class:"input-group-text text-main-dark2 mb-0 border-0 p-0 bg-transparent"},"其他")],-1))),Mi={class:"col-11"},Pi={class:"row"},Ai={class:"col-5"},Oi=["onUpdate:modelValue","onBlur"],zi={class:"col-5"},Bi=["onUpdate:modelValue","onBlur"],qi={class:"col-2"},Hi={class:"d-flex align-items-center h-100"},Ni=["onClick"],Vi=Fe((()=>(0,o._)("img",{src:Ve,alt:"",width:"20",height:"20"},null,-1))),Li=[Vi],Si={key:1,style:{width:"28px",height:"20px"}},Fi=Fe((()=>(0,o._)("img",{src:Le,alt:"",width:"20",height:"20"},null,-1))),Ei=[Fi],$i={key:2,class:"input-group"},Ri=Fe((()=>(0,o._)("label",{class:"input-group-text align-items-start text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent",for:"inputGroupSelect01"},[(0,o._)("span",{class:"me-8"},"備"),(0,o._)("span",null,"註")],-1))),Yi={key:3,class:"d-flex"},Ui=Fe((()=>(0,o._)("h6",{class:"mb-0 me-4 text-gray5",style:{"word-break":"keep-all"}},[(0,o._)("span",{class:"me-8"},"備"),(0,o._)("span",null,"註")],-1))),Ki={class:"mb-0 me-4 text-main-dark2",style:{"word-break":"break-all"}},Ji={key:4,style:{"min-height":"405px"}},ji={class:"row gx-0"},Wi={key:0,class:"col-2 bg-gray1 py-6 px-10"},Gi=Fe((()=>(0,o._)("h6",{class:"text-center fw-500"}," 收費內容 ",-1))),Qi=[Gi],Zi={key:0,class:"d-flex mb-3"},Xi=Fe((()=>(0,o._)("label",{for:"exampleFormControlInput0",class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},"美容耗材",-1))),en=["disabled"],tn=Fe((()=>(0,o._)("option",{selected:"",value:""},null,-1))),an=["value"],on={key:1,class:"d-flex mb-3"},ln=Fe((()=>(0,o._)("label",{for:"exampleFormControlInput1",class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"},"是否上麻",-1))),nn=["value"],sn=["value"],rn={key:0,selected:"",disabled:"",value:""},dn=Fe((()=>(0,o._)("option",{value:!0},"費用已收",-1))),cn=Fe((()=>(0,o._)("option",{value:!1},"費用未收",-1))),pn={key:2},un=Fe((()=>(0,o._)("h6",{class:"text-main-dark2 mb-3"},"支付方式",-1))),mn={key:0,class:"fw-500 mb-2"},hn={key:1,class:"fw-500 mb-2"},yn=["onClick"],vn={type:"button",class:"d-flex flex-wrap border-0 pt-2 pb-0 rounded-15 bg-transparent",style:{width:"90%","min-height":"51px"}},gn=["onClick"],bn={class:"align-middle me-2"},wn=Fe((()=>(0,o._)("img",{class:"align-middle",src:He,alt:"icon",width:"10",height:"10"},null,-1))),Dn=["onClick"],kn={class:"scroll-content-none",style:{"max-height":"170px"}},fn=["value","id","onUpdate:modelValue","onChange"],_n=["for"],xn=["onClick"],Cn={class:"scroll-content-none",style:{"max-height":"170px"}},In=["value","id","onUpdate:modelValue","onChange"],Tn=["for"],Mn={class:"row w-100 gx-0"},Pn={class:"col-2"},An={style:{"padding-top":"7px"}},On=Fe((()=>(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"},null,-1))),zn={class:"fw-500 mb-0 d-inline pt-3",style:{"white-space":"nowrap"}},Bn={class:"col-10"},qn={key:0},Hn={class:"d-flex flex-wrap"},Nn=["onClick"],Vn={class:"me-7"},Ln=Fe((()=>(0,o._)("img",{src:Ve,width:"15",height:"15",alt:"--05"},null,-1))),Sn=["onUpdate:modelValue","onKeydown"],Fn={class:"mb-2"},En=Fe((()=>(0,o._)("label",{class:"align-middle rounded-end rounded-pill bg-gray1 border-end-0 text-main-dark2",style:{padding:"6px 8px 6px 11px",border:"1px solid #ced4da"}},"欠卷",-1))),$n=["onUpdate:modelValue","min"],Rn={key:1},Yn={class:"col-6"},Un={class:"input-group"},Kn=["onUpdate:modelValue"],Jn=["value"],jn={class:"col-4"},Wn={class:"d-flex align-items-center"},Gn=["onUpdate:modelValue"],Qn={class:"col-2"},Zn=["onClick"],Xn=Fe((()=>(0,o._)("img",{src:Ve,alt:"",width:"20",height:"20"},null,-1))),es=[Xn],ts=["onClick"],as=Fe((()=>(0,o._)("img",{src:Le,alt:"",width:"20",height:"20"},null,-1))),os=[as],ls={class:"row align-items-center mb-2"},is={class:"col-4"},ns={class:"input-group"},ss=["onUpdate:modelValue","onChange"],rs=["value"],ds={key:0,class:"col-4"},cs={class:"d-flex align-items-center"},ps=["onUpdate:modelValue","onBlur"],us={class:"col-4"},ms={class:"input-group"},hs=["onUpdate:modelValue"],ys=Fe((()=>(0,o._)("option",{value:!1},"費用未收",-1))),vs=Fe((()=>(0,o._)("option",{value:!0},"費用已收",-1))),gs=[ys,vs],bs={class:"col-4"},ws={class:"input-group"},Ds=["onUpdate:modelValue"],ks=["value"],fs={class:"col-4"},_s={class:"d-flex align-items-center"},xs=["onBlur","onUpdate:modelValue"],Cs={class:"col-2"},Is=["onClick"],Ts=Fe((()=>(0,o._)("img",{src:Ve,alt:"",width:"20",height:"20"},null,-1))),Ms=[Ts],Ps=["onClick"],As=Fe((()=>(0,o._)("img",{src:Le,alt:"",width:"20",height:"20"},null,-1))),Os=[As],zs={class:"col-4"},Bs={class:"input-group"},qs=["onUpdate:modelValue"],Hs=["value"],Ns={class:"col-4"},Vs={class:"d-flex align-items-center"},Ls=["onUpdate:modelValue","onBlur"],Ss={class:"col-4"},Fs={class:"input-group"},Es=["onUpdate:modelValue"],$s=Fe((()=>(0,o._)("option",{value:!1},"費用未收",-1))),Rs=Fe((()=>(0,o._)("option",{value:!0},"費用已收",-1))),Ys=[$s,Rs],Us={class:"row gx-0 mb-3"},Ks={class:"col-5"},Js={class:"d-flex"},js=Fe((()=>(0,o._)("h6",{class:"mb-0 fw-500 me-4 text-gray5"},"是否上麻",-1))),Ws={class:"mb-0 fw-500 text-main-dark2"},Gs={key:0},Qs={key:1},Zs={key:0,class:"d-flex"},Xs=Fe((()=>(0,o._)("h6",{class:"mb-0 fw-500 me-4 text-gray5",style:{"word-break":"keep-all"}},"支付方式",-1))),er={class:"w-100"},tr={class:"fw-500"},ar={key:0,class:"d-flex mb-2"},or=Fe((()=>(0,o._)("div",{class:"d-flex align-items-center"},[(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"}),(0,o._)("h6",{class:"mb-0 me-2",style:{"word-break":"keep-all"}},"療程專用券:")],-1))),lr={class:"d-flex"},ir={class:"mb-0",style:{"word-break":"break-all"}},nr={key:0,class:"mb-0 text-mark"},sr={key:1,class:"d-flex align-items-start mb-2"},rr=Fe((()=>(0,o._)("div",{class:"d-flex align-items-center"},[(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"}),(0,o._)("h6",{class:"mb-0 me-2",style:{"word-break":"keep-all"}},"現金支付:")],-1))),dr={key:0,class:"d-flex"},cr={class:"me-1 mb-0"},pr={class:"me-2 mb-0"},ur={key:1},mr={class:"d-flex"},hr={class:"me-2 mb-0"},yr={key:0,class:"mb-0 d-inline"},vr={key:2,class:"align-top"},gr=Fe((()=>(0,o._)("div",{class:"d-inline-block align-top"},[(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"}),(0,o._)("h6",{class:"mb-0 me-2 d-inline-block"},"活動優惠券:")],-1))),br={class:"d-inline-block"},wr={class:"fw-500"},Dr={class:"d-flex mb-2"},kr=Fe((()=>(0,o._)("div",{class:"d-flex align-items-center"},[(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"}),(0,o._)("h6",{class:"mb-0 me-2",style:{"word-break":"keep-all"}},"現金支付:")],-1))),fr={class:"d-flex"},_r={class:"me-1 mb-0"},xr={class:"me-2 mb-0"},Cr={class:"row gx-0"},Ir=Fe((()=>(0,o._)("div",{class:"col-2 bg-gray1 py-6 px-10",style:{"border-bottom-left-radius":"20px"}},null,-1))),Tr={class:"col-10 py-4 ps-10 pe-5 border-2 border-top border-gray1"},Mr={key:0,class:"d-flex align-items-center"},Pr=Fe((()=>(0,o._)("label",{class:"me-12",for:""},"總金額",-1))),Ar=(0,o.uE)('<div class="form-check d-inline-block me-5" data-v-93eb7e4a><input class="form-check-input" type="checkbox" id="requestMedicalReceipt" data-v-93eb7e4a><label class="form-check-label" for="requestMedicalReceipt" data-v-93eb7e4a> 索取醫療收據 </label></div><div class="form-check d-inline-block me-auto" data-v-93eb7e4a><input class="form-check-input" type="checkbox" value="" id="printReceipt" data-v-93eb7e4a><label class="form-check-label" for="printReceipt" data-v-93eb7e4a> 列印收據 </label></div>',2),Or={class:"d-inline-block"},zr=Fe((()=>(0,o._)("button",{type:"button",class:"btn btn-alert-second rounded-pill","data-bs-dismiss":"modal"},"關 閉",-1))),Br=["disabled"],qr={key:1,class:"d-flex align-items-center"},Hr={class:"d-flex me-auto"},Nr=Fe((()=>(0,o._)("h6",{class:"mb-0 me-9 text-gray5"},"總金額",-1))),Vr={class:"mb-0 text-main-dark2"},Lr=Fe((()=>(0,o._)("div",{class:"d-inline-block"},[(0,o._)("button",{type:"button",class:"btn btn-alert-second rounded-pill","data-bs-dismiss":"modal"},"關 閉")],-1)));function Sr(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Ee,["AestheticMedicine"===e.department?((0,o.wg)(),(0,o.iD)("div",$e,[(0,o.wy)((0,o._)("div",Re,null,512),[[i.F8,"dateOfAppointment"===e.checkInContent]]),(0,o._)("table",Ye,[(0,o._)("thead",null,[(0,o._)("tr",Ue,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.selectedDoctor,((e,t)=>((0,o.wg)(),(0,o.iD)("th",{key:e,class:"bg-white",style:{position:"sticky",top:"0","z-index":"12"}},[e.select?((0,o.wg)(),(0,o.iD)("div",Ke,[(0,o._)("div",{href:"#",class:"dateOfAppointmentList-head me-2",style:(0,l.j5)(`border: 4px solid ${e.color};`)},[(0,o._)("div",Je,[(0,o._)("img",{width:"44",height:"44",class:"rounded-circle",src:`https://randomuser.me/api/portraits/women/${t+1}.jpg`,alt:""},null,8,je)])],4),(0,o._)("h6",We,(0,l.zw)(e.name),1)])):(0,o.kq)("",!0)])))),128))])]),(0,o._)("tbody",Ge,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.daysOutpatientData.daysOutpatients,((a,s)=>((0,o.wg)(),(0,o.iD)("tr",{key:a,class:(0,l.C_)({scrollToAfternoon:e.clinicPeriodLastTime.Morning===s,scrollToEvening:e.clinicPeriodLastTime.Afternoon===s})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.selectedDoctor,((r,d)=>((0,o.wg)(),(0,o.iD)("td",{key:r,width:"25%",class:(0,l.C_)(["align-top position-relative td-style",{"dateOfAppointmentList-crossTime":e.timeRange.find((e=>e.time===s&&e.operatorId===r.id&&!e.lastTimeSlot))}])},[a[r.id]?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["d-flex flex-column justify-content-between pt-2 h-100 last-child-style",n.AestheticMedicineBgJudge(a[r.id],{id:r.id,time:s})])},[0===d?((0,o.wg)(),(0,o.iD)("span",Qe,(0,l.zw)(n.convertTimeFormatDeleteSecond(s)),1)):(0,o.kq)("",!0),a[r.id].normalAppointment?((0,o.wg)(),(0,o.iD)("div",Ze,[(0,o._)("div",Xe,[(0,o._)("div",et,[(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center px-2 text-white border-0 w-100 rounded-10",a[r.id].normalAppointment.left?"bg-gray3":"bg-main-dark1"])},[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(a[r.id].normalAppointment.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",tt,(0,l.zw)(a[r.id].normalAppointment.customerBeauticianNickname),1)],2),(0,o._)("div",{class:"me-auto py-2",onMouseenter:e=>n.showDetails(a[r.id].normalAppointment.appointmentId),onMouseleave:e=>n.closeDetails(a[r.id].normalAppointment.appointmentId)},[(0,o._)("div",{class:(0,l.C_)({"border-bottom border-white":a[r.id].normalAppointment.medicalRecordId})},[(0,o._)("span",{class:"me-1 align-middle cursor-pointer",onClick:(0,i.iM)((e=>n.openCheckInModal(a[r.id].normalAppointment)),["stop"])},(0,l.zw)(a[r.id].normalAppointment.customerName),9,ot),(0,o._)("span",lt,(0,l.zw)(a[r.id].normalAppointment.courseName),1)],2)],40,at),a[r.id].normalAppointment.anesthesiaTime?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["ms-1",a[r.id].normalAppointment.left?"dateOfAppointmentList-iconText bg-gray4":"anesthesiaTime-iconText"])},"麻",2)):(0,o.kq)("",!0),a[r.id].normalAppointment.comment?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",a[r.id].normalAppointment.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0)],2),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${a[r.id].normalAppointment.appointmentId}`]),style:{"z-index":"10"},onMouseenter:e=>n.showDetails(a[r.id].normalAppointment.appointmentId),onMouseleave:e=>n.closeDetails(a[r.id].normalAppointment.appointmentId)},[(0,o._)("p",nt,(0,l.zw)(`${a[r.id].normalAppointment.typeName}`),1),(0,o._)("div",st,[(0,o._)("p",rt,(0,l.zw)(a[r.id].normalAppointment.customerBirthday),1),(0,o._)("table",dt,[(0,o._)("tbody",null,[a[r.id].normalAppointment.courseName?((0,o.wg)(),(0,o.iD)("tr",ct,[pt,(0,o._)("td",ut,(0,l.zw)(a[r.id].normalAppointment.courseName),1)])):(0,o.kq)("",!0),a[r.id].normalAppointment.appointmentBodyPart?((0,o.wg)(),(0,o.iD)("tr",mt,[ht,(0,o._)("td",yt,(0,l.zw)(a[r.id].normalAppointment.appointmentBodyPart),1)])):(0,o.kq)("",!0),a[r.id].normalAppointment.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",vt,[gt,(0,o._)("td",bt,(0,l.zw)(a[r.id].normalAppointment.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[wt,(0,o._)("td",Dt,[(0,o._)("div",null,[(0,o._)("p",kt,(0,l.zw)(a[r.id].normalAppointment.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(a[r.id].normalAppointment.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])]),e.voucherDepositData[a[r.id].normalAppointment.customerId]?((0,o.wg)(),(0,o.iD)("table",ft,[(0,o._)("tbody",null,[_t,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.voucherDepositData[a[r.id].normalAppointment.customerId],(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[0!==e.quantity?((0,o.wg)(),(0,o.iD)("td",xt,(0,l.zw)(e.voucherTypeName),1)):(0,o.kq)("",!0),0!==e.quantity?((0,o.wg)(),(0,o.iD)("td",Ct,[(0,o._)("div",It,[(0,o._)("div",Tt,[(0,o._)("p",Mt,(0,l.zw)(e.quantity),1)]),(0,o._)("div",Pt,(0,l.zw)(e.unit),1)])])):(0,o.kq)("",!0)])))),128))])])):(0,o.kq)("",!0),e.customerStoredValueData[a[r.id].normalAppointment.customerId]?((0,o.wg)(),(0,o.iD)("table",At,[(0,o._)("tbody",null,[Ot,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.customerStoredValueData[a[r.id].normalAppointment.customerId],(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",zt,(0,l.zw)(e.courseProductName),1),(0,o._)("td",Bt,[(0,o._)("div",qt,[(0,o._)("div",Ht,[(0,o._)("p",Nt,(0,l.zw)(e.quantity),1)]),(0,o._)("div",Vt,(0,l.zw)(e.unit),1)])])])))),128))])])):(0,o.kq)("",!0)])],42,it)])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a[r.id].otherAppointment,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:(0,l.C_)(["px-2 py-1",e.left?"bg-gray3":"bg-green"])},[(0,o._)("div",Lt,[(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center border-0 w-100 px-2",e.left?"text-white":"text-main-dark1"])},[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(e.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",St,(0,l.zw)(e.customerBeauticianNickname),1)],2),(0,o._)("div",{class:(0,l.C_)(["me-auto",{"border-bottom border-white":e.medicalRecordId}]),onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("span",{class:"me-1 cursor-pointer",onClick:(0,i.iM)((t=>n.openCheckInModal(e)),["stop"])},(0,l.zw)(e.customerName),9,Et),(0,o._)("span",null,(0,l.zw)(e.courseName),1)],42,Ft),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["ms-1",e.left?"dateOfAppointmentList-iconText bg-gray4":"anesthesiaTime-iconText"])},"麻",2)):(0,o.kq)("",!0),e.comment?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0),"CutInLine"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:2,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"插",2)):(0,o.kq)("",!0),"IV"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:3,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconOrange"])},"滴",2)):(0,o.kq)("",!0),"OPD"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:4,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"健",2)):(0,o.kq)("",!0),"Return"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:5,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"回",2)):(0,o.kq)("",!0)],2),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${e.appointmentId}`]),style:{"z-index":"10"},onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("p",Rt,(0,l.zw)(e.typeName),1),(0,o._)("div",Yt,[(0,o._)("p",Ut,(0,l.zw)(e.customerBirthday),1),(0,o._)("table",Kt,[(0,o._)("tbody",null,[e.courseName?((0,o.wg)(),(0,o.iD)("tr",Jt,[jt,(0,o._)("td",Wt,(0,l.zw)(e.courseName),1)])):(0,o.kq)("",!0),e.appointmentBodyPart&&"OPD"!==e.appointmentType&&"IV"!==e.appointmentType?((0,o.wg)(),(0,o.iD)("tr",Gt,[Qt,(0,o._)("td",Zt,(0,l.zw)(e.appointmentBodyPart),1)])):(0,o.kq)("",!0),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",Xt,[ea,(0,o._)("td",ta,(0,l.zw)(e.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[aa,(0,o._)("td",oa,[(0,o._)("div",null,[(0,o._)("p",la,(0,l.zw)(e.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(e.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])])])],42,$t)])],2)))),128))])):((0,o.wg)(),(0,o.iD)("div",ia,[a[r.id]?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["d-flex pb-2 pe-2 last-child-style",n.AestheticMedicineBgJudge(a[r.id],{id:r.id,time:s})])},sa,2)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a[r.id].otherAppointment,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:(0,l.C_)(["px-2 py-1",e.left?"bg-gray3":"bg-green"])},[(0,o._)("div",ra,[(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center bg-transparent border-0 w-100 px-2",e.left?"text-white":"text-main-dark1"])},[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(e.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",da,(0,l.zw)(e.customerBeauticianNickname),1)],2),(0,o._)("div",{class:(0,l.C_)(["me-auto",{"border-bottom border-white":e.medicalRecordId}]),onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("span",{class:"me-1 cursor-pointer",onClick:(0,i.iM)((t=>n.openCheckInModal(e)),["stop"])},(0,l.zw)(e.customerName),9,pa),(0,o._)("span",null,(0,l.zw)(e.courseName),1)],42,ca),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["ms-1",e.left?"dateOfAppointmentList-iconText bg-gray4":"anesthesiaTime-iconText"])},"麻",2)):(0,o.kq)("",!0),e.comment?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0),"CutInLine"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:2,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"插",2)):(0,o.kq)("",!0),"IV"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:3,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconOrange"])},"滴",2)):(0,o.kq)("",!0),"OPD"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:4,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"健",2)):(0,o.kq)("",!0),"Return"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:5,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"回",2)):(0,o.kq)("",!0)],2),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${e.appointmentId}`]),style:{"z-index":"10"},onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("p",ma,(0,l.zw)(e.typeName),1),(0,o._)("div",ha,[(0,o._)("p",ya,(0,l.zw)(e.customerBirthday),1),(0,o._)("table",va,[(0,o._)("tbody",null,[e.courseName?((0,o.wg)(),(0,o.iD)("tr",ga,[ba,(0,o._)("td",wa,(0,l.zw)(e.courseName),1)])):(0,o.kq)("",!0),e.appointmentBodyPart&&"OPD"!==e.appointmentType&&"IV"!==e.appointmentType?((0,o.wg)(),(0,o.iD)("tr",Da,[ka,(0,o._)("td",fa,(0,l.zw)(e.appointmentBodyPart),1)])):(0,o.kq)("",!0),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",_a,[xa,(0,o._)("td",Ca,(0,l.zw)(e.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[Ia,(0,o._)("td",Ta,[(0,o._)("div",null,[(0,o._)("p",Ma,(0,l.zw)(e.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(e.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])])])],42,ua)])],2)))),128))])),Object.values(e.clinicPeriodLastTime).includes(s)?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"bg-white border-top border-gray1 py-3",onClick:t[0]||(t[0]=(...t)=>e.scrollToTimePeriod&&e.scrollToTimePeriod(...t))})):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0)],2)))),128))],2)))),128))])])])):(0,o.kq)("",!0),"Beauty"===e.department?((0,o.wg)(),(0,o.iD)("div",Pa,[(0,o.wy)((0,o._)("div",Aa,null,512),[[i.F8,"dateOfAppointment"===e.checkInContent]]),(0,o._)("table",Oa,[za,(0,o._)("tbody",Ba,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.daysOutpatientData.daysOutpatients,((t,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",{width:"25%",class:(0,l.C_)(["align-top position-relative td-style",{"dateOfAppointmentList-crossTime":e.timeRange.find((e=>e.time===a&&!e.lastTimeSlot))}])},[t?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["p-2 h-100 last-child-style",n.beautyBgJudge(t,a)])},[(0,o._)("span",qa,(0,l.zw)(n.convertTimeFormatDeleteSecond(a)),1),t.normalAppointment?((0,o.wg)(),(0,o.iD)("div",Ha,[(0,o._)("div",Na,[(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center px-2 text-white border-0 w-100 mb-2 rounded-10",t.normalAppointment.left?"bg-gray3":"bg-main-dark1"])},[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(t.normalAppointment.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",Va,(0,l.zw)(t.normalAppointment.customerBeauticianNickname),1)],2),(0,o._)("div",{class:"me-auto py-2",onMouseenter:e=>n.showDetails(t.normalAppointment.appointmentId),onMouseleave:e=>n.closeDetails(t.normalAppointment.appointmentId)},[(0,o._)("div",{class:(0,l.C_)({"border-bottom border-white":t.normalAppointment.medicalRecordId})},[(0,o._)("span",{class:"me-1 align-middle cursor-pointer",onClick:(0,i.iM)((e=>n.openCheckInModal(t.normalAppointment)),["stop"])},(0,l.zw)(t.normalAppointment.customerName),9,Sa),(0,o._)("span",Fa,(0,l.zw)(t.normalAppointment.courseName),1),(0,o._)("span",Ea,(0,l.zw)(t.normalAppointment.operatorName||"不指定"),1)],2)],40,La),t.normalAppointment.comment?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",t.normalAppointment.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0)],2),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${t.normalAppointment.appointmentId}`]),style:{"z-index":"10"},onMouseenter:e=>n.showDetails(t.normalAppointment.appointmentId),onMouseleave:e=>n.closeDetails(t.normalAppointment.appointmentId)},[(0,o._)("p",Ra,(0,l.zw)(`${t.normalAppointment.typeName}`),1),(0,o._)("div",Ya,[(0,o._)("p",Ua,(0,l.zw)(t.normalAppointment.customerBirthday),1),(0,o._)("table",Ka,[(0,o._)("tbody",null,[t.normalAppointment.courseName?((0,o.wg)(),(0,o.iD)("tr",Ja,[ja,(0,o._)("td",Wa,(0,l.zw)(t.normalAppointment.courseName),1)])):(0,o.kq)("",!0),t.normalAppointment.appointmentBodyPart?((0,o.wg)(),(0,o.iD)("tr",Ga,[Qa,(0,o._)("td",Za,(0,l.zw)(t.normalAppointment.appointmentBodyPart),1)])):(0,o.kq)("",!0),t.normalAppointment.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",Xa,[eo,(0,o._)("td",to,(0,l.zw)(t.normalAppointment.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[ao,(0,o._)("td",oo,[(0,o._)("div",null,[(0,o._)("p",lo,(0,l.zw)(t.normalAppointment.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(t.normalAppointment.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])])])],42,$a)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.otherAppointment,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"position-relative",key:e},[(0,o._)("div",io,[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(e.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",no,(0,l.zw)(e.customerBeauticianNickname),1)],2),(0,o._)("div",{class:(0,l.C_)(["me-auto",{"border-bottom border-white":e.medicalRecordId}]),onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("span",{class:"me-1 cursor-pointer",onClick:(0,i.iM)((t=>n.openCheckInModal(e)),["stop"])},(0,l.zw)(e.customerName),9,ro),(0,o._)("span",co,(0,l.zw)(e.courseName),1),(0,o._)("span",null,(0,l.zw)(e.operatorName||"不指定"),1)],42,so),e.comment?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0),"CutInLine"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"插",2)):(0,o.kq)("",!0)]),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${e.appointmentId}`]),style:{"z-index":"10"},onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("p",uo,(0,l.zw)(e.typeName),1),(0,o._)("div",mo,[(0,o._)("p",ho,(0,l.zw)(e.customerBirthday),1),(0,o._)("table",yo,[(0,o._)("tbody",null,[e.courseName?((0,o.wg)(),(0,o.iD)("tr",vo,[go,(0,o._)("td",bo,(0,l.zw)(e.courseName),1)])):(0,o.kq)("",!0),e.appointmentBodyPart?((0,o.wg)(),(0,o.iD)("tr",wo,[Do,(0,o._)("td",ko,(0,l.zw)(e.appointmentBodyPart),1)])):(0,o.kq)("",!0),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",fo,[_o,(0,o._)("td",xo,(0,l.zw)(e.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[Co,(0,o._)("td",Io,[(0,o._)("div",null,[(0,o._)("p",To,(0,l.zw)(e.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(e.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])])])],42,po)])))),128))])):((0,o.wg)(),(0,o.iD)("div",Mo,[t?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,l.C_)(["d-flex mb-2",n.beautyBgJudge(t,a)])},Ao,2)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.otherAppointment,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"position-relative",key:e},[(0,o._)("div",Oo,[(0,o._)("div",{class:(0,l.C_)(["d-inline-block rounded-circle position-relative me-1 border border-white",n.VIPJudge(e.customerLevel)]),style:{width:"20px",height:"20px"}},[(0,o._)("span",zo,(0,l.zw)(e.customerBeauticianNickname),1)],2),(0,o._)("div",{class:(0,l.C_)(["me-auto",{"border-bottom border-white":e.medicalRecordId}]),onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("span",{class:"me-1 cursor-pointer",onClick:(0,i.iM)((t=>n.openCheckInModal(e)),["stop"])},(0,l.zw)(e.customerName),9,qo),(0,o._)("span",Ho,(0,l.zw)(e.courseName),1),(0,o._)("span",null,(0,l.zw)(e.operatorName||"不指定"),1)],42,Bo),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["ms-1",e.left?"dateOfAppointmentList-iconText bg-gray4":"anesthesiaTime-iconText"])},"麻",2)):(0,o.kq)("",!0),e.comment?((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"註",2)):(0,o.kq)("",!0),"CutInLine"===e.appointmentType?((0,o.wg)(),(0,o.iD)("span",{key:2,class:(0,l.C_)(["dateOfAppointmentList-iconText ms-1",e.left?"bg-gray4":"bg-iconBlue"])},"插",2)):(0,o.kq)("",!0)]),(0,o._)("div",{class:(0,l.C_)(["position-absolute w-100 d-none top-100 pt-1 rounded-15",`index${e.appointmentId}`]),style:{"z-index":"10"},onMouseenter:t=>n.showDetails(e.appointmentId),onMouseleave:t=>n.closeDetails(e.appointmentId)},[(0,o._)("p",Vo,(0,l.zw)(e.typeName),1),(0,o._)("div",Lo,[(0,o._)("p",So,(0,l.zw)(e.customerBirthday),1),(0,o._)("table",Fo,[(0,o._)("tbody",null,[e.courseName?((0,o.wg)(),(0,o.iD)("tr",Eo,[$o,(0,o._)("td",Ro,(0,l.zw)(e.courseName),1)])):(0,o.kq)("",!0),e.appointmentBodyPart?((0,o.wg)(),(0,o.iD)("tr",Yo,[Uo,(0,o._)("td",Ko,(0,l.zw)(e.appointmentBodyPart),1)])):(0,o.kq)("",!0),e.anesthesiaTime?((0,o.wg)(),(0,o.iD)("tr",Jo,[jo,(0,o._)("td",Wo,(0,l.zw)(e.anesthesiaTime),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[Go,(0,o._)("td",Qo,[(0,o._)("div",null,[(0,o._)("p",Zo,(0,l.zw)(e.comment),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherPartNameToArr(e.appointmentOtherPart),(e=>((0,o.wg)(),(0,o.iD)("p",{class:"mb-0",key:e},(0,l.zw)(e),1)))),128))])])])])])])],42,No)])))),128))]))],2)):(0,o.kq)("",!0),Object.values(e.clinicPeriodLastTime).includes(a)?((0,o.wg)(),(0,o.iD)("div",Xo)):(0,o.kq)("",!0)],2)])))),128))])])])):(0,o.kq)("",!0)]),(0,o._)("div",el,[(0,o._)("div",tl,[(0,o._)("div",al,[ol,(0,o._)("div",ll,[(0,o._)("div",il,[nl,(0,o._)("div",sl,[(0,o._)("div",rl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.modalHeaderData,((e,t)=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:e.medicalRecordId,class:(0,l.C_)([{active:n.modalFocusIndex===t},"btn btn-category rounded-pill me-2 mb-2 btn-checkIcon"]),onClick:t=>n.selectMedicalRecord(e)},[e.medicalRecordId?((0,o.wg)(),(0,o.iD)("img",cl)):(0,o.kq)("",!0),e.medicalRecordId?((0,o.wg)(),(0,o.iD)("img",pl)):(0,o.kq)("",!0),(0,o._)("span",ul,(0,l.zw)(e.courseType)+" : "+(0,l.zw)(e.course),1)],10,dl)))),128))])])]),(0,o._)("div",ml,[(0,o._)("div",hl,[yl,(0,o._)("div",vl,[(0,o._)("div",gl,[(0,o._)("div",bl,[(0,o._)("div",wl,[(0,o._)("span",Dl,[(0,o._)("span",{class:(0,l.C_)(["mb-0 fw-500 me-4 align-middle",n.modalData.notArrivedAppointmentIdList?"text-main-dark2":"text-gray5"])}," 客戶姓名 ",2),(0,o._)("div",kl,[(0,o._)("span",fl,(0,l.zw)(n.modalData.beauticianNickname),1)]),(0,o._)("span",_l,(0,l.zw)(n.modalData.name)+" "+(0,l.zw)(n.modalData.birthday),1)])])]),(0,o._)("div",xl,[(0,o._)("div",Cl,[(0,o._)("h6",{class:(0,l.C_)(["mb-0 fw-500 me-4",n.modalData.notArrivedAppointmentIdList?"text-main-dark2":"text-gray5"])}," 預約時間 ",2),(0,o._)("h6",Il,(0,l.zw)(n.convertTimeFormatSlash(n.modalData.appointmentDate)),1),(0,o._)("h6",Tl,(0,l.zw)(n.clinicPeriodToCh(n.modalData.clinicPeriod))+" "+(0,l.zw)(n.convertTimeFormatDeleteSecond(n.modalData.appointmentTime)),1)])])]),(0,o._)("div",Ml,[(0,o._)("div",Pl,[(0,o._)("div",Al,[(0,o._)("h6",{class:(0,l.C_)(["mb-0 fw-500 me-4",n.modalData.notArrivedAppointmentIdList?"text-main-dark2":"text-gray5"])}," 到診時間 ",2),n.modalData.arrivedTime?((0,o.wg)(),(0,o.iD)("h6",Ol,(0,l.zw)(n.deleteTTimeFormat(n.modalData.arrivedTime).time),1)):(0,o.kq)("",!0)])]),n.modalData.notArrivedAppointmentIdList?((0,o.wg)(),(0,o.iD)("div",zl,[(0,o._)("div",Bl,[ql,"AestheticMedicine"===e.department&&"OPD"!==n.modalData.courseType?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,class:"rounded-pill me-2 form-select text-main-dark2","onUpdate:modelValue":t[1]||(t[1]=e=>n.modalData.courseType=e),onChange:t[2]||(t[2]=e=>n.changeCourseType(n.modalData.courseType))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.courseTypes,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,Hl)))),128))],544)),[[i.bM,n.modalData.courseType]]):(0,o.kq)("",!0),(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t[3]||(t[3]=e=>n.modalData.courseId=e),onChange:t[4]||(t[4]=e=>n.changeCourseId(n.modalData.courseId))},[""===n.modalData.courseId?((0,o.wg)(),(0,o.iD)("option",Nl,"未選擇")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.coursesOptions,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.courseId,value:e.courseId},(0,l.zw)(e.courseName),9,Vl)))),128))],544),[[i.bM,n.modalData.courseId]])])])):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Ll,[(0,o._)("div",Sl,[Fl,(0,o._)("h6",El,(0,l.zw)(n.modalData.courseType)+"/ "+(0,l.zw)(n.modalData.courseId),1)])]))]),(0,o._)("div",$l,[n.modalData.notArrivedAppointmentIdList?((0,o.wg)(),(0,o.iD)("div",Rl,[(0,o._)("div",Yl,["AestheticMedicine"===e.department?((0,o.wg)(),(0,o.iD)("label",Ul," 指定醫師 ")):((0,o.wg)(),(0,o.iD)("label",Kl," 美 容 師 ")),(0,o.wy)((0,o._)("select",{class:"rounded-pill me-12 form-select text-main-dark2","onUpdate:modelValue":t[5]||(t[5]=e=>n.modalData.operator=e)},[Jl,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.operators,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.operatorId,value:e.operatorId},(0,l.zw)(e.operatorName),9,jl)))),128))],512),[[i.bM,n.modalData.operator]])])])):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Wl,[(0,o._)("div",Gl,["AestheticMedicine"===e.department?((0,o.wg)(),(0,o.iD)("h6",Ql,"指定醫師")):((0,o.wg)(),(0,o.iD)("h6",Zl,"美 容 師")),n.modalData.operator?((0,o.wg)(),(0,o.iD)("h6",Xl,(0,l.zw)(n.modalData.operator),1)):(0,o.kq)("",!0)])])),"IV"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",ei,[(0,o._)("div",{class:(0,l.C_)(["d-flex py-2",n.modalData.notArrivedAppointmentIdList?"text-main-dark2":"text-gray5"])},[ti,ai,n.modalData.anesthesiaType?((0,o.wg)(),(0,o.iD)("h6",oi,(0,l.zw)(n.modalData.anesthesiaType.name),1)):(0,o.kq)("",!0)],2)])):(0,o.kq)("",!0)]),n.modalData.notArrivedAppointmentIdList&&"AestheticMedicine"===e.department&&"IV"!==n.modalData.courseType&&"OPD"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",li,[ii,(0,o._)("div",{class:"p-0 rounded-15 position-relative form-select",onClick:t[7]||(t[7]=(0,i.iM)((e=>n.openAppointmentBodyPartsWindow()),["stop"]))},[(0,o._)("button",ni,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.bodyParts,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:e.id,class:"amis-badge amis-badge-second3 me-1 mb-2",onClick:(0,i.iM)((t=>n.deleteAppointmentBodyPartsItem(e)),["stop"])},[(0,o._)("span",ri,(0,l.zw)(e.name),1),di],8,si)))),128))]),(0,o.wy)((0,o._)("div",{class:"position-absolute bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3",style:{"z-index":"10",top:"110%"},"data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",pi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.bodyPartsOptions,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:e.id,onChange:t=>n.selectedBodyParts(e,a,t)},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`bodyPart${e.id}`,"onUpdate:modelValue":t[6]||(t[6]=e=>n.bodyParts=e)},null,8,mi),[[i.e8,n.bodyParts]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`bodyPart${e.id}`},(0,l.zw)(e.name),9,hi)],40,ui)))),128))])],8,ci),[[i.F8,n.bodyPartsWindow]])])])):(0,o.kq)("",!0),n.otherBodyPartJudge&&n.modalData.notArrivedAppointmentIdList?((0,o.wg)(),(0,o.iD)("div",yi,[(0,o._)("div",vi,[gi,(0,o._)("div",bi,[0!==n.updateBasicDataAndFeeData.length?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"position-absolute",style:{top:"4px"},onClick:t[8]||(t[8]=(0,i.iM)((e=>n.openHistoryCourseWindow()),["prevent","stop"]))},Di)):(0,o.kq)("",!0),(0,o.wy)((0,o._)("div",ki,[(0,o._)("div",fi,[(0,o._)("table",_i,[xi,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.updateBasicDataAndFeeData,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e,onClick:t=>n.selectUpdateBasicDataAndFeeData(e)},[(0,o._)("td",null,(0,l.zw)(e.part),1),(0,o._)("td",null,(0,l.zw)(e.scope)+" cm",1),(0,o._)("td",null,(0,l.zw)(e.price),1)],8,Ci)))),128))])])])],512),[[i.F8,n.data.historyCourseWindow]]),(0,o._)("div",Ii,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherBodyPartLength,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-3 gx-0",key:`key${e}`},[Ti,(0,o._)("div",Mi,[(0,o._)("div",Pi,[(0,o._)("div",Ai,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill text-main-dark2",placeholder:"部位","onUpdate:modelValue":e=>n.otherBodyParts[a].part=e,onBlur:e=>n.otherBodyPartInputBlur(a)},null,40,Oi),[[i.nr,n.otherBodyParts[a].part]])]),(0,o._)("div",zi,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill text-main-dark2 me-4",placeholder:"大小","onUpdate:modelValue":e=>n.otherBodyParts[a].scope=e,onBlur:e=>n.otherBodyScopeInputBlur(a)},null,40,Bi),[[i.nr,n.otherBodyParts[a].scope]])]),(0,o._)("div",qi,[(0,o._)("div",Hi,[1!==n.otherBodyPartLength?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:(0,l.C_)({"me-2":1!==n.otherBodyPartLength}),onClick:(0,i.iM)((e=>n.deleteOtherBodyPartLength(a)),["prevent"])},Li,10,Ni)):(0,o.kq)("",!0),1===n.otherBodyPartLength?((0,o.wg)(),(0,o.iD)("div",Si)):(0,o.kq)("",!0),e===n.otherBodyPartLength?((0,o.wg)(),(0,o.iD)("a",{key:2,href:"#",onClick:t[9]||(t[9]=(0,i.iM)((e=>n.addOtherBodyPartLength()),["prevent"]))},Ei)):(0,o.kq)("",!0)])])])])])))),128))])])])])):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList?((0,o.wg)(),(0,o.iD)("div",$i,[Ri,(0,o.wy)((0,o._)("textarea",{class:"form-control rounded-15",rows:"3","onUpdate:modelValue":t[10]||(t[10]=e=>n.modalData.comment=e)},null,512),[[i.nr,n.modalData.comment]])])):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Yi,[Ui,(0,o._)("h6",Ki,(0,l.zw)(n.modalData.comment),1)])),"OPD"===n.modalData.courseType||"健保"===n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",Ji)):(0,o.kq)("",!0)])]),(0,o._)("div",ji,["OPD"!==n.modalData.courseType&&"健保"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",Wi,Qi)):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList&&"OPD"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,l.C_)(["col-10 py-4 px-10 border-2 border-top border-gray1",{"pt-6":"IV"===n.modalData.courseType}]),style:{"min-height":"324px"}},["IV"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",Zi,[Xi,(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2",style:{width:"20%"},"onUpdate:modelValue":t[11]||(t[11]=e=>n.modalData.beautyConsumableId=e),disabled:0===n.beautyConsumables.length},[tn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.beautyConsumables,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,an)))),128))],8,en),[[i.bM,n.modalData.beautyConsumableId]])])):(0,o.kq)("",!0),"AestheticMedicine"===e.department&&"IV"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",on,[ln,(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2 me-2",style:{width:"20%"},"onUpdate:modelValue":t[12]||(t[12]=e=>n.modalData.anesthesiaSituation=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.anesthesiaSituations,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,nn)))),128))],512),[[i.bM,n.modalData.anesthesiaSituation]]),"Anesthesia"===n.modalData.anesthesiaSituation&&"MicroPlasticSurgery"!==n.modalData.courseType?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,class:"rounded-pill form-select text-main-dark2 me-2",style:{width:"20%"},onChange:t[13]||(t[13]=e=>n.calculateFee(n.modalData.anestheticFee)),"onUpdate:modelValue":t[14]||(t[14]=e=>n.modalData.anestheticFee=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.anestheticFees,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,sn)))),128))],544)),[[i.bM,n.modalData.anestheticFee]]):(0,o.kq)("",!0),"Anesthesia"===n.modalData.anesthesiaSituation&&"Free"!==n.modalData.anestheticFee?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:1,class:"rounded-pill form-select text-main-dark2",style:{width:"20%"},"onUpdate:modelValue":t[15]||(t[15]=e=>n.modalData.received=e)},[""===n.modalData.received?((0,o.wg)(),(0,o.iD)("option",rn)):(0,o.kq)("",!0),dn,cn],512)),[[i.bM,n.modalData.received]]):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"MicroPlasticSurgery"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",pn,[un,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.allBodyParts,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"ps-7"},["Other"!==e.id?((0,o.wg)(),(0,o.iD)("p",mn,(0,l.zw)(e.name)+" :",1)):((0,o.wg)(),(0,o.iD)("p",hn,(0,l.zw)(e.name)+" / "+(0,l.zw)(e.part)+" :",1)),(0,o._)("div",{class:"p-0 rounded-15 mb-2 form-select",onClick:(0,i.iM)((e=>n.openPaymentMethodOption(t)),["stop"])},[(0,o._)("button",vn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodData[t].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:`${e.id}${t}`,onClick:(0,i.iM)((a=>n.deleteSelectedPaymentMethod(e,t)),["stop"]),class:"amis-badge amis-badge-second3 me-1 mb-2"},[(0,o._)("span",bn,(0,l.zw)(e.name),1),wn],8,gn)))),128))])],8,yn),"Other"!==n.allBodyParts[t].id?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:2,class:"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2","data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",kn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethods,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:`${e.id}${t}`},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`paymentMethod${e.id}${t}`,"onUpdate:modelValue":e=>n.paymentMethodData[t].paymentMethod=e,onChange:a=>n.selectedPaymentMethod(e,t,a)},null,40,fn),[[i.e8,n.paymentMethodData[t].paymentMethod]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`paymentMethod${e.id}${t}`},(0,l.zw)(e.name),9,_n)])))),128))])],8,Dn)),[[i.F8,n.paymentMethodSwitch[t].switch]]):(0,o.kq)("",!0),"Other"===n.allBodyParts[t].id?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:3,class:"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2","data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",Cn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodsForOtherBodyparts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:`${e.id}${t}`},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`paymentMethod${e.id}${t}`,"onUpdate:modelValue":e=>n.paymentMethodData[t].paymentMethod=e,onChange:a=>n.selectedPaymentMethod(e,t,a)},null,40,In),[[i.e8,n.paymentMethodData[t].paymentMethod]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`paymentMethod${e.id}${t}`},(0,l.zw)(e.name),9,Tn)])))),128))])],8,xn)),[[i.F8,n.paymentMethodSwitch[t].switch]]):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodData[t].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"ps-2 d-flex w-100",key:`${e.id}${t}`},[(0,o._)("div",Mn,[(0,o._)("div",Pn,[(0,o._)("div",An,[On,(0,o._)("p",zn,(0,l.zw)(e.name),1)])]),(0,o._)("div",Bn,["Voucher"===e.id?((0,o.wg)(),(0,o.iD)("div",qn,[(0,o._)("div",Hn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.voucherOrderDetailData[t],(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.voucherId,class:"mb-2 me-2"},[(0,o._)("button",{type:"button",class:"btn border border-1 border-gray2 text-main-dark2 rounded-pill d-flex align-items-center",onClick:a=>n.deleteVoucherData(e,t)},[(0,o._)("span",Vn,(0,l.zw)(e.voucherId),1),Ln],8,Nn)])))),128)),(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill d-inline-block align-middle me-2 mb-2",style:{width:"30%"},placeholder:"卷號","onUpdate:modelValue":e=>n.voucherInput[t]=e,onKeydown:(0,i.D2)((e=>n.voucherDataEnter(t)),["enter"])},null,40,Sn),[[i.nr,n.voucherInput[t]]]),(0,o._)("div",Fn,[En,(0,o.wy)((0,o._)("input",{type:"number",class:"align-middle form-control rounded-start rounded-pill d-inline-block align-middle w-50",placeholder:"數量","onUpdate:modelValue":e=>n.oweVoucherInput[t].oweAmount=e,min:0!==n.voucherOrderDetailData[t].length?0:1},null,8,$n),[[i.nr,n.oweVoucherInput[t].oweAmount]])])])])):(0,o.kq)("",!0),"Activity"===e.id?((0,o.wg)(),(0,o.iD)("div",Rn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.activityData[t],((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:a},[(0,o._)("div",Yn,[(0,o._)("div",Un,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.prizeId=t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.prizeData,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.prizeId,key:e.prizeId},(0,l.zw)(`${e.activityName}_${e.prizeLevel}_${e.prizeName}`),9,Jn)))),128))],8,Kn),[[i.bM,e.prizeId]])])]),(0,o._)("div",jn,[(0,o._)("div",Wn,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill",placeholder:"卷號","onUpdate:modelValue":t=>e.couponNumber=t},null,8,Gn),[[i.nr,e.couponNumber]])])]),(0,o._)("div",Qn,[1!==n.activityData[t].length?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"me-2",onClick:(0,i.iM)((e=>n.deleteActivityItem(t,a)),["prevent"])},es,8,Zn)):(0,o.kq)("",!0),1===n.activityData[t].length||n.activityData[t].length===a+1?((0,o.wg)(),(0,o.iD)("a",{key:1,href:"#",onClick:(0,i.iM)((e=>n.addActivityItem(t)),["prevent"])},os,8,ts)):(0,o.kq)("",!0)])])))),128))])):(0,o.kq)("",!0),"Cash"===e.id&&"Other"!==n.allBodyParts[t].id?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:2},(0,o.Ko)(n.cashData[t],((e,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},[(0,o._)("div",ls,[(0,o._)("div",is,[(0,o._)("div",ns,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.priceType=t,onChange:a=>n.changePriceType(e,t)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.priceTypes,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,rs)))),128))],40,ss),[[i.bM,e.priceType]])])]),"Deposit"!==e.priceType?((0,o.wg)(),(0,o.iD)("div",ds,[(0,o._)("div",cs,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill","onUpdate:modelValue":t=>e.price=t,onBlur:a=>n.cashInputBlur(e,t),min:"0"},null,40,ps),[[i.nr,e.price]])])])):(0,o.kq)("",!0),(0,o._)("div",us,[(0,o._)("div",ms,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.received=t},gs,8,hs),[[i.bM,e.received]])])])]),"Deposit"===e.priceType?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.depositData,((a,s)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:s},[(0,o._)("div",bs,[(0,o._)("div",ws,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":e=>a.voucherType=e},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.voucherTypes,(t=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t.id},[n.voucherTypesJudge(e.depositData,t.id,a.voucherType)?((0,o.wg)(),(0,o.iD)("option",{key:0,value:t.id},(0,l.zw)(t.name),9,ks)):(0,o.kq)("",!0)],64)))),128))],8,Ds),[[i.bM,a.voucherType]])])]),(0,o._)("div",fs,[(0,o._)("div",_s,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill",onBlur:a=>n.cashInputBlur(e,t),"onUpdate:modelValue":e=>a.amountOfMoney=e,min:"0"},null,40,xs),[[i.nr,a.amountOfMoney]])])]),(0,o._)("div",Cs,[1!==e.depositData.length?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"me-2",onClick:(0,i.iM)((e=>n.deleteDepositInput(t,s)),["prevent"])},Ms,8,Is)):(0,o.kq)("",!0),1===e.depositData.length||e.depositData.length===s+1&&n.commonDataList.voucherTypes.length>e.depositData.length?((0,o.wg)(),(0,o.iD)("a",{key:1,href:"#",onClick:(0,i.iM)((a=>n.addDepositInput(t,e.depositData)),["prevent"])},Os,8,Ps)):(0,o.kq)("",!0)])])))),128)):(0,o.kq)("",!0)],64)))),128)):(0,o.kq)("",!0),"Cash"===e.id&&"Other"===n.allBodyParts[t].id?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:3},(0,o.Ko)(n.cashData[t],((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:a},[(0,o._)("div",zs,[(0,o._)("div",Bs,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.priceType=t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataListForOhterBodypart.priceTypes,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,Hs)))),128))],8,qs),[[i.bM,e.priceType]])])]),(0,o._)("div",Ns,[(0,o._)("div",Vs,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill","onUpdate:modelValue":t=>e.price=t,onBlur:a=>n.cashInputBlur(e,t),min:"0"},null,40,Ls),[[i.nr,e.price]])])]),(0,o._)("div",Ss,[(0,o._)("div",Fs,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.received=t},Ys,8,Es),[[i.bM,e.received]])])])])))),128)):(0,o.kq)("",!0)])])])))),128))])))),128))])):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList||"健保"===n.modalData.courseType?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:2,class:(0,l.C_)(["col-10 py-6 px-10 border-2 border-top border-gray1",{"py-6":"微整"==n.modalData.courseType||"點滴"==n.modalData.courseType}]),style:{"min-height":"324px"}},[(0,o._)("div",Us,[(0,o._)("div",Ks,[(0,o._)("div",Js,[js,(0,o._)("h6",Ws,[(0,o._)("span",null,(0,l.zw)(n.chargeContent.anesthesiaSituationName),1),n.chargeContent.anestheticOrderDetail?((0,o.wg)(),(0,o.iD)("span",Gs," / "+(0,l.zw)("Free"===n.chargeContent.anestheticOrderDetail.anestheticFeeId?"免費":`${n.chargeContent.anestheticOrderDetail.price}元`),1)):(0,o.kq)("",!0),n.chargeContent.anestheticOrderDetail&&"Free"!==n.chargeContent.anestheticOrderDetail.anestheticFeeId?((0,o.wg)(),(0,o.iD)("span",Qs," / "+(0,l.zw)(n.chargeContent.anestheticOrderDetail.received?"費用已收":"費用未收"),1)):(0,o.kq)("",!0)])])])]),"微整"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",Zs,[Xs,(0,o._)("div",er,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.chargeContent.informationForbodyParts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"w-100 text-main-dark2",key:e.id},[(0,o._)("h6",tr,(0,l.zw)(e.name),1),e.voucherOrderDetail||e.oweVoucher?((0,o.wg)(),(0,o.iD)("div",ar,[or,(0,o._)("div",lr,[(0,o._)("h6",ir,(0,l.zw)(e.voucherOrderDetail),1),0!==e.oweVoucher?((0,o.wg)(),(0,o.iD)("h6",nr,"欠卷 "+(0,l.zw)(e.oweVoucher),1)):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),0!==Object.keys(e.coursePartOrderDetail).length?((0,o.wg)(),(0,o.iD)("div",sr,[rr,0===e.coursePartOrderDetail.depositData.length?((0,o.wg)(),(0,o.iD)("div",dr,[(0,o._)("h6",cr,(0,l.zw)(e.coursePartOrderDetail.priceType),1),(0,o._)("h6",pr,"$"+(0,l.zw)(e.coursePartOrderDetail.price),1),(0,o._)("h6",{class:(0,l.C_)(["mb-0",e.coursePartOrderDetail.received?"text-gray5":"text-mark"])}," ("+(0,l.zw)(""+(e.coursePartOrderDetail.received?"費用已收":"費用未收"))+") ",3)])):(0,o.kq)("",!0),0!==e.coursePartOrderDetail.depositData.length?((0,o.wg)(),(0,o.iD)("div",ur,[(0,o._)("div",mr,[(0,o._)("h6",hr,(0,l.zw)(e.coursePartOrderDetail.priceType),1),(0,o._)("h6",{class:(0,l.C_)(["mb-0",e.coursePartOrderDetail.received?"text-gray5":"text-mark"])}," ("+(0,l.zw)(""+(e.coursePartOrderDetail.received?"費用已收":"費用未收"))+") ",3)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.coursePartOrderDetail.depositData,((t,a)=>((0,o.wg)(),(0,o.iD)("h6",{class:"mb-0 d-inline",key:t},[(0,o.Uk)((0,l.zw)(t.voucherType)+" $"+(0,l.zw)(t.amountOfMoney)+" ",1),a!==e.coursePartOrderDetail.depositData.length-1?((0,o.wg)(),(0,o.iD)("h6",yr," / ")):(0,o.kq)("",!0)])))),128))])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),0!==e.couponOrderDetail.length?((0,o.wg)(),(0,o.iD)("div",vr,[gr,(0,o._)("div",br,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.couponOrderDetail,(e=>((0,o.wg)(),(0,o.iD)("h6",{key:e.id},(0,l.zw)(e.prizeName)+" / "+(0,l.zw)(e.couponNumber),1)))),128))])])):(0,o.kq)("",!0)])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.chargeContent.informationForOtherBodyParts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"w-100 text-main-dark2",key:e},[(0,o._)("h6",wr,(0,l.zw)(e.otherPartName),1),(0,o._)("div",Dr,[kr,(0,o._)("div",fr,[(0,o._)("h6",_r,(0,l.zw)(e.priceType),1),(0,o._)("h6",xr,"$"+(0,l.zw)(e.price),1),(0,o._)("h6",{class:(0,l.C_)(["mb-0",e.received?"text-gray5":"text-mark"])}," ("+(0,l.zw)(""+(e.received?"費用已收":"費用未收"))+") ",3)])])])))),128))])])):(0,o.kq)("",!0)],2))])]),(0,o._)("div",Cr,[Ir,(0,o._)("div",Tr,[n.modalData.notArrivedAppointmentIdList?((0,o.wg)(),(0,o.iD)("div",Mr,[Pr,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control w-auto d-inline-block rounded-pill me-5",placeholder:"0","onUpdate:modelValue":t[16]||(t[16]=e=>n.total=e)},null,512),[[i.nr,n.total]]),Ar,(0,o._)("div",Or,[zr,(0,o._)("button",{type:"button",class:"btn btn-alert-main rounded-pill ms-2",disabled:n.loginExpirationJudgment(),onClick:t[17]||(t[17]=e=>n.logIn())},"登 錄",8,Br)])])):(0,o.kq)("",!0),n.modalData.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",qr,[(0,o._)("div",Hr,[Nr,(0,o._)("h6",Vr,(0,l.zw)(n.chargeContent.totalExpense),1)]),Lr]))])])])])])],512)],64)}var Fr=a(8877),Er=a(8262),$r=a(3102);const Rr=(0,$r.Z)(),{fetchApi:Yr}=Rr;var Ur=(0,Er.Q_)("beautyConsumable Store",{state:()=>({beautyConsumableData:[],beautyConsumableByCourse:[]}),actions:{async getAllBeautyConsumable(){const e="/api/BeautyConsumable/GetAll",t=await Yr(e);this.beautyConsumableData=t.data},async getBeautyConsumableByCourse(e){const t=`/api/BeautyConsumable/GetByCourse?courseId=${e}`,a=await Yr(t);this.beautyConsumableByCourse=a.data}}}),Kr={name:"dateOfAppointment",setup(){const e=Ur(),{beautyConsumableByCourse:t}=(0,Er.Jk)(e),{getBeautyConsumableByCourse:a}=e,l=(0,o.f3)("checkIn"),i=(0,o.f3)("alertMessage"),n=(0,o.f3)("textConversionTool"),{state:s,getDaysOutpatientData:r,getClinicPeriodLastTime:d,convertTimeFormatSlash:c,courseEnter:p,continuousOrReservedToggle:u}=l,{clinicPeriodToCh:m,convertTimeFormatDeleteSecond:h,deleteTTimeFormat:y}=n,{updateMessage:v}=i,g=(0,o.f3)("fetchFunction"),{fetchApi:b,getTokenFromCookie:w}=g,D=(0,ze.qj)({focusIndex:null,stripCalendar:[],historyCourseWindow:!1}),k=(0,ze.iH)(null);let f;(0,o.bv)((()=>{f=new Fr.u_(k.value)}));const _=e=>{switch(e){case"IV":return!1;case"OPD":return!1;default:return!0}},x=(0,ze.iH)(!1),C=()=>{if(x.value)return null;function e(){x.value=!1,document.removeEventListener("click",e)}x.value=!0,document.addEventListener("click",e)},I=({date:e,month:t,year:a})=>{s.date=e,s.month=t-1,s.year=a,r()},T=e=>{const t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];return t[e]},M=e=>{if(!e)return!1;let t=!1;const a=e.split("、");return a.forEach((e=>{"全臉"===e&&(t=!0)})),!(1===a.length&&t||0===a.length)},P=e=>{switch(e){case"Normal":return"bg-white";case"Gold":return"bg-gold";case"Purple":return"bg-purple"}},A=(e,t)=>{let a=new Date(e,t+1,1),o=[],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];a.setHours(a.getHours()-1);const i=a.getDate();for(let n=1;n<=i;n++){let a=new Date(e,t,n).getDay();o.push({day:l[a],date:n,month:t+1,year:e})}return o},O=(e,t,a)=>(a?t-=1:t+=1,12===t&&(t=0,e+=1),-1===t&&(t=11,e-=1),{year:e,month:t}),z=()=>{let e=A(s.year,s.month);e.forEach(((e,t)=>{e.date===s.date&&(D.focusIndex=t)}));const t=e.length-10,a=e.length-t;if(D.focusIndex<=a){const{year:t,month:a}=O(s.year,s.month,!0);let o=A(t,a);e=o.concat(e)}if(D.focusIndex>=t){const{year:t,month:a}=O(s.year,s.month,!1);let o=A(t,a);e=e.concat(o)}e.forEach(((e,t)=>{e.date===s.date&&e.month===s.month+1&&e.year===s.year&&(D.focusIndex=t)})),D.stripCalendar=e,B(D.focusIndex)},B=e=>{const t=e-5;(0,o.Y3)((()=>{const e=document.querySelectorAll(".calendarList");let a=0;for(let l=0;l<t;l++)a+=e[l].offsetWidth+32;const o=document.querySelector(".scroll");o.scrollTo({left:a,behavior:"smooth"})}))},q=e=>e?e.split(","):null,H=(e,{id:t,time:a})=>{const o=s.timeRange.findIndex((e=>e.time===a&&e.operatorId===t)),l=s.timeRange.findIndex((e=>e.time===a&&e.left&&e.operatorId===t));if(!e.open)return"bg-gray2";if(-1!==l)return"bg-gray3";if(e.normalAppointment||-1!==o){const t=e.normalAppointment?e.normalAppointment.left:null;if(null===e.otherAppointment)return t?"bg-gray3":"bg-green";if(Array.isArray(e.otherAppointment))return 0===e.otherAppointment.length&&t?"bg-gray3":"bg-green"}if(!e.normalAppointment){if(e.otherAppointment){const t=e.otherAppointment.every((e=>!0===e.left));return t?"bg-gray3":"bg-green"}return"bg-white"}},N=(e,t)=>{const a=s.timeRange.findIndex((e=>e.time===t)),o=s.timeRange.findIndex((e=>e.time===t&&e.left));return e.open?-1!==o?{"bg-gray3":!0}:e.normalAppointment||-1!==a||e.otherAppointment?{"bg-green":!0}:e.normalAppointment?void 0:{"bg-white":!0}:{"bg-gray2":!0}},V=(e,t)=>t?e.left?"bg-gray3":"bg-green":e.left?"bg-gray3":"bg-transparent",L=e=>{let t=document.querySelector(`.index${e}`);t.classList.remove("d-none")},S=e=>{let t=document.querySelector(`.index${e}`);t.classList.add("d-none")},F=e=>{let t=D.stripCalendar.length;const a=t-10,o=t-a;D.focusIndex=e?D.focusIndex-6:D.focusIndex+6;const l=D.stripCalendar[D.focusIndex];if(D.focusIndex<=o){const{year:e,month:t}=O(D.stripCalendar[D.focusIndex].year,D.stripCalendar[D.focusIndex].month-1,!0);let a=A(e,t);D.stripCalendar=a.concat(D.stripCalendar)}if(D.focusIndex>=a){const{year:e,month:t}=O(D.stripCalendar[D.focusIndex].year,D.stripCalendar[D.focusIndex].month-1,!1);let a=A(e,t);D.stripCalendar=D.stripCalendar.concat(a)}D.stripCalendar.forEach(((e,t)=>{e.date===l.date&&e.month===l.month&&e.year===l.year&&(D.focusIndex=t)})),B(D.focusIndex)},E=e=>{const t=e.split(":");let a=(new Date).getTime(),o=new Date(s.year,s.month,s.date,parseInt(t[0]),parseInt(t[1])).getTime();return a<o},$=(0,ze.iH)({}),R=(0,ze.iH)(0);let Y={};const U=(0,ze.iH)([]),K=(0,ze.iH)([]),J=(0,ze.iH)([]),j=(0,ze.iH)([]),W=(0,ze.iH)([]),G=(0,ze.iH)([]),Q=(0,ze.iH)([]),Z=(0,ze.iH)([]),X=(0,ze.iH)([]),ee=(0,ze.iH)([]),te=(0,ze.iH)([]),ae=(0,ze.iH)([]),oe=(0,ze.iH)([]),le=(0,ze.iH)([]),ie=(0,ze.iH)(1),ne=(0,ze.iH)([]);let se=[];const re=(0,ze.iH)(0),de=(0,ze.iH)({}),ce=(0,ze.iH)({}),pe=(0,ze.iH)({}),ue=(0,ze.iH)([]),me=async e=>{const t=`${s.year}-${s.month+1<=9?"0":""}${s.month+1}-${s.date<=9?"0":""}${s.date}`,a=`/api/MedicalRecord/GetInitCreateMedicalRecordData?departmentId=${s.department}&customerId=${e}&date=${t}`,o=w(),l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},method:"GET"},i=await b(a,l);Y=i.data,f.show()},he=async e=>{await ye(e);const t=Y.initMedicalRecordDetails[R.value].medicalRecordDetail.courseId;Je(e.customerId,t),f.show()};async function ye(e){const{customerId:t,medicalRecordId:a,appointmentId:o}=e;await me(t);const{customer:l,initMedicalRecordDetails:i,commonData:n}=Y;i.forEach(((e,t)=>{if(0!==e.notArrivedAppointmentIdList.length&&o)return e.notArrivedAppointmentIdList.forEach((e=>{if(e===o)return R.value=t,null})),null;e.medicalRecordDetail.id===a&&a&&(R.value=t)}));const r=[];let d,c=i[R.value].bodyParts;"Beauty"===s.department&&(c=["1"]),"IV"===i[R.value].medicalRecordDetail.courseType&&(c=[null]),c.forEach((e=>{const t=[];let a={},o="";if("Other"===e)return null;d=i[R.value].bodyPartsOptions.find((t=>t.id===e)),"Beauty"===s.department&&(d={id:"1",name:"全臉"}),"IV"===i[R.value].medicalRecordDetail.courseType&&(d={id:null,name:"點滴"});const{name:l,id:c}=d;i[R.value].couponOrderDetails.forEach((a=>{if(e===a.bodyPartId){const e=n.prizeData.find((e=>e.prizeId===a.prizeId));t.push({couponNumber:a.couponNumber,bodyPartId:a.bodyPartId,prizeName:`${e.activityName}_${e.prizeLevel}_${e.prizeName}`})}})),i[R.value].coursePartOrderDetails.forEach((t=>{if(e===t.bodyPartId){a=t;const e=n.priceTypes.find((e=>a.priceType===e.id)).name;a.priceType=e}})),i[R.value].voucherOrderDetails.forEach((t=>{e===t.bodyPartId&&(o+=`${t.voucherId} / `)}));let p=0;i[R.value].oweVoucherSituationData.forEach((t=>{e===t.bodyPartId&&(p=t.oweAmount)})),0===p&&(o=o.substring(0,o.length-3)),r.push({name:l,id:c,couponOrderDetail:t,coursePartOrderDetail:a,voucherOrderDetail:o,oweVoucher:p})}));const p=i[R.value].coursePartOrderDetails.filter((e=>"Other"===e.bodyPartId)).map((e=>(e.priceType=n.priceTypes.find((t=>e.priceType===t.id)).name,e))),u=n.anesthesiaSituations.find((e=>e.id===i[R.value].medicalRecordDetail.anesthesiaSituation)),m=i[R.value].anestheticOrderDetail;pe.value={anesthesiaSituationName:u?u.name:null,anestheticOrderDetail:m,informationForbodyParts:r,informationForOtherBodyParts:p,totalExpense:0},i[R.value].coursePartOrderDetails.forEach((e=>{pe.value.totalExpense+=parseInt(e.price)})),de.value=n,ce.value=JSON.parse(JSON.stringify(n)),ce.value.priceTypes=ce.value.priceTypes.filter((e=>"Once"===e.id));const h=JSON.parse(JSON.stringify(de.value.courseTypes));X.value=[],ee.value=[],te.value=[],ae.value=[],oe.value=[],$.value={name:l.name,birthday:l.birthday,beauticianNickname:l.beauticianNickname,appointmentDate:i[R.value].medicalRecordDetail.appointmentDate,appointmentTime:i[R.value].medicalRecordDetail.appointmentTime,clinicPeriod:i[R.value].medicalRecordDetail.clinicPeriod,arrivedTime:i[R.value].medicalRecordDetail.arrivedTime,operator:i[R.value].medicalRecordDetail.operator,courseType:i[R.value].medicalRecordDetail.courseType,courseId:i[R.value].medicalRecordDetail.courseId,anesthesiaType:de.value.anesthesiaTypes.find((e=>e.id===i[R.value].medicalRecordDetail.anesthesiaType)),comment:i[R.value].medicalRecordDetail.comment,anesthesiaSituation:i[R.value].medicalRecordDetail.anesthesiaSituation,anestheticFee:de.value.anestheticFees[0].id,received:"",beautyConsumableId:"",notArrivedAppointmentIdList:0!==i[R.value].notArrivedAppointmentIdList.length},ne.value=i[R.value].appointmentOtherParts,ie.value=i[R.value].appointmentOtherParts.length,$.value.notArrivedAppointmentIdList||($.value.operator=$.value.operator?de.value.operators.find((e=>e.operatorId===$.value.operator)).operatorName:null,$.value.courseType=de.value.courseTypes.find((e=>e.id===$.value.courseType)).name,$.value.courseId=i[R.value].courses.find((e=>e.courseId===$.value.courseId)).courseName,ne.value=i[R.value].appointmentOtherParts),ue.value=i[R.value].beautyConsumables,U.value=i[R.value].courses,K.value=i[R.value].bodyPartsOptions,"Laser"!==$.value.courseType&&"MicroPlasticSurgery"!==$.value.courseType||(de.value.courseTypes=de.value.courseTypes.filter((e=>"Laser"===e.id||"MicroPlasticSurgery"===e.id))),"IV"===$.value.courseType&&(de.value.courseTypes=de.value.courseTypes.filter((e=>"IV"===e.id))),"OPD"===$.value.courseType&&(de.value.courseTypes=de.value.courseTypes.filter((e=>"OPD"===e.id))),j.value=i.map((e=>{const a=h.find((t=>t.id===e.medicalRecordDetail.courseType)).name,o=e.courses.find((t=>t.courseId===e.medicalRecordDetail.courseId)).courseName;return{courseType:a,course:o,medicalRecordId:e.medicalRecordDetail.id,customerId:t,appointmentId:e.notArrivedAppointmentIdList[0]?e.notArrivedAppointmentIdList[0]:null}})),J.value=i[R.value].bodyPartsOptions.filter((e=>i[R.value].bodyParts.includes(e.id)));let y=i[R.value].bodyPartsOptions.filter((e=>i[R.value].bodyParts.includes(e.id)));W.value=[],se=[],se=y.filter((e=>"Other"!==e.id)),"Beauty"===s.department&&se.push({id:"1",name:"全臉"}),"IV"===$.value.courseType&&se.push({id:null,name:"點滴"}),se.forEach((e=>{W.value.push({bodyPartId:e.id,paymentMethod:[{id:"Voucher",name:"療程專用券",sequence:1,active:!0}]}),G.value.push({bodyPartId:e.id,switch:!1}),X.value.push([]),ee.value.push([]),te.value.push(""),ae.value.push({bodyPartId:e.id,oweAmount:0}),oe.value.push([])}));let v=ne.value.map((e=>({...e,id:"Other",name:"其他"})));v.forEach((()=>{W.value.push({bodyPartId:"Other",paymentMethod:[{id:"Cash",name:"現金支付",sequence:3,active:!0}]}),G.value.push({bodyPartId:"Other",switch:!1}),ee.value.push([])})),le.value=[...se,...v];for(let s=se.length;s<le.value.length;s++)ee.value[s].push({bodyPartId:le.value[s].id,paymentMethodId:"Cash",priceType:"Once",price:le.value[s].price,received:!1,otherPartName:le.value[s].part,otherPartScope:le.value[s].scope,depositData:[]});Q.value=i[R.value].paymentMethods,Z.value=JSON.parse(JSON.stringify(i[R.value].paymentMethods)),Z.value=Z.value.filter((e=>"Cash"===e.id||"CreditCard"===e.id||"Free"===e.id)),Se()}function ve(e){ye(e)}const ge=(0,o.Fl)((()=>{let e=!1;return 0!==J.value.length&&J.value.forEach((t=>{"Other"===t.id&&(e=!0)})),e})),be=()=>{if(D.historyCourseWindow)return null;function e(){D.historyCourseWindow=!1,document.removeEventListener("click",e)}D.historyCourseWindow=!0,document.addEventListener("click",e)},we=()=>{ie.value++,ne.value.push({part:"",scope:"",price:""}),W.value.push({bodyPartId:"Other",paymentMethod:[{id:"Cash",name:"現金支付",sequence:3,active:!0}]}),G.value.push({bodyPartId:"Other",switch:!1}),le.value.push({id:"Other",name:"其他",part:"",price:"",scope:""}),ee.value.push([]),ee.value[ee.value.length-1].push({bodyPartId:"Other",paymentMethodId:"Cash",priceType:"Once",price:null,received:!1,otherPartName:"",otherPartScope:"",depositData:[]})};function De(e,t,a){return a===t||!e.some((e=>e.voucherType===t))}const ke=e=>{ie.value--,ne.value.splice(e,1);const t=J.value.filter((e=>"Other"!==e.id)),a=t.length,o=a+e;le.value.splice(o,1),W.value.splice(o,1),G.value.splice(o,1),re.value-=ee.value[o][0].price,ee.value.splice(o,1)},fe=e=>{let t=J.value.indexOf(e);if(J.value.splice(t,1),"Other"!==e.id){const t=le.value.indexOf(e);le.value.splice(t,1),se.splice(t,1),W.value.splice(t,1),G.value.splice(t,1),X.value.splice(t,1);let a=0;0!==ee.value[t].length&&("Deposit"===ee.value[t][0].priceType?(ee.value[t][0].depositData.forEach((e=>{a+=e.amountOfMoney})),re.value-=a):re.value-=ee.value[t][0].price),ee.value.splice(t,1),te.value.splice(t,1),ae.value.splice(t,1),oe.value.splice(t,1)}else{ge.value=!0,ie.value=0,ne.value=[];for(let e=0;e<le.value.length;e++)"Other"===le.value[e].id&&(le.value.splice(e,1),W.value.splice(e,1),G.value.splice(e,1),re.value-=ee.value[e][0].price,ee.value.splice(e,1),e--)}};async function _e(e){U.value=await Ye(e),$.value.courseId="",J.value=[],K.value=[],X.value=[],W.value=[],G.value=[],ee.value=[],te.value=[],ae.value=[],oe.value=[],le.value=[],$.value.beautyConsumableId="",$.value.anestheticFee=de.value.anestheticFees[0].id,re.value=0}async function xe(e){await a(e),ue.value=t.value,K.value=await Ue(e),J.value=[],X.value=[],W.value=[],G.value=[],ee.value=[],te.value=[],ae.value=[],oe.value=[],le.value=[],$.value.beautyConsumableId="",$.value.anestheticFee=de.value.anestheticFees[0].id,re.value=0}function Ce(e){if(G.value[e].switch)return null;let t;const a=G.value.find(((e,a)=>{if(e.switch)return t=a,e}));function o(){G.value[e].switch=!1,document.removeEventListener("click",o)}a&&(G.value[t].switch=!1,document.removeEventListener("click",o)),G.value[e].switch=!0,document.addEventListener("click",o)}function Ie(e,t){const a=W.value[t].paymentMethod.indexOf(e);if(W.value[t].paymentMethod.splice(a,1),"Cash"===e.id){let e=0;if("Deposit"===ee.value[t][0].priceType)return ee.value[t][0].depositData.forEach((t=>{e+=t.amountOfMoney})),re.value-=e,ee.value[t]=[],null;re.value-=ee.value[t][0].price,ee.value[t]=[]}"Voucher"===e.id&&(oe.value[t]=[],ae.value[t].oweAmount=null),"Activity"===e.id&&(X.value[t]=[])}function Te(e){oe.value[e].push({bodyPartId:le.value[e].id,voucherId:te.value[e]}),te.value[e]=""}function Me(e,t){const a=oe.value[t].indexOf(e);oe.value[t].splice(a,1)}function Pe(e,t){X.value[e].splice(t,1)}function Ae(e){X.value[e].push({prizeId:de.value.prizeData[0].prizeId,bodyPartId:le.value[e].id,couponNumber:""})}function Oe(e,t){if(re.value-=e.price,ee.value[t][0].price=null,"Deposit"===e.priceType)return ee.value[t][0].price=null,ee.value[t][0].depositData.push({voucherType:de.value.voucherTypes[0].id,amountOfMoney:null}),null;let a=0;return"Deposit"!==e.priceType&&0!==ee.value[t][0].depositData.length?(ee.value[t][0].depositData.forEach((e=>{a+=e.amountOfMoney})),re.value-=a,ee.value[t][0].depositData=[],null):void 0}function Be(e,t){const a=de.value.voucherTypes.filter((e=>!t.some((t=>t.voucherType===e.id))));ee.value[e][0].depositData.push({voucherType:a[0].id,amountOfMoney:null})}function qe(e,t){let a=ee.value[e][0].depositData[t].amountOfMoney;re.value-=a,ee.value[e][0].depositData.splice(t,1)}function He(e,t,a){const o=a.target.checked;if("Voucher"!==e.id||o||(oe.value[t]=[],ae.value[t].oweAmount=null),"Activity"===e.id&&o&&X.value[t].push({prizeId:de.value.prizeData[0].prizeId,bodyPartId:le.value[t].id,couponNumber:""}),"Activity"!==e.id||o||(X.value[t]=[]),"Cash"===e.id&&!o){let e=0;if("Deposit"===ee.value[t][0].priceType)return ee.value[t][0].depositData.forEach((t=>{e+=t.amountOfMoney})),re.value-=e,ee.value[t]=[],null;re.value-=ee.value[t][0].price,ee.value[t]=[]}"Cash"===e.id&&o&&ee.value[t].push({bodyPartId:le.value[t].id,paymentMethodId:"Cash",priceType:"Once",price:null,received:!1,otherPartName:le.value[t].part?le.value[t].part:"",otherPartScope:le.value[t].scope?le.value[t].scope:"",depositData:[]})}function Ne(e,t,a){const o=a.target.checked,l=J.value.filter((e=>"Other"!==e.id)),i=l.length-1;if(o&&"Other"!==e.id){const e=l[i];le.value.splice(i,0,e),W.value.splice(i,0,{bodyPartId:e.id,paymentMethod:[{id:"Voucher",name:"療程專用券",sequence:1,active:!0}]}),G.value.splice(i,0,[]),X.value.splice(i,0,[]),ee.value.splice(i,0,[]),te.value.splice(i,0,""),ae.value.splice(i,0,{bodyPartId:e.id,oweAmount:0}),oe.value.splice(i,0,[])}if(!o&&"Other"!==e.id){const e=le.value.find((e=>!l.includes(e))),t=le.value.indexOf(e);le.value.splice(t,1),se.splice(t,1),W.value.splice(t,1),G.value.splice(t,1),X.value.splice(t,1);let a=0;0!==ee.value[t].length&&("Deposit"===ee.value[t][0].priceType?(ee.value[t][0].depositData.forEach((e=>{a+=e.amountOfMoney})),re.value-=a):re.value-=ee.value[t][0].price),ee.value.splice(t,1),te.value.splice(t,1),ae.value.splice(t,1),oe.value.splice(t,1)}if(o&&"Other"===e.id&&(ie.value=1,ne.value.push({part:"",scope:"",price:""}),le.value.push({id:"Other",name:"其他",part:"",price:"",scope:""}),W.value.push({bodyPartId:"Other",paymentMethod:[{id:"Cash",name:"現金支付",sequence:3,active:!0}]}),G.value.push({bodyPartId:"Other",switch:!1}),ee.value.push([]),ee.value[ee.value.length-1].push({bodyPartId:"Other",paymentMethodId:"Cash",priceType:"Once",price:null,received:!1,otherPartName:"",otherPartScope:"",depositData:[]})),!o&&"Other"===e.id){ie.value=0,ne.value=[];for(let e=0;e<le.value.length;e++)"Other"===le.value[e].id&&(le.value.splice(e,1),W.value.splice(e,1),G.value.splice(e,1),re.value-=ee.value[e][0].price,ee.value.splice(e,1),e--)}}function Ve(e){if(""===ne.value[e].part)return null;const t=J.value.filter((e=>"Other"!==e.id)),a=t.length;if(le.value[a+e].part=ne.value[e].part,!ee.value[a+e][0])return null;ee.value[a+e][0].otherPartName=ne.value[e].part}function Le(e){if(""===ne.value[e].scope)return null;const t=J.value.filter((e=>"Other"!==e.id)),a=t.length;if(le.value[a+e].scope=ne.value[e].scope,!ee.value[a+e][0])return null;ee.value[a+e][0].scope=ne.value[e].scope}function Se(e,t){let a=0;if(ee.value.forEach((e=>{if(e[0]){if(!isNaN(parseInt(e[0].price)))return a+=parseInt(e[0].price),null;0!==e[0].depositData.length&&e[0].depositData.forEach((e=>{isNaN(parseInt(e.amountOfMoney))||(a+=parseInt(e.amountOfMoney))}))}})),re.value=a+$e,!e)return null;if("Other"===e.bodyPartId){const e=J.value.filter((e=>"Other"!==e.id)).length,a=t-e;ne.value[a].price=ee.value[t][0].price}}async function Fe(){const{initMedicalRecordDetails:e}=Y,t=ne.value.map((e=>({part:e.part,scope:e.scope,price:e.price}))),a=de.value.anestheticFees.find((e=>e.id===$.value.anestheticFee)),o=[];ee.value.forEach((e=>{e[0]&&o.push(e[0])}));let l=[];if(ee.value.forEach(((e,t)=>{0!==e.length&&"Deposit"!==e[0].priceType&&(null!==e[0].price&&""!==e[0].price&&0!==e[0].price||l.push(t)),0!==e.length&&"Deposit"===e[0].priceType&&e[0].depositData.forEach((e=>{null!==e.amountOfMoney&&""!==e.amountOfMoney&&0!==e.amountOfMoney||l.push(t)}))})),0!==l.length)return v("現金金額需填寫"),null;if(0===W.value.length&&"OPD"!==$.value.courseType)return v("未選擇部位"),null;let i=[];if(W.value.forEach(((e,t)=>{0===e.paymentMethod.length&&i.push(t)})),0!==i.length)return v("尚有部位未填寫收費方式"),null;let n=[];if(W.value.forEach(((e,t)=>{e.paymentMethod.forEach((e=>{"Voucher"===e.id&&(null!==ae.value[t].oweAmount&&""!==ae.value[t].oweAmount||n.push(t),0===ae.value[t].oweAmount&&0===oe.value[t].length&&n.push(t))}))})),0!==n.length&&"MicroPlasticSurgery"!==$.value.courseType)return v("療程專用券需填入卷號或欠卷數"),null;const s=[];oe.value.forEach((e=>{if(0===e.length)return null;e.forEach((e=>{s.push(e)}))}));const r=ae.value.filter((e=>0!==e.oweAmount&&null!==e.oweAmount)),d=[],c=[];if(X.value.forEach(((e,t)=>{e.forEach((e=>{if(!e.couponNumber)return c.push(t),null;d.push(e)}))})),0!==c.length)return v("需填入活動優惠券"),null;const p={medicalRecord:{...e[R.value].medicalRecordDetail,courseType:$.value.courseType,courseId:$.value.courseId,operator:$.value.operator,beautyConsumableId:$.value.beautyConsumableId?$.value.beautyConsumableId:null,anesthesiaSituation:$.value.anesthesiaSituation,id:null,comment:$.value.comment},bodyParts:J.value.map((e=>e.id)),otherParts:t,anestheticOrderDetailData:"Anesthesia"===$.value.anesthesiaSituation?{anesthesiaType:e[R.value].medicalRecordDetail.anesthesiaType,anestheticFeeId:a.id,price:a.fee,received:"Free"===a.id||$.value.received}:null,coursePartOrderDetailData:o,voucherOrderDetailData:s,oweVoucherSituationData:r,couponOrderDetailData:d,notArrivedAppointmentIdList:e[R.value].notArrivedAppointmentIdList};console.log(p);const m="/api/MedicalRecord/Arrive",h=w(),y={headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},method:"POST",body:JSON.stringify(p)},g=await b(m,y);if(v(g.message),g.statusCode>=400)return null;const D={medicalRecordId:null,customerId:p.medicalRecord.customerId,appointmentId:null};await ye(D),u()}function Ee(){const e=new Date,t=new Date($.value.appointmentDate);return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e>t}let $e=0;function Re(e){const t=de.value.anestheticFees.find((t=>t.id===e));0===$e||(re.value-=$e),re.value+=t.fee,$e=t.fee}const Ye=async e=>{const t=`/api/Course/GetCourseOptionsByType?courseTypeId=${e}`,a=w(),o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},method:"GET"},l=await b(t,o);return l.data},Ue=async e=>{const t=`/api/BodyPart/GetBodyPartByCourse?courseId=${e}`,a=w(),o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},method:"GET"},l=await b(t,o);return l.data},Ke=(0,ze.iH)([]);async function Je(e,t){const a=`/api/MedicalRecord/GetOtherPartHistory?customerId=${e}&courseId=${t}&limit=5`,o=w(),l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},method:"GET"},i=await b(a,l);Ke.value=i.data}function je(e){ie.value++,ne.value.push({part:e.part,scope:e.scope,price:e.price})}const We=()=>{z(),d()};return We(),{data:D,modalData:$,modalHeaderData:j,modalFocusIndex:R,paymentMethods:Q,paymentMethodsForOtherBodyparts:Z,paymentMethodSwitch:G,logIn:Fe,loginExpirationJudgment:Ee,chargeContent:pe,allBodyParts:le,commonDataList:de,commonDataListForOhterBodypart:ce,beautyConsumables:ue,selectedPaymentMethod:He,total:re,cashInputBlur:Se,changePriceType:Oe,cashData:ee,addDepositInput:Be,deleteDepositInput:qe,deleteActivityItem:Pe,activityData:X,voucherOrderDetailData:oe,voucherDataEnter:Te,voucherInput:te,oweVoucherInput:ae,otherBodyPartInputBlur:Ve,otherBodyScopeInputBlur:Le,addActivityItem:Ae,deleteVoucherData:Me,paymentMethodData:W,openPaymentMethodOption:Ce,deleteSelectedPaymentMethod:Ie,selectMedicalRecord:ve,coursesOptions:U,bodyPartsOptions:K,bodyParts:J,otherBodyPartLength:ie,otherBodyParts:ne,bodyPartsWindow:x,changeCourseType:_e,changeCourseId:xe,monthNumtoEn:T,showDetails:L,closeDetails:S,calendarListMove:F,AestheticMedicineBgJudge:H,beautyBgJudge:N,appointmentBodyPartJudge:M,otherPartNameToArr:q,openAppointmentBodyPartsWindow:C,otherBodyPartJudge:ge,deleteAppointmentBodyPartsItem:fe,addOtherBodyPartLength:we,deleteOtherBodyPartLength:ke,openHistoryCourseWindow:be,selectDate:I,displayConditions:_,outpatientTimeJudge:E,VIPJudge:P,convertTimeFormatSlash:c,courseEnter:p,otherAppointmentBgJudge:V,openCheckInModal:he,checkInModalRef:k,selectedBodyParts:Ne,voucherTypesJudge:De,calculateFee:Re,clinicPeriodToCh:m,deleteTTimeFormat:y,convertTimeFormatDeleteSecond:h,updateBasicDataAndFeeData:Ke,selectUpdateBasicDataAndFeeData:je,...(0,ze.BK)(s)}}},Jr=a(3744);const jr=(0,Jr.Z)(Kr,[["render",Sr],["__scopeId","data-v-93eb7e4a"]]);var Wr=jr,Gr=a(9327);const Qr=e=>((0,o.dD)("data-v-03226cc5"),e=e(),(0,o.Cn)(),e),Zr={class:"scroll-content-none",style:{height:"680px"}},Xr={class:"d-flex bg-white border-gray2 rounded-top-15",style:{border:"1px solid","border-bottom":"2px solid"}},ed={class:"d-flex align-items-center",style:{width:"62.488%"}},td={class:"position-relative ms-4"},ad=Qr((()=>(0,o._)("img",{class:"rounded-circle",width:"48",height:"48",src:"https://randomuser.me/api/portraits/men/75.jpg",alt:""},null,-1))),od={class:"ms-7"},ld={class:"bg-main-dark2 rounded-circle position-relative nickName-icon"},id={class:"text-white position-absolute top-50 start-50 translate-middle"},nd={class:"mb-0 ms-2 fw-500 text-main-dark2"},sd={class:"mb-0 fw-500 ms-3 me-auto text-main-dark2"},rd=["onClick"],dd=Qr((()=>(0,o._)("img",{class:"align-middle me-1",src:Gr,alt:"icon",width:"12.62",height:"12.67"},null,-1))),cd=Qr((()=>(0,o._)("span",{class:"align-middle"},"編輯收費",-1))),pd=[dd,cd],ud=(0,o.uE)('<div class="border-start border-gray2 text-main-dark2" style="width:37.512%;" data-v-03226cc5><h6 class="fw-500 text-center py-2 mb-0 border-bottom border-gray2" data-v-03226cc5>訂單</h6><div class="d-flex text-center" data-v-03226cc5><div class="border-1 border-end border-gray2 py-2" style="width:55%;" data-v-03226cc5><span class="fw-500" data-v-03226cc5>明細</span></div><div class="border-1 border-end border-gray2 py-2" style="width:20%;" data-v-03226cc5><span class="fw-500" data-v-03226cc5>金額</span></div><div class="py-2 fw-500" style="width:25%;" data-v-03226cc5><span class="fw-500" data-v-03226cc5>收費狀態</span></div></div></div>',1),md={class:"d-flex border border-top-0 bg-white border-gray2 rounded-bottom-15"},hd={class:"w-100"},yd={class:"d-flex flex-column border-end border-gray2",style:{width:"10%"}},vd={key:0,class:"mb-0 text-center py-2 border-bottom border-gray2 w-100"},gd={key:1,class:"mb-0 text-center py-2 border-bottom border-gray2 w-100"},bd={class:"h-100 d-flex justify-content-center align-items-center"},wd={class:"mb-0"},Dd={style:{width:"90%"}},kd={class:"d-flex flex-column",style:{width:"58.4%"}},fd={key:0},_d=Qr((()=>(0,o._)("h6",{style:{width:"47.55%"},class:"mb-0 text-center d-inline-block py-2 border-bottom border-end border-gray2"},"治療內容",-1))),xd=Qr((()=>(0,o._)("h6",{style:{width:"22.1%"},class:"mb-0 text-center d-inline-block py-2 border-bottom border-end border-gray2"},"卷號",-1))),Cd=Qr((()=>(0,o._)("h6",{style:{width:"30.35%"},class:"mb-0 text-center d-inline-block py-2 border-bottom border-end border-gray2"},"美容項目",-1))),Id=[_d,xd,Cd],Td={class:"d-flex w-100 h-100"},Md={style:{width:"47.55%"},class:"px-5 py-3 border-end border-gray2"},Pd={class:"row gx-0"},Ad=Qr((()=>(0,o._)("div",{class:"col-3"},[(0,o._)("p",{class:"mb-0 fw-500"},"時 段 :")],-1))),Od={class:"col-9"},zd={class:"d-flex flex-wrap"},Bd={key:0,class:"mb-0"},qd={key:1,class:"d-flex"},Hd={class:"mb-0"},Nd={key:0,class:"d-flex"},Vd=Qr((()=>(0,o._)("p",{class:"mb-0 mx-1"},"/",-1))),Ld=Qr((()=>(0,o._)("p",{class:"mb-0 text-mark"},"加診",-1))),Sd=[Vd,Ld],Fd={class:"mb-0"},Ed={class:"row gx-0"},$d=Qr((()=>(0,o._)("div",{class:"col-3"},[(0,o._)("p",{class:"mb-0 fw-500"},"療 程 :")],-1))),Rd={class:"col-9"},Yd={class:"d-flex flex-wrap"},Ud={class:"mb-0"},Kd={key:0,class:"row gx-0"},Jd=Qr((()=>(0,o._)("div",{class:"col-3"},[(0,o._)("p",{class:"mb-0 fw-500"},"部 位 :")],-1))),jd={class:"col-9"},Wd={class:"d-flex flex-wrap"},Gd={key:0},Qd={key:1,class:"row gx-0"},Zd=Qr((()=>(0,o._)("div",{class:"col-3"},[(0,o._)("p",{class:"mb-0 fw-500"},"麻 醉 :")],-1))),Xd={class:"col-9"},ec={class:"d-flex flex-wrap"},tc={class:"mb-0"},ac={class:"row gx-0"},oc=Qr((()=>(0,o._)("div",{class:"col-3"},[(0,o._)("p",{class:"mb-0 fw-500"},"備 註 :")],-1))),lc={class:"col-9"},ic={class:"d-flex flex-wrap"},nc={class:"mb-0"},sc={style:{width:"22.1%"},class:"px-5 py-3 border-end border-gray2"},rc={class:"mb-0 fw-500"},dc={key:0,class:"mb-0"},cc={key:1},pc={style:{width:"30.35%"},class:"px-5 py-3 border-end border-gray2"},uc={class:"mb-0 text-center"},mc={class:"text-main-dark2",style:{width:"41.6%"}},hc={class:"d-flex flex-column h-100"},yc={class:"d-flex h-100"},vc={class:"py-3 px-5 border-end border-gray2",style:{width:"55%"}},gc={key:0,class:"mb-0"},bc={key:1},wc={class:"mb-0"},Dc={key:0,class:"mb-0 ms-4 text-gray3"},kc={class:"py-3 px-5 text-end border-end border-gray2",style:{width:"20%"}},fc={class:"py-3 px-5 text-center",style:{width:"25%"}},_c={key:0,class:"mb-0",style:{height:"21px"}},xc={key:0,class:"mb-0"},Cc={key:1},Ic={class:"d-flex border-top border-gray2"},Tc=Qr((()=>(0,o._)("div",{class:"py-2 px-5",style:{width:"55%"}},[(0,o._)("p",{class:"mb-0 ms-4"},"總費用")],-1))),Mc={class:"py-2 px-5 text-end",style:{width:"20%"}},Pc={class:"mb-0"},Ac={class:"modal fade",ref:"editCheckInModalRef"},Oc={class:"modal-dialog modal-760"},zc={class:"modal-content p-0 bg-transparent"},Bc=Qr((()=>(0,o._)("h5",{class:"mb-0 py-3 text-center fe-500 bg-main-dark1 text-white rounded-top-20"},"編 輯 收 費",-1))),qc={class:"bg-white rounded-bottom-20"},Hc={class:"row gx-0"},Nc={class:"col-12"},Vc={class:"py-4 px-10 border-2 border-bottom border-gray1"},Lc=["onClick"],Sc={key:0,class:"align-middle me-2 img1",src:Be,width:"15",height:"15",alt:"Check-01"},Fc={key:1,class:"align-middle me-2 img2",src:qe,width:"15",height:"15",alt:"Check-02"},Ec={class:"align-middle"},$c={class:"scroll-content-none",style:{"max-height":"620px"}},Rc={class:"py-4 px-10",style:{"min-height":"614px"}},Yc={class:"row gx-0 mb-3"},Uc={class:"col-5"},Kc={class:"d-flex py-2 text-main-dark2"},Jc={class:"amis-btn-lg amis-btn-lg-name p-0"},jc=Qr((()=>(0,o._)("span",{class:"mb-0 fw-500 me-4 align-middle text-main-dark2"},"客戶姓名",-1))),Wc={class:"amis-btn-lg-name-bg bg-main-dark2 me-1"},Gc={class:"amis-btn-lg-name-item text-white"},Qc={class:"align-middle"},Zc={class:"col-7"},Xc={class:"d-flex py-2 text-main-dark2"},ep=Qr((()=>(0,o._)("h6",{class:"mb-0 fw-500 me-4"},"預約時間",-1))),tp={class:"mb-0 me-2"},ap={class:"mb-0 me-4"},op={class:"input-group mb-3"},lp=Qr((()=>(0,o._)("label",{class:"input-group-text align-items-start text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent",for:"inputGroupSelect01"},[(0,o._)("span",{class:"me-8"},"備"),(0,o._)("span",null,"註")],-1))),ip={key:0,class:"d-flex mb-3"},np=Qr((()=>(0,o._)("label",{for:"exampleFormControlInput0",class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"}," 美容耗材 ",-1))),sp=["disabled"],rp=Qr((()=>(0,o._)("option",{selected:"",value:""},null,-1))),dp=["value"],cp={key:1,class:"d-flex mb-3"},pp=Qr((()=>(0,o._)("label",{for:"exampleFormControlInput1",class:"input-group-text text-main-dark2 mb-0 me-4 border-0 p-0 bg-transparent"}," 是否上麻 ",-1))),up=["value"],mp=["value"],hp={key:0,selected:"",disabled:"",value:""},yp=Qr((()=>(0,o._)("option",{value:!0},"費用已收",-1))),vp=Qr((()=>(0,o._)("option",{value:!1},"費用未收",-1))),gp={key:2},bp=Qr((()=>(0,o._)("h6",{class:"text-main-dark2 mb-3"},"支付方式",-1))),wp={key:0,class:"fw-500 mb-2"},Dp={key:1,class:"fw-500 mb-2"},kp=["onClick"],fp={type:"button",class:"d-flex flex-wrap border-0 pt-2 pb-0 rounded-15 bg-transparent",style:{width:"90%","min-height":"51px"}},_p=["onClick"],xp={class:"align-middle me-2"},Cp=Qr((()=>(0,o._)("img",{class:"align-middle",src:He,alt:"icon",width:"10",height:"10"},null,-1))),Ip=["onClick"],Tp={class:"scroll-content-none",style:{"max-height":"170px"}},Mp=["value","id","onUpdate:modelValue","onChange"],Pp=["for"],Ap=["onClick"],Op={class:"scroll-content-none",style:{"max-height":"170px"}},zp=["value","id","onUpdate:modelValue","onChange"],Bp=["for"],qp={class:"row w-100 gx-0"},Hp={class:"col-2"},Np={style:{"padding-top":"7px"}},Vp=Qr((()=>(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"},null,-1))),Lp={class:"fw-500 mb-0 d-inline pt-3",style:{"white-space":"nowrap"}},Sp={class:"col-10"},Fp={key:0},Ep={class:"d-flex flex-wrap"},$p=["onClick"],Rp={class:"me-7"},Yp=Qr((()=>(0,o._)("img",{src:Ve,width:"15",height:"15",alt:"--05"},null,-1))),Up=["onUpdate:modelValue","onKeydown"],Kp={class:"mb-2"},Jp=Qr((()=>(0,o._)("label",{class:"align-middle rounded-end rounded-pill bg-gray1 border-end-0 text-main-dark2",style:{padding:"6px 8px 6px 11px",border:"1px solid #ced4da"}},"欠卷",-1))),jp=["onUpdate:modelValue","min"],Wp={key:1},Gp={class:"col-6"},Qp={class:"input-group"},Zp=["onUpdate:modelValue"],Xp=["value"],eu={class:"col-4"},tu={class:"d-flex align-items-center"},au=["onUpdate:modelValue"],ou={class:"col-2"},lu=["onClick"],iu=Qr((()=>(0,o._)("img",{src:Ve,alt:"",width:"20",height:"20"},null,-1))),nu=[iu],su=["onClick"],ru=Qr((()=>(0,o._)("img",{src:Le,alt:"",width:"20",height:"20"},null,-1))),du=[ru],cu={class:"row align-items-center mb-2"},pu={class:"col-4"},uu={class:"input-group"},mu=["onUpdate:modelValue","onChange"],hu=["value"],yu={key:0,class:"col-4"},vu={class:"d-flex align-items-center"},gu=["onUpdate:modelValue"],bu={class:"col-4"},wu={class:"input-group"},Du=["onUpdate:modelValue"],ku=Qr((()=>(0,o._)("option",{value:!1},"費用未收",-1))),fu=Qr((()=>(0,o._)("option",{value:!0},"費用已收",-1))),_u=[ku,fu],xu={class:"col-4"},Cu={class:"input-group"},Iu=["onUpdate:modelValue"],Tu=["value"],Mu={class:"col-4"},Pu={class:"d-flex align-items-center"},Au=["onUpdate:modelValue"],Ou={class:"col-2"},zu=["onClick"],Bu=Qr((()=>(0,o._)("img",{src:Ve,alt:"",width:"20",height:"20"},null,-1))),qu=[Bu],Hu=["onClick"],Nu=Qr((()=>(0,o._)("img",{src:Le,alt:"",width:"20",height:"20"},null,-1))),Vu=[Nu],Lu={class:"fw-500 mb-2"},Su=["onClick"],Fu={type:"button",class:"d-flex flex-wrap border-0 pt-2 pb-0 rounded-15 bg-transparent",style:{width:"90%","min-height":"51px"}},Eu=["onClick"],$u={class:"align-middle me-2"},Ru=Qr((()=>(0,o._)("img",{class:"align-middle",src:He,alt:"icon",width:"10",height:"10"},null,-1))),Yu=["onClick"],Uu={class:"scroll-content-none",style:{"max-height":"170px"}},Ku=["value","id","onUpdate:modelValue","onChange"],Ju=["for"],ju={class:"row w-100 gx-0"},Wu={class:"col-2"},Gu={style:{"padding-top":"7px"}},Qu=Qr((()=>(0,o._)("img",{src:Se,class:"me-2",width:"5",height:"5",alt:"dot-02"},null,-1))),Zu={class:"fw-500 mb-0 d-inline pt-3",style:{"white-space":"nowrap"}},Xu={class:"col-10"},em={class:"col-4"},tm={class:"input-group"},am=["onUpdate:modelValue"],om=["value"],lm={class:"col-4"},im={class:"d-flex align-items-center"},nm=["onUpdate:modelValue"],sm={class:"col-4"},rm={class:"input-group"},dm=["onUpdate:modelValue"],cm=Qr((()=>(0,o._)("option",{value:!1},"費用未收",-1))),pm=Qr((()=>(0,o._)("option",{value:!0},"費用已收",-1))),um=[cm,pm],mm={class:"row gx-0"},hm={class:"col-12 py-4 px-10 border-2 border-top border-gray1"},ym={class:"d-flex align-items-center"},vm=Qr((()=>(0,o._)("label",{class:"me-10",for:""},"總金額",-1))),gm=(0,o.uE)('<div class="form-check d-inline-block me-5" data-v-03226cc5><input class="form-check-input" type="checkbox" id="requestMedicalReceipt" data-v-03226cc5><label class="form-check-label" for="requestMedicalReceipt" data-v-03226cc5> 索取醫療收據 </label></div><div class="form-check d-inline-block me-auto" data-v-03226cc5><input class="form-check-input" type="checkbox" value="" id="printReceipt" data-v-03226cc5><label class="form-check-label" for="printReceipt" data-v-03226cc5> 列印收據 </label></div>',2),bm={class:"d-inline-block"},wm=Qr((()=>(0,o._)("button",{type:"button",class:"btn btn-alert-second rounded-pill me-2","data-bs-dismiss":"modal"},"關 閉",-1)));function Dm(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Zr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.detailedinformationData,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-3",key:t.customer.customerId},[(0,o._)("div",Xr,[(0,o._)("div",ed,[(0,o._)("div",td,[ad,(0,o._)("span",{class:(0,l.C_)(["position-absolute p-1 border border-light rounded-circle",n.lightsJudge(t)]),style:{top:"0px",right:"0px"}},null,2)]),(0,o._)("div",od,[(0,o._)("div",ld,[(0,o._)("span",id,(0,l.zw)(t.customer.beauticianNickname),1)])]),(0,o._)("h6",nd,(0,l.zw)(t.customer.customerName),1),(0,o._)("p",sd,(0,l.zw)(t.customer.customerBirthday),1),(0,o._)("button",{type:"button",class:"btn btn-outline-second2 rounded-pill me-5",onClick:e=>n.openEditCheckInModal(t.customer.customerId)},pd,8,rd)]),ud]),(0,o._)("div",md,[(0,o._)("div",hd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.attendanceMedicalRecord,((a,i)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["d-flex w-100 border-gray2",{"border-bottom-2px":i!==t.attendanceMedicalRecord.length-1}]),key:a.operatorId},[(0,o._)("div",yd,[0===i&&"Beauty"!==e.department?((0,o.wg)(),(0,o.iD)("h6",vd,"指定醫師")):(0,o.kq)("",!0),0===i&&"Beauty"===e.department?((0,o.wg)(),(0,o.iD)("h6",gd,"美容師")):(0,o.kq)("",!0),(0,o._)("div",bd,[(0,o._)("h6",wd,(0,l.zw)(a.operatorName),1)])]),(0,o._)("div",Dd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.detail,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["d-flex border-gray2",{"border-bottom-2px":i!==a.detail.length-1}]),key:t},[(0,o._)("div",kd,[0===i?((0,o.wg)(),(0,o.iD)("div",fd,Id)):(0,o.kq)("",!0),(0,o._)("div",Td,[(0,o._)("div",Md,[(0,o._)("div",Pd,[Ad,(0,o._)("div",Od,[(0,o._)("div",zd,[t.cureContent.leftTime?((0,o.wg)(),(0,o.iD)("p",Bd,(0,l.zw)(t.cureContent.clinicPeriodName)+" / （"+(0,l.zw)(n.deleteTTimeFormat(t.cureContent.leftTime).time)+" 離診）",1)):((0,o.wg)(),(0,o.iD)("div",qd,[(0,o._)("p",Hd,(0,l.zw)(t.cureContent.clinicPeriodName),1),t.bodyPart.some((e=>!0===e.extra))?((0,o.wg)(),(0,o.iD)("div",Nd,Sd)):(0,o.kq)("",!0)])),(0,o._)("p",Fd,"（"+(0,l.zw)(n.deleteTTimeFormat(t.cureContent.arrivedTime).time)+" 到診）",1)])])]),(0,o._)("div",Ed,[$d,(0,o._)("div",Rd,[(0,o._)("div",Yd,[(0,o._)("p",Ud,(0,l.zw)(t.cureContent.courseTypeName)+" "+(0,l.zw)(t.cureContent.courseName),1)])])]),"Beauty"!==e.department&&"點滴"!==t.cureContent.courseTypeName?((0,o.wg)(),(0,o.iD)("div",Kd,[Jd,(0,o._)("div",jd,[(0,o._)("div",Wd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.bodyPart,((e,a)=>((0,o.wg)(),(0,o.iD)("p",{class:(0,l.C_)(["mb-0",{"text-mark":e.extra}]),key:e.bodyPartId},[(0,o.Uk)((0,l.zw)(e.name)+" ",1),a!==t.bodyPart.length-1?((0,o.wg)(),(0,o.iD)("span",Gd,"、")):(0,o.kq)("",!0)],2)))),128))])])])):(0,o.kq)("",!0),"Beauty"!==e.department&&"點滴"!==t.cureContent.courseTypeName?((0,o.wg)(),(0,o.iD)("div",Qd,[Zd,(0,o._)("div",Xd,[(0,o._)("div",ec,[(0,o._)("p",tc,(0,l.zw)(t.cureContent.anesthesiaTypeName),1)])])])):(0,o.kq)("",!0),(0,o._)("div",ac,[oc,(0,o._)("div",lc,[(0,o._)("div",ic,[(0,o._)("p",nc,(0,l.zw)(t.cureContent.comment),1)])])])]),(0,o._)("div",sc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.voucherOrderDetails,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"mb-2",key:e.bodyPartId},[(0,o._)("p",rc,(0,l.zw)(e.bodyPartName)+" : ",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.voucherId,(e=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e},["oweVoucher"!==e?((0,o.wg)(),(0,o.iD)("p",dc,(0,l.zw)(e),1)):((0,o.wg)(),(0,o.iD)("p",cc))],64)))),128))])))),128))]),(0,o._)("div",pc,[(0,o._)("p",uc,(0,l.zw)(t.beautyConsumableName),1)])])]),(0,o._)("div",mc,[(0,o._)("div",hc,[(0,o._)("div",yc,[(0,o._)("div",vc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.orderDetails,((t,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},["anesthesia"===t.chargeType?((0,o.wg)(),(0,o.iD)("p",gc,(0,l.zw)(a+1)+". "+(0,l.zw)(t.chargeName),1)):(0,o.kq)("",!0),"cash"===t.chargeType?((0,o.wg)(),(0,o.iD)("div",bc,[(0,o._)("p",wc,(0,l.zw)(a+1)+". "+(0,l.zw)(t.chargeName),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.bodyParts,(t=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},["Beauty"!==e.department&&t?((0,o.wg)(),(0,o.iD)("p",Dc,(0,l.zw)(t.name),1)):(0,o.kq)("",!0)],64)))),128))])):(0,o.kq)("",!0)],64)))),128))]),(0,o._)("div",kc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.orderDetails,((t,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},["anesthesia"===t.chargeType?((0,o.wg)(),(0,o.iD)("p",{key:0,class:(0,l.C_)(["mb-0",t.received?"text-gray3":"text-mark"])},(0,l.zw)(t.price),3)):(0,o.kq)("",!0),"cash"===t.chargeType?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,l.C_)({"mt-5":"Beauty"!==e.department})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.price,((e,a)=>((0,o.wg)(),(0,o.iD)("p",{class:(0,l.C_)(["mb-0",t.received[a]?"text-gray3":"text-mark"]),key:a},(0,l.zw)(e),3)))),128))],2)):(0,o.kq)("",!0)],64)))),128))]),(0,o._)("div",fc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.orderDetails,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},["anesthesia"===e.chargeType&&"CancelAnesthesia"===e.anesthesiaSituation?((0,o.wg)(),(0,o.iD)("p",_c)):(0,o.kq)("",!0),(0,o._)("div",{style:{height:"21px"},class:(0,l.C_)(e.received?"text-gray3":"text-mark")},["anesthesia"!==e.chargeType||"CancelAnesthesia"===e.anesthesiaSituation||e.received?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",xc," 費用未收 "))],2),"cash"===e.chargeType?((0,o.wg)(),(0,o.iD)("div",Cc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.received,((e,t)=>((0,o.wg)(),(0,o.iD)("p",{class:(0,l.C_)(["mb-0",e?"text-gray3":"text-mark"]),key:t},(0,l.zw)(e?"費用已收":"費用未收"),3)))),128))])):(0,o.kq)("",!0)],64)))),128))])]),(0,o._)("div",Ic,[Tc,(0,o._)("div",Mc,[(0,o._)("p",Pc,(0,l.zw)(t.totalExpense),1)])])])])],2)))),128))])],2)))),128))])])])))),128))]),(0,o._)("div",Ac,[(0,o._)("div",Oc,[(0,o._)("div",zc,[Bc,(0,o._)("div",qc,[(0,o._)("div",Hc,[(0,o._)("div",Nc,[(0,o._)("div",Vc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.modalHeaderData,((e,t)=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:e.medicalRecordId,class:(0,l.C_)([{active:n.modalFocusIndex===t},"btn btn-category text- rounded-pill me-2 mb-2 btn-checkIcon"]),onClick:a=>n.selectMedicalRecord(e.customerId,t)},[e.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("img",Sc)),e.notArrivedAppointmentIdList?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("img",Fc)),(0,o._)("span",Ec,(0,l.zw)(e.courseType)+" : "+(0,l.zw)(e.course),1)],10,Lc)))),128))])])]),(0,o._)("div",$c,[(0,o._)("div",Rc,[(0,o._)("div",Yc,[(0,o._)("div",Uc,[(0,o._)("div",Kc,[(0,o._)("span",Jc,[jc,(0,o._)("div",Wc,[(0,o._)("span",Gc,(0,l.zw)(n.modalData.beauticianNickname),1)]),(0,o._)("span",Qc,(0,l.zw)(n.modalData.name)+" "+(0,l.zw)(n.modalData.birthday),1)])])]),(0,o._)("div",Zc,[(0,o._)("div",Xc,[ep,(0,o._)("h6",tp,(0,l.zw)(n.convertTimeFormatSlash(n.modalData.appointmentDate)),1),(0,o._)("h6",ap,(0,l.zw)(n.clinicPeriodToCh(n.modalData.clinicPeriod))+" "+(0,l.zw)(n.convertTimeFormatDeleteSecond(n.modalData.appointmentTime)),1)])])]),(0,o._)("div",op,[lp,(0,o.wy)((0,o._)("textarea",{class:"form-control rounded-15",rows:"3","onUpdate:modelValue":t[0]||(t[0]=e=>n.modalData.comment=e)},null,512),[[i.nr,n.modalData.comment]])]),"IV"!==n.modalData.courseType&&"OPD"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",ip,[np,(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2",style:{width:"20%"},"onUpdate:modelValue":t[1]||(t[1]=e=>n.modalData.beautyConsumableId=e),disabled:0===n.beautyConsumables.length},[rp,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.beautyConsumables,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,dp)))),128))],8,sp),[[i.bM,n.modalData.beautyConsumableId]])])):(0,o.kq)("",!0),"IV"!==n.modalData.courseType&&"OPD"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",cp,[pp,(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2 me-2",style:{width:"20%"},onChange:t[2]||(t[2]=e=>n.changeAnesthesiaSituation()),"onUpdate:modelValue":t[3]||(t[3]=e=>n.modalData.anesthesiaSituation=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.anesthesiaSituations,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,up)))),128))],544),[[i.bM,n.modalData.anesthesiaSituation]]),"Anesthesia"===n.modalData.anesthesiaSituation&&"MicroPlasticSurgery"!==n.modalData.courseType?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,class:"rounded-pill form-select text-main-dark2 me-2",style:{width:"20%"},"onUpdate:modelValue":t[4]||(t[4]=e=>n.modalData.anestheticFee=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.anestheticFees,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,mp)))),128))],512)),[[i.bM,n.modalData.anestheticFee]]):(0,o.kq)("",!0),"Anesthesia"===n.modalData.anesthesiaSituation&&"Free"!==n.modalData.anestheticFee?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:1,class:"rounded-pill form-select text-main-dark2",style:{width:"20%"},"onUpdate:modelValue":t[5]||(t[5]=e=>n.modalData.received=e)},[""===n.modalData.received?((0,o.wg)(),(0,o.iD)("option",hp)):(0,o.kq)("",!0),yp,vp],512)),[[i.bM,n.modalData.received]]):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"MicroPlasticSurgery"!==n.modalData.courseType&&"OPD"!==n.modalData.courseType?((0,o.wg)(),(0,o.iD)("div",gp,[bp,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.allBodyParts,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"ps-7"},["Other"!==e.id?((0,o.wg)(),(0,o.iD)("p",wp,(0,l.zw)(e.name)+" :",1)):((0,o.wg)(),(0,o.iD)("p",Dp,(0,l.zw)(e.name)+" / "+(0,l.zw)(e.part)+" :",1)),(0,o._)("div",{class:"p-0 rounded-15 mb-2 form-select",onClick:(0,i.iM)((e=>n.openPaymentMethodOption(a)),["stop"])},[(0,o._)("button",fp,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodData[a].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:`${e.id}${a}`,onClick:(0,i.iM)((t=>n.deleteSelectedPaymentMethod(e,a)),["stop"]),class:"amis-badge amis-badge-second3 me-1 mb-2"},[(0,o._)("span",xp,(0,l.zw)(e.name),1),Cp],8,_p)))),128))])],8,kp),"Other"!==n.allBodyParts[a].id?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:2,class:"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2","data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",Tp,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethods,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:`${e.id}${a}`},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`paymentMethod${e.id}${a}`,"onUpdate:modelValue":e=>n.paymentMethodData[a].paymentMethod=e,onChange:t=>n.selectedPaymentMethod(e,a,t)},null,40,Mp),[[i.e8,n.paymentMethodData[a].paymentMethod]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`paymentMethod${e.id}${a}`},(0,l.zw)(e.name),9,Pp)])))),128))])],8,Ip)),[[i.F8,n.paymentMethodSwitch[a].switch]]):(0,o.kq)("",!0),"Other"===n.allBodyParts[a].id?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:3,class:"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2","data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",Op,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodsForOtherBodyparts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:`${e.id}${a}`},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`paymentMethod${e.id}${a}`,"onUpdate:modelValue":e=>n.paymentMethodData[a].paymentMethod=e,onChange:t=>n.selectedPaymentMethod(e,a,t)},null,40,zp),[[i.e8,n.paymentMethodData[a].paymentMethod]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`paymentMethod${e.id}${a}`},(0,l.zw)(e.name),9,Bp)])))),128))])],8,Ap)),[[i.F8,n.paymentMethodSwitch[a].switch]]):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodData[a].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"ps-2 d-flex w-100",key:`${e.id}${a}`},[(0,o._)("div",qp,[(0,o._)("div",Hp,[(0,o._)("div",Np,[Vp,(0,o._)("p",Lp,(0,l.zw)(e.name),1)])]),(0,o._)("div",Sp,["Voucher"===e.id?((0,o.wg)(),(0,o.iD)("div",Fp,[(0,o._)("div",Ep,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.voucherOrderDetailData[a],(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.voucherId,class:"mb-2 me-2"},[(0,o._)("button",{type:"button",class:"btn border border-1 border-gray2 text-main-dark2 rounded-pill d-flex align-items-center",onClick:t=>n.deleteVoucherData(e,a)},[(0,o._)("span",Rp,(0,l.zw)(e.voucherId),1),Yp],8,$p)])))),128)),(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill d-inline-block align-middle me-2 mb-2",style:{width:"30%"},placeholder:"卷號","onUpdate:modelValue":e=>n.voucherInput[a]=e,onKeydown:(0,i.D2)((e=>n.voucherDataEnter(a)),["enter"])},null,40,Up),[[i.nr,n.voucherInput[a]]]),(0,o._)("div",Kp,[Jp,(0,o.wy)((0,o._)("input",{type:"number",class:"align-middle form-control rounded-start rounded-pill d-inline-block align-middle w-50",placeholder:"數量","onUpdate:modelValue":e=>n.oweVoucherInput[a].oweAmount=e,min:0!==n.voucherOrderDetailData[a].length?0:1},null,8,jp),[[i.nr,n.oweVoucherInput[a].oweAmount]])])])])):(0,o.kq)("",!0),"Activity"===e.id?((0,o.wg)(),(0,o.iD)("div",Wp,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.activityData[a],((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:t},[(0,o._)("div",Gp,[(0,o._)("div",Qp,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.prizeId=t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.prizeData,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.prizeId,key:e.prizeId},(0,l.zw)(e.activityName),9,Xp)))),128))],8,Zp),[[i.bM,e.prizeId]])])]),(0,o._)("div",eu,[(0,o._)("div",tu,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control rounded-pill",placeholder:"卷號","onUpdate:modelValue":t=>e.couponNumber=t},null,8,au),[[i.nr,e.couponNumber]])])]),(0,o._)("div",ou,[1!==n.activityData[a].length?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"me-2",onClick:(0,i.iM)((e=>n.deleteActivityItem(a,t)),["prevent"])},nu,8,lu)):(0,o.kq)("",!0),1===n.activityData[a].length||n.activityData[a].length===t+1?((0,o.wg)(),(0,o.iD)("a",{key:1,href:"#",onClick:(0,i.iM)((e=>n.addActivityItem(a)),["prevent"])},du,8,su)):(0,o.kq)("",!0)])])))),128))])):(0,o.kq)("",!0),"Cash"===e.id&&"Other"!==n.allBodyParts[a].id?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:2},(0,o.Ko)(n.cashData[a],((e,s)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:s},[(0,o._)("div",cu,[(0,o._)("div",pu,[(0,o._)("div",uu,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.priceType=t,onChange:t=>n.changePriceType(e,a)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.priceTypes,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,hu)))),128))],40,mu),[[i.bM,e.priceType]])])]),"Deposit"!==e.priceType?((0,o.wg)(),(0,o.iD)("div",yu,[(0,o._)("div",vu,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill","onUpdate:modelValue":t=>e.price=t,onBlur:t[6]||(t[6]=e=>n.cashInputBlur()),min:"0"},null,40,gu),[[i.nr,e.price]])])])):(0,o.kq)("",!0),(0,o._)("div",bu,[(0,o._)("div",wu,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.received=t},_u,8,Du),[[i.bM,e.received]])])])]),"Deposit"===e.priceType?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.depositData,((s,r)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:r},[(0,o._)("div",xu,[(0,o._)("div",Cu,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":e=>s.voucherType=e},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataList.voucherTypes,(t=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t.id},[n.voucherTypesJudge(e.depositData,t.id,s.voucherType)?((0,o.wg)(),(0,o.iD)("option",{key:0,value:t.id},(0,l.zw)(t.name),9,Tu)):(0,o.kq)("",!0)],64)))),128))],8,Iu),[[i.bM,s.voucherType]])])]),(0,o._)("div",Mu,[(0,o._)("div",Pu,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill",onBlur:t[7]||(t[7]=e=>n.cashInputBlur()),"onUpdate:modelValue":e=>s.amountOfMoney=e,min:"0"},null,40,Au),[[i.nr,s.amountOfMoney]])])]),(0,o._)("div",Ou,[1!==e.depositData.length?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"me-2",onClick:(0,i.iM)((e=>n.deleteDepositInput(a,r)),["prevent"])},qu,8,zu)):(0,o.kq)("",!0),1===e.depositData.length||e.depositData.length===r+1&&n.commonDataList.voucherTypes.length>e.depositData.length?((0,o.wg)(),(0,o.iD)("a",{key:1,href:"#",onClick:(0,i.iM)((t=>n.addDepositInput(a,e.depositData)),["prevent"])},Vu,8,Hu)):(0,o.kq)("",!0)])])))),128)):(0,o.kq)("",!0)],64)))),128)):(0,o.kq)("",!0)])])])))),128))])))),128))])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherBodyParts,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"ps-7"},[(0,o._)("p",Lu,"其他 / "+(0,l.zw)(e.otherPartName)+" :",1),(0,o._)("div",{class:"p-0 rounded-15 mb-2 form-select",onClick:(0,i.iM)((e=>n.openOtherbodypartsPaymentMethodOption(a)),["stop"])},[(0,o._)("button",Fu,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherBodyPartPaymentMethodData[a].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",key:`${e.id}${a}`,onClick:(0,i.iM)((t=>n.deleteOpenOtherbodypartsSelectedPaymentMethod(e,a)),["stop"]),class:"amis-badge amis-badge-second3 me-1 mb-2"},[(0,o._)("span",$u,(0,l.zw)(e.name),1),Ru],8,Eu)))),128))])],8,Su),(0,o.wy)((0,o._)("div",{class:"bg-gray1 rounded-15 w-100 pt-5 pb-3 px-5 border border-1 border-gray3 mb-2","data-to":"true",onClick:(0,i.iM)((e=>null),["stop"])},[(0,o._)("div",Uu,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paymentMethodsForOtherBodyparts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"form-check mb-2",key:`${e.id}OtherBodyparts${a}`},[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",value:e,id:`paymentMethod${e.id}OtherBodyparts${a}`,"onUpdate:modelValue":e=>n.otherBodyPartPaymentMethodData[a].paymentMethod=e,onChange:t=>n.otherBodypartsSelectedPaymentMethod(e,a,t)},null,40,Ku),[[i.e8,n.otherBodyPartPaymentMethodData[a].paymentMethod]]),(0,o._)("label",{class:"form-check-label text-main-dark2 d-block",for:`paymentMethod${e.id}OtherBodyparts${a}`},(0,l.zw)(e.name),9,Ju)])))),128))])],8,Yu),[[i.F8,n.otherBodyPartPaymentMethodSwitch[a].switch]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.otherBodyPartPaymentMethodData[a].paymentMethod,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"ps-2 d-flex w-100",key:`${e.id}${a}`},[(0,o._)("div",ju,[(0,o._)("div",Wu,[(0,o._)("div",Gu,[Qu,(0,o._)("p",Zu,(0,l.zw)(e.name),1)])]),(0,o._)("div",Xu,["Cash"===e.id?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(n.otherBodyPartCashData[a],((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"row align-items-center mb-2",key:a},[(0,o._)("div",em,[(0,o._)("div",tm,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.priceType=t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.commonDataListForOhterBodypart.priceTypes,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,l.zw)(e.name),9,om)))),128))],8,am),[[i.bM,e.priceType]])])]),(0,o._)("div",lm,[(0,o._)("div",im,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control rounded-pill","onUpdate:modelValue":t=>e.price=t,onBlur:t[8]||(t[8]=e=>n.cashInputBlur()),min:"0"},null,40,nm),[[i.nr,e.price]])])]),(0,o._)("div",sm,[(0,o._)("div",rm,[(0,o.wy)((0,o._)("select",{class:"rounded-pill form-select text-main-dark2","onUpdate:modelValue":t=>e.received=t},um,8,dm),[[i.bM,e.received]])])])])))),128)):(0,o.kq)("",!0)])])])))),128))])))),128))])]),(0,o._)("div",mm,[(0,o._)("div",hm,[(0,o._)("div",ym,[vm,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control w-auto d-inline-block rounded-pill me-5",placeholder:"0","onUpdate:modelValue":t[9]||(t[9]=e=>n.total=e)},null,512),[[i.nr,n.total]]),gm,(0,o._)("div",bm,[wm,(0,o._)("button",{type:"button",class:"btn btn-alert-main rounded-pill",onClick:t[10]||(t[10]=e=>n.editCompleted())},"修改完成")])])])])])])])],512)],64)}var km={name:"detailedInformation",setup(){const e=(0,ze.iH)(null),t=(0,ze.qj)({loginLock:!1}),a=(0,o.f3)("checkIn"),l=(0,o.f3)("textConversionTool"),{state:i,detailedinformationData:n,continuousOrReservedToggle:s}=a,r=(0,o.f3)("fetchFunction"),{fetchApi:d,getTokenFromCookie:c}=r,p=(0,o.f3)("alertMessage"),{updateMessage:u}=p,{deleteTTimeFormat:m,convertTimeFormatSlash:h,clinicPeriodToCh:y,convertTimeFormatDeleteSecond:v}=l;let g;(0,o.bv)((()=>{g=new Fr.u_(e.value)}));const b=e=>{_.value=0,g.show(),D(e)};function w(e){const t=e.attendanceMedicalRecord.every((e=>e.detail.every((e=>e.cureContent.leftTime))));return t?"bg-gray3":"bg-green"}async function D(e){const t=`${i.year}-${i.month+1<=9?"0":""}${i.month+1}-${i.date<=9?"0":""}${i.date}`;let a=`/api/MedicalRecord/GetInitUpdateMedicalRecordFeeData?departmentId=${i.department}&customerId=${e}&date=${t}`;const o=c(),l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},method:"GET"},n=await d(a,l);R(n.data)}function k(e,t){_.value=t,D(e)}const f=(0,ze.iH)({}),_=(0,ze.iH)(0),x=(0,ze.iH)(0),C=(0,ze.iH)({}),I=(0,ze.iH)({}),T=(0,ze.iH)([]),M=(0,ze.iH)([]),P=(0,ze.iH)([]),A=(0,ze.iH)([]),O=(0,ze.iH)([]),z=(0,ze.iH)([]),B=(0,ze.iH)([]),q=(0,ze.iH)([]),H=(0,ze.iH)([]),N=(0,ze.iH)([]),V=(0,ze.iH)([]),L=(0,ze.iH)([]),S=(0,ze.iH)([]),F=(0,ze.iH)([]),E=(0,ze.iH)([]),$=(0,ze.iH)([]);function R(e){const{customer:t,initMedicalRecordDetails:a,commonData:o}=e;C.value=o,I.value=JSON.parse(JSON.stringify(o)),I.value.priceTypes=I.value.priceTypes.filter((e=>"Once"===e.id));const l=JSON.parse(JSON.stringify(C.value.courseTypes));f.value={name:t.name,birthday:t.birthday,beauticianNickname:t.beauticianNickname,appointmentDate:a[_.value].medicalRecordDetail.appointmentDate,appointmentTime:a[_.value].medicalRecordDetail.appointmentTime,clinicPeriod:a[_.value].medicalRecordDetail.clinicPeriod,arrivedTime:a[_.value].medicalRecordDetail.arrivedTime,operator:a[_.value].medicalRecordDetail.operator,courseType:a[_.value].medicalRecordDetail.courseType,courseId:a[_.value].medicalRecordDetail.courseId,comment:a[_.value].medicalRecordDetail.comment,anesthesiaSituation:a[_.value].medicalRecordDetail.anesthesiaSituation,anestheticFee:"Anesthesia"===a[_.value].medicalRecordDetail.anesthesiaSituation?a[_.value].anestheticOrderDetail.anestheticFeeId:null,received:"Anesthesia"===a[_.value].medicalRecordDetail.anesthesiaSituation?a[_.value].anestheticOrderDetail.received:null,anesthesiaType:a[_.value].medicalRecordDetail.anesthesiaType,beautyConsumableId:a[_.value].medicalRecordDetail.beautyConsumableId,medicalRecordId:a[_.value].medicalRecordDetail.id},$.value=a.map((e=>{const a=l.find((t=>t.id===e.medicalRecordDetail.courseType)).name,o=e.courses.find((t=>t.courseId===e.medicalRecordDetail.courseId)).courseName;return{courseType:a,course:o,medicalRecordId:e.medicalRecordDetail.id,customerId:t.id}})),T.value=a[_.value].beautyConsumables;const n=a[_.value].bodyPartsOptions.filter((e=>a[_.value].bodyParts.includes(e.id))),s=n.filter((e=>"Other"!==e.id));"Beauty"===i.department&&s.push({id:"1",name:"全臉"}),"IV"===f.value.courseType&&s.push({id:null,name:"點滴"}),A.value=[],z.value=[],V.value=[],L.value=[],F.value=[],E.value=[],q.value=[],P.value=[],S.value=[],B.value=[],O.value=[],M.value=[...s],H.value=a[_.value].paymentMethods,N.value=JSON.parse(JSON.stringify(a[_.value].paymentMethods)),N.value=N.value.filter((e=>"Cash"===e.id||"CreditCard"===e.id||"Free"===e.id)),M.value.forEach((e=>{A.value.push({bodyPartId:e.id,paymentMethod:[]}),z.value.push({bodyPartId:e.id,switch:!1}),V.value.push([]),L.value.push([]),F.value.push(""),E.value.push({bodyPartId:e.id,oweAmount:0}),q.value.push([])})),a[_.value].voucherOrderDetails.forEach((e=>{M.value.forEach(((t,a)=>{if(e.bodyPartId===t.id){q.value[a].push(e);const t={id:"Voucher",name:"療程專用券",sequence:1,active:!0},o=A.value[a].paymentMethod.some((e=>"Voucher"===e.id));o||A.value[a].paymentMethod.push(t)}}))})),a[_.value].oweVoucherSituationData.forEach((e=>{M.value.forEach(((t,a)=>{if(e.bodyPartId===t.id){E.value[a].oweAmount=e.oweAmount;const t={id:"Voucher",name:"療程專用券",sequence:1,active:!0},o=A.value[a].paymentMethod.some((e=>"Voucher"===e.id));o||A.value[a].paymentMethod.push(t)}}))})),a[_.value].couponOrderDetails.forEach((e=>{M.value.forEach(((t,a)=>{if(e.bodyPartId===t.id){V.value[a].push({prizeId:e.prizeId,bodyPartId:e.bodyPartId,couponNumber:e.couponNumber});const t={id:"Activity",name:"活動優惠券",sequence:2,active:!0},o=A.value[a].paymentMethod.some((e=>"Activity"===e.id));o||A.value[a].paymentMethod.push(t)}}))})),a[_.value].coursePartOrderDetails.forEach((e=>{M.value.forEach(((t,a)=>{if(e.bodyPartId===t.id&&"Other"!==e.bodyPartId){L.value[a].push(e);const t={id:"Cash",name:"現金支付",sequence:3,active:!0},o=A.value[a].paymentMethod.some((e=>"Cash"===e.id));o||A.value[a].paymentMethod.push(t)}}))})),a[_.value].coursePartOrderDetails.forEach((e=>{"Other"===e.bodyPartId&&(P.value.push(e),S.value.push([]),S.value[S.value.length-1].push(e),B.value.push({switch:!1}),O.value.push({paymentMethod:[{id:"Cash",name:"現金支付",sequence:3,active:!0}]}))})),ie()}function Y(e){if(z.value[e].switch)return null;let t;const a=z.value.find(((e,a)=>{if(e.switch)return t=a,e}));function o(){z.value[e].switch=!1,document.removeEventListener("click",o)}a&&(z.value[t].switch=!1,document.removeEventListener("click",o)),z.value[e].switch=!0,document.addEventListener("click",o)}function U(e,t){const a=A.value[t].paymentMethod.indexOf(e);if(A.value[t].paymentMethod.splice(a,1),"Cash"===e.id){let e=0;if("Deposit"===L.value[t][0].priceType)return L.value[t][0].depositData.forEach((t=>{e+=t.amountOfMoney})),x.value-=e,L.value[t]=[],null;x.value-=L.value[t][0].price,L.value[t]=[]}"Voucher"===e.id&&(q.value[t]=[],E.value[t].oweAmount=0),"Activity"===e.id&&(V.value[t]=[])}function K(e){if(B.value[e].switch)return null;let t;const a=B.value.find(((e,a)=>{if(e.switch)return t=a,e}));function o(){B.value[e].switch=!1,document.removeEventListener("click",o)}a&&(B.value[t].switch=!1,document.removeEventListener("click",o)),B.value[e].switch=!0,document.addEventListener("click",o)}function J(e,t){const a=O.value[t].paymentMethod.indexOf(e);O.value[t].paymentMethod.splice(a,1),"Cash"===e.id&&(x.value-=S.value[t][0].price,S.value[t]=[])}function j(e,t,a){const o=a.target.checked;if("Voucher"!==e.id||o||(q.value[t]=[],E.value[t].oweAmount=0),"Activity"===e.id&&o&&V.value[t].push({prizeId:C.value.prizeData[0].prizeId,bodyPartId:M.value[t].id,couponNumber:""}),"Activity"!==e.id||o||(V.value[t]=[]),"Cash"===e.id&&!o){let e=0;if("Deposit"===L.value[t][0].priceType)return L.value[t][0].depositData.forEach((t=>{e+=t.amountOfMoney})),x.value-=e,L.value[t]=[],null;x.value-=L.value[t][0].price,L.value[t]=[]}"Cash"===e.id&&o&&L.value[t].push({bodyPartId:M.value[t].id,paymentMethodId:"Cash",priceType:"Once",price:null,received:!1,otherPartName:M.value[t].part?M.value[t].part:"",otherPartScope:M.value[t].scope?M.value[t].scope:"",depositData:[]})}function W(e,t,a){const o=a.target.checked;"Cash"!==e.id||o||(x.value-=S.value[t][0].price,S.value[t]=[]),"Cash"===e.id&&o&&S.value[t].push({bodyPartId:"Other",paymentMethodId:"Cash",priceType:"Once",price:null,received:!1,otherPartName:P.value[t].part?P.value[t].part:null,otherPartScope:P.value[t].scope?P.value[t].scope:null})}function G(e){q.value[e].push({bodyPartId:M.value[e].id,voucherId:F.value[e]}),F.value[e]=""}function Q(e,t){const a=q.value[t].indexOf(e);q.value[t].splice(a,1)}function Z(e,t){V.value[e].splice(t,1)}function X(e){V.value[e].push({prizeId:C.value.prizeData[0].prizeId,bodyPartId:M.value[e].id,couponNumber:""})}function ee(e,t){if(x.value-=e.price,L.value[t][0].price=null,"Deposit"===e.priceType)return L.value[t][0].price=null,L.value[t][0].depositData=[],L.value[t][0].depositData.push({voucherType:C.value.voucherTypes[0].id,amountOfMoney:null}),null;let a=0;return"Deposit"!==e.priceType&&0!==L.value[t][0].depositData.length?(L.value[t][0].depositData.forEach((e=>{a+=e.amountOfMoney})),x.value-=a,L.value[t][0].depositData=[],null):void 0}function te(e,t){const a=C.value.voucherTypes.filter((e=>!t.some((t=>t.voucherType===e.id))));L.value[e][0].depositData.push({voucherType:a[0].id,amountOfMoney:null})}function ae(e,t){let a=L.value[e][0].depositData[t].amountOfMoney;x.value-=a,L.value[e][0].depositData.splice(t,1)}function oe(e,t,a){return a===t||!e.some((e=>e.voucherType===t))}function le(){f.value.anestheticFee=C.value.anestheticFees[0].id,f.value.received="MicroPlasticSurgery"===f.value.courseType||""}async function ie(){let e=0;L.value.forEach((t=>{t[0]&&(isNaN(parseInt(t[0].price))||0!==t[0].depositData.length||(e+=parseInt(t[0].price)),0!==t[0].depositData.length&&t[0].depositData.forEach((t=>{isNaN(parseInt(t.amountOfMoney))||(e+=parseInt(t.amountOfMoney))})))})),S.value.forEach((t=>{if(t[0]&&!isNaN(parseInt(t[0].price)))return e+=parseInt(t[0].price),null})),x.value=e}async function ne(){const e=C.value.anestheticFees.find((e=>e.id===f.value.anestheticFee)),t=[];L.value.forEach((e=>{e[0]&&t.push(e[0])})),S.value.forEach((e=>{e[0]&&t.push(e[0])}));let a=[];if(A.value.forEach(((e,t)=>{e.paymentMethod.forEach((e=>{"Voucher"===e.id&&(null!==E.value[t].oweAmount&&""!==E.value[t].oweAmount||a.push(t),0===E.value[t].oweAmount&&0===q.value[t].length&&a.push(t))}))})),0!==a.length)return null;const o=[];q.value.forEach((e=>{if(0===e.length)return null;e.forEach((e=>{o.push(e)}))}));const l=E.value.filter((e=>0!==e.oweAmount)),i=[];V.value.forEach((e=>{e.forEach((e=>{if(!e.couponNumber)return null;i.push(e)}))}));const n={medicalRecordId:f.value.medicalRecordId,medicalRecordComment:f.value.comment,beautyConsumableId:f.value.beautyConsumableId,anesthesiaSituation:f.value.anesthesiaSituation,anestheticOrderDetailData:"Anesthesia"===f.value.anesthesiaSituation?{anesthesiaType:f.value.anesthesiaType,anestheticFeeId:e.id,price:e.fee,received:"Free"===e.id||f.value.received}:null,coursePartOrderDetailData:t,voucherOrderDetailData:o,oweVoucherSituationData:l,couponOrderDetailData:i},r="/api/MedicalRecord/UpdateFee",p=c(),m={headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},method:"PUT",body:JSON.stringify(n)},h=await d(r,m);if(u(h.message),h.statusCode>=400)return null;s()}return{data:t,detailedinformationData:n,modalData:f,allBodyParts:M,otherBodyParts:P,beautyConsumables:T,commonDataList:C,commonDataListForOhterBodypart:I,paymentMethodData:A,otherBodyPartPaymentMethodData:O,paymentMethodSwitch:z,otherBodyPartPaymentMethodSwitch:B,openOtherbodypartsPaymentMethodOption:K,deleteOpenOtherbodypartsSelectedPaymentMethod:J,otherBodypartsSelectedPaymentMethod:W,modalHeaderData:$,modalFocusIndex:_,activityData:V,cashData:L,otherBodyPartCashData:S,editCompleted:ne,selectMedicalRecord:k,lightsJudge:w,voucherInput:F,oweVoucherInput:E,voucherOrderDetailData:q,paymentMethods:H,paymentMethodsForOtherBodyparts:N,deleteSelectedPaymentMethod:U,selectedPaymentMethod:j,deleteActivityItem:Z,addActivityItem:X,voucherDataEnter:G,deleteVoucherData:Q,changePriceType:ee,addDepositInput:te,voucherTypesJudge:oe,deleteDepositInput:ae,cashInputBlur:ie,total:x,changeAnesthesiaSituation:le,openPaymentMethodOption:Y,openEditCheckInModal:b,editCheckInModalRef:e,deleteTTimeFormat:m,convertTimeFormatSlash:h,clinicPeriodToCh:y,convertTimeFormatDeleteSecond:v,...(0,ze.BK)(i)}}};const fm=(0,Jr.Z)(km,[["render",Dm],["__scopeId","data-v-03226cc5"]]);var _m=fm,xm={name:"appointmentIndex",components:{detailedInformation:_m,dateOfAppointment:Wr},setup(){const e=(0,o.f3)("checkIn"),{state:t,getDoctors:a,resetSelectedDoctor:l,getCurrentMonth:i,continuousOrReservedToggle:n,clinicPeriodToCh:s,convertTimeFormatSlash:r,departmentToggle:d,getDaysOutpatientData:c,searchDetailedInformation:p}=e,u=(0,o.f3)("fetchFunction"),{fetchApi:m,getTokenFromCookie:h}=u,y=(0,ze.qj)({customer:{name:"",tel:"",birth:"",beautician:""},focusIndex:null,continuousOrReservedStatus:"continuousOutpatientAmount",appointmentBodyPartsWindow:!1,createCustomerModalSuccess:!1}),v=async e=>{t.doctorData.forEach((a=>{if(e.id===a.id)if(e.select){if(1===t.selectedDoctor.length)return null;e.select=!1}else{if(t.selectedDoctor.length>=4)return null;e.select=!0}})),l(),"detailedInformation"===t.checkInContent&&n(t.calendarContent),"dateOfAppointment"===t.checkInContent&&await c()},g=(0,ze.iH)([]);async function b(){const e=`${t.year}-${t.month+1<=9?"0":""}${t.month+1}-${t.date<=9?"0":""}${t.date}`,a=`/api/Order/GetOutstandingData?date=${e}`,o=h(),l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},method:"GET"},i=await m(a,l);g.value=i.data}const w=()=>{t.checkInContent="dateOfAppointment"===t.checkInContent?"detailedInformation":"dateOfAppointment",n()},D=e=>{const t=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];return t[e]},k=()=>{if(y.appointmentBodyPartsWindow)return null;function e(){y.appointmentBodyPartsWindow=!1,document.removeEventListener("click",e)}y.appointmentBodyPartsWindow=!0,document.addEventListener("click",e)},f=e=>{const a=!t.filterQueryStatus[e];t.filterQueryStatus[e]=a,n()},_=()=>{t.filterQueryStatus={continuousOutpatientNum:1,isAppointment:!0,morning:!0,afternoon:!0,evening:!0},y.continuousOrReservedStatus="continuousOutpatientAmount",n()},x=(0,ze.iH)(0);function C(){"detailedInformation"!==t.checkInContent&&(x.value=1)}(0,o.bv)((()=>{C()}));const I=()=>{let e=P(t.year,t.month);e.forEach(((e,a)=>{e.date===t.date&&(y.focusIndex=a)}));const a=e.length-10,o=e.length-a;if(y.focusIndex<=o){const{year:a,month:o}=M(t.year,t.month,!0);let l=P(a,o);e=l.concat(e)}if(y.focusIndex>=a){const{year:a,month:o}=M(t.year,t.month,!1);let l=P(a,o);e=e.concat(l)}e.forEach(((e,a)=>{e.date===t.date&&e.month===t.month+1&&e.year===t.year&&(y.focusIndex=a)})),y.stripCalendar=e,T(y.focusIndex)},T=e=>{const t=e-5;(0,o.Y3)((()=>{const e=document.querySelectorAll(".calendarList");let a=0;for(let l=0;l<t;l++)a+=e[l].offsetWidth+32;const o=document.querySelector(".scroll");o.scrollTo({left:a,behavior:"smooth"})}))},M=(e,t,a)=>(a?t-=1:t+=1,12===t&&(t=0,e+=1),-1===t&&(t=11,e-=1),{year:e,month:t}),P=(e,t)=>{let a=new Date(e,t+1,1),o=[],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];a.setHours(a.getHours()-1);const i=a.getDate();for(let n=1;n<=i;n++){let a=new Date(e,t,n).getDay();o.push({day:l[a],date:n,month:t+1,year:e})}return o},A=e=>{let t=y.stripCalendar.length;const a=t-10,o=t-a;y.focusIndex=e?y.focusIndex-6:y.focusIndex+6;const l=y.stripCalendar[y.focusIndex];if(y.focusIndex<=o){const{year:e,month:t}=M(y.stripCalendar[y.focusIndex].year,y.stripCalendar[y.focusIndex].month-1,!0);let a=P(e,t);y.stripCalendar=a.concat(y.stripCalendar)}if(y.focusIndex>=a){const{year:e,month:t}=M(y.stripCalendar[y.focusIndex].year,y.stripCalendar[y.focusIndex].month-1,!1);let a=P(e,t);y.stripCalendar=y.stripCalendar.concat(a)}y.stripCalendar.forEach(((e,t)=>{e.date===l.date&&e.month===l.month&&e.year===l.year&&(y.focusIndex=t)})),T(y.focusIndex)},O=({date:e,month:a,year:o})=>{t.date=e,t.month=a-1,t.year=o,n()};async function z(){i(),I(),await a(),l(),await c(),await b()}return z(),{data:y,outstandingData:g,accordionNum:x,showOrHideDoctorData:v,setPeriod:f,clinicPeriodToCh:s,convertTimeFormatSlash:r,openAppointmentBodyPartsWindow:k,departmentToggle:d,searchDetailedInformation:p,filterQueryReset:_,monthNumtoEn:D,calendarListMove:A,selectDate:O,switchToDiagnosisOrDetails:w,...(0,ze.BK)(t)}}};const Cm=(0,Jr.Z)(xm,[["render",Oe],["__scopeId","data-v-2ee687df"]]);var Im=Cm}}]);
//# sourceMappingURL=705.bd4721dd.js.map